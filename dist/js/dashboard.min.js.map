{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///external \"jQuery\"","webpack:///external \"window\"","webpack:///./assets/js/dashboard.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","r","value","n","__esModule","object","property","prototype","hasOwnProperty","p","s","jQuery","window","_jquery","_window","currentSite","siteStack","$features","_jquery2","default","document","getElementsByClassName","$errorOverlay","$progressBar","$syncStatusText","$startSyncButton","$resumeSyncButton","$pauseSyncButton","$cancelSyncButton","syncStatus","featureSync","processed","toProcess","updateSyncDash","text","css","width","parseInt","epDash","sync_initial","show","addClass","hide","sync_syncing","url","sync_paused","sync_wpcli","sync_error","removeClass","find","setTimeout","sync_complete","cancelSync","ajax","method","ajaxurl","data","action","nonce","sync","feature_sync","done","response","found_posts","offset","site_stack","current_site","length","start","error","status","on","undefined","parents","toggleClass","event","preventDefault","hasClass","feature","target","getAttribute","$feature","settings","each","type","attr","active","reindex","remove","index_meta","wpcli_sync","auto_start_index","history","pushState","title","location","pathname","search","replace"],"mappings":"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","file":"dashboard.min.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 4);\n","module.exports = jQuery;","module.exports = window;","import jQuery from 'jquery'\nimport { ajaxurl, epDash } from 'window'\n\nconst $features = jQuery( document.getElementsByClassName( 'ep-features' ) )\nconst $errorOverlay = jQuery( document.getElementsByClassName( 'error-overlay' ) )\nconst $progressBar = jQuery( document.getElementsByClassName( 'progress-bar' ) )\nconst $syncStatusText = jQuery( document.getElementsByClassName( 'sync-status' ) )\nconst $startSyncButton = jQuery( document.getElementsByClassName( 'start-sync' ) )\nconst $resumeSyncButton = jQuery( document.getElementsByClassName( 'resume-sync' ) )\nconst $pauseSyncButton = jQuery( document.getElementsByClassName( 'pause-sync' ) )\nconst $cancelSyncButton = jQuery( document.getElementsByClassName( 'cancel-sync' ) )\n\nvar syncStatus = 'sync'\nvar featureSync = false\nvar currentSite\nvar siteStack\nvar processed = 0\nvar toProcess = 0\n\n$features.on( 'click', '.learn-more, .collapse', () => {\n\tjQuery( this ).parents( '.ep-feature' ).toggleClass( 'show-full' )\n} )\n\n$features.on( 'click', '.settings-button', () => {\n\tjQuery( this ).parents( '.ep-feature' ).toggleClass( 'show-settings' )\n} )\n\n$features.on( 'click', '.save-settings', ( event ) => {\n\tevent.preventDefault()\n\n\tif ( jQuery( this ).hasClass( 'disabled' ) ) {\n\t\treturn\n\t}\n\n\tvar feature = event.target.getAttribute( 'data-feature' )\n\tvar $feature = $features.find( '.ep-feature-' + feature )\n\n\tvar settings = {}\n\n\tvar $settings = $feature.find( '.setting-field' )\n\n\t$settings.each( () => {\n\t\tvar type = jQuery( this ).attr( 'type' )\n\t\tvar name = jQuery( this ).attr( 'data-field-name' )\n\t\tvar value = jQuery( this ).attr( 'value' )\n\n\t\tif ( type === 'radio' ) {\n\t\t\tif ( jQuery( this ).attr( 'checked' ) ) {\n\t\t\t\tsettings[ name ] = value\n\t\t\t}\n\t\t} else {\n\t\t\tsettings[ name ] = value\n\t\t}\n\t} )\n\n\t$feature.addClass( 'saving' )\n\n\tjQuery.ajax( {\n\t\tmethod: 'post',\n\t\turl: ajaxurl,\n\t\tdata: {\n\t\t\taction: 'ep_save_feature',\n\t\t\tfeature: feature,\n\t\t\tnonce: epDash.nonce,\n\t\t\tsettings: settings\n\t\t}\n\t} ).done( ( response ) => {\n\t\tsetTimeout( () => {\n\t\t\t$feature.removeClass( 'saving' )\n\n\t\t\tif ( settings.active === '1' ) {\n\t\t\t\t$feature.addClass( 'feature-active' )\n\t\t\t} else {\n\t\t\t\t$feature.removeClass( 'feature-active' )\n\t\t\t}\n\n\t\t\tif ( response.data.reindex ) {\n\t\t\t\tsyncStatus = 'initialsync'\n\n\t\t\t\tupdateSyncDash()\n\n\t\t\t\t// On initial sync, remove dashboard warnings that dont make sense\n\t\t\t\tjQuery( '[data-ep-notice=\"no-sync\"], [data-ep-notice=\"auto-activate-sync\"], [data-ep-notice=\"upgrade-sync\"]' ).remove()\n\n\t\t\t\tsyncStatus = 'sync'\n\n\t\t\t\t$feature.addClass( 'feature-syncing' )\n\n\t\t\t\tfeatureSync = feature\n\n\t\t\t\tsync()\n\t\t\t}\n\t\t}, 700 )\n\t} ).error( () => {\n\t\tsetTimeout( () => {\n\t\t\t$feature.removeClass( 'saving' )\n\t\t\t$feature.removeClass( 'feature-active' )\n\t\t\t$feature.removeClass( 'feature-syncing' )\n\t\t}, 700 )\n\t} )\n} )\n\nif ( epDash.index_meta ) {\n\tif ( epDash.index_meta.wpcli_sync ) {\n\t\tsyncStatus = 'wpcli'\n\t\tupdateSyncDash()\n\t} else {\n\t\tprocessed = epDash.index_meta.offset\n\t\ttoProcess = epDash.index_meta['found_posts']\n\n\t\tif ( epDash.index_meta.feature_sync ) {\n\t\t\tfeatureSync = epDash.index_meta.feature_sync\n\t\t}\n\n\t\tif ( epDash.index_meta.current_site ) {\n\t\t\tcurrentSite = epDash.index_meta.current_site\n\t\t}\n\n\t\tif ( epDash.index_meta.site_stack ) {\n\t\t\tsiteStack = epDash.index_meta.site_stack\n\t\t}\n\n\t\tif ( siteStack && siteStack.length ) {\n\t\t\t// We are mid sync\n\t\t\tif ( epDash.auto_start_index ) {\n\t\t\t\tsyncStatus = 'sync'\n\n\t\t\t\thistory.pushState( {}, document.title, document.location.pathname + document.location.search.replace( /&do_sync/, '' ) )\n\n\t\t\t\tupdateSyncDash()\n\t\t\t\tsync()\n\t\t\t} else {\n\t\t\t\tsyncStatus = 'pause'\n\t\t\t\tupdateSyncDash()\n\t\t\t}\n\t\t} else {\n\t\t\tif ( toProcess === 0 && ! epDash.index_meta.start ) {\n\t\t\t\t// Sync finished\n\t\t\t\tsyncStatus = 'finished'\n\t\t\t\tupdateSyncDash()\n\t\t\t} else {\n\t\t\t\t// We are mid sync\n\t\t\t\tif ( epDash.auto_start_index ) {\n\t\t\t\t\tsyncStatus = 'sync'\n\n\t\t\t\t\thistory.pushState( {}, document.title, document.location.pathname + document.location.search.replace( /&do_sync/, '' ) )\n\n\t\t\t\t\tupdateSyncDash()\n\t\t\t\t\tsync()\n\t\t\t\t} else {\n\t\t\t\t\tsyncStatus = 'pause'\n\t\t\t\t\tupdateSyncDash()\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n} else {\n\t// Start a new sync automatically\n\tif ( epDash.auto_start_index ) {\n\t\tsyncStatus = 'initialsync'\n\n\t\tupdateSyncDash()\n\n\t\tsyncStatus = 'sync'\n\n\t\thistory.pushState( {}, document.title, document.location.pathname + document.location.search.replace( /&do_sync/, '' ) )\n\n\t\tsync()\n\t}\n}\n\nfunction updateSyncDash() {\n\tlet text\n\n\tif ( processed === 0 ) {\n\t\t$progressBar.css( { width: '1%' } )\n\t} else {\n\t\tvar width = parseInt( processed ) / parseInt( toProcess ) * 100\n\t\t$progressBar.css( { width: width + '%' } )\n\t}\n\n\tif ( syncStatus === 'initialsync' ) {\n\t\ttext = epDash.sync_initial\n\n\t\t$syncStatusText.text( text )\n\n\t\t$syncStatusText.show()\n\t\t$progressBar.show()\n\t\t$pauseSyncButton.show()\n\t\t$errorOverlay.addClass( 'syncing' )\n\n\t\t$cancelSyncButton.hide()\n\t\t$resumeSyncButton.hide()\n\t\t$startSyncButton.hide()\n\t} else if ( syncStatus === 'sync' ) {\n\t\ttext = epDash.sync_syncing + ' ' + parseInt( processed ) + '/' + parseInt( toProcess )\n\n\t\tif ( currentSite ) {\n\t\t\ttext += ' (' + currentSite.url + ')'\n\t\t}\n\n\t\t$syncStatusText.text( text )\n\n\t\t$syncStatusText.show()\n\t\t$progressBar.show()\n\t\t$pauseSyncButton.show()\n\t\t$errorOverlay.addClass( 'syncing' )\n\n\t\t$cancelSyncButton.hide()\n\t\t$resumeSyncButton.hide()\n\t\t$startSyncButton.hide()\n\t} else if ( syncStatus === 'pause' ) {\n\t\ttext = epDash.sync_paused\n\n\t\tif ( toProcess && toProcess !== 0 ) {\n\t\t\ttext += ' ' + parseInt( processed ) + '/' + parseInt( toProcess )\n\t\t}\n\n\t\tif ( currentSite ) {\n\t\t\ttext += ' (' + currentSite.url + ')'\n\t\t}\n\n\t\t$syncStatusText.text( text )\n\n\t\t$syncStatusText.show()\n\t\t$progressBar.show()\n\t\t$pauseSyncButton.hide()\n\t\t$errorOverlay.addClass( 'syncing' )\n\n\t\t$cancelSyncButton.show()\n\t\t$resumeSyncButton.show()\n\t\t$startSyncButton.hide()\n\t} else if ( syncStatus === 'wpcli' ) {\n\t\ttext = epDash.sync_wpcli\n\n\t\t$syncStatusText.text( text )\n\n\t\t$syncStatusText.show()\n\t\t$progressBar.hide()\n\t\t$pauseSyncButton.hide()\n\t\t$errorOverlay.addClass( 'syncing' )\n\n\t\t$cancelSyncButton.hide()\n\t\t$resumeSyncButton.hide()\n\t\t$startSyncButton.hide()\n\t} else if ( syncStatus === 'error' ) {\n\t\t$syncStatusText.text( epDash.sync_error )\n\t\t$syncStatusText.show()\n\t\t$startSyncButton.show()\n\t\t$cancelSyncButton.hide()\n\t\t$resumeSyncButton.hide()\n\t\t$pauseSyncButton.hide()\n\t\t$errorOverlay.removeClass( 'syncing' )\n\t\t$progressBar.hide()\n\n\t\tif ( featureSync ) {\n\t\t\t$features.find( '.ep-feature-' + featureSync ).removeClass( 'feature-syncing' )\n\t\t}\n\n\t\tfeatureSync = null\n\n\t\tsetTimeout( () => {\n\t\t\t$syncStatusText.hide()\n\t\t}, 7000 )\n\t} else if ( syncStatus === 'cancel' ) {\n\t\t$syncStatusText.hide()\n\t\t$progressBar.hide()\n\t\t$pauseSyncButton.hide()\n\t\t$errorOverlay.removeClass( 'syncing' )\n\n\t\t$cancelSyncButton.hide()\n\t\t$resumeSyncButton.hide()\n\t\t$startSyncButton.show()\n\n\t\tif ( featureSync ) {\n\t\t\t$features.find( '.ep-feature-' + featureSync ).removeClass( 'feature-syncing' )\n\t\t}\n\n\t\tfeatureSync = null\n\t} else if ( syncStatus === 'finished' ) {\n\t\t$syncStatusText.text( epDash.sync_complete )\n\n\t\t$syncStatusText.show()\n\t\t$progressBar.hide()\n\t\t$pauseSyncButton.hide()\n\t\t$cancelSyncButton.hide()\n\t\t$resumeSyncButton.hide()\n\t\t$startSyncButton.show()\n\t\t$errorOverlay.removeClass( 'syncing' )\n\n\t\tif ( featureSync ) {\n\t\t\t$features.find( '.ep-feature-' + featureSync ).removeClass( 'feature-syncing' )\n\t\t}\n\n\t\tfeatureSync = null\n\n\t\tsetTimeout( () => {\n\t\t\t$syncStatusText.hide()\n\t\t}, 7000 )\n\t}\n}\n\nfunction cancelSync() {\n\tjQuery.ajax( {\n\t\tmethod: 'post',\n\t\turl: ajaxurl,\n\t\tdata: {\n\t\t\taction: 'ep_cancel_index',\n\t\t\tnonce: epDash.nonce\n\t\t}\n\t} )\n}\n\nfunction sync() {\n\tjQuery.ajax( {\n\t\tmethod: 'post',\n\t\turl: ajaxurl,\n\t\tdata: {\n\t\t\taction: 'ep_index',\n\t\t\tfeature_sync: featureSync,\n\t\t\tnonce: epDash.nonce\n\t\t}\n\t} ).done( ( response ) => {\n\t\tif ( syncStatus !== 'sync' ) {\n\t\t\treturn\n\t\t}\n\n\t\ttoProcess = response.data.found_posts\n\t\tprocessed = response.data.offset\n\n\t\tif ( response.data.site_stack ) {\n\t\t\tsiteStack = response.data.site_stack\n\t\t}\n\n\t\tif ( response.data.current_site ) {\n\t\t\tcurrentSite = response.data.current_site\n\t\t}\n\n\t\tif ( siteStack && siteStack.length ) {\n\t\t\t// We are mid multisite sync\n\t\t\tsyncStatus = 'sync'\n\t\t\tupdateSyncDash()\n\n\t\t\tsync()\n\t\t\treturn\n\t\t}\n\n\t\tif ( response.data.found_posts === 0 && ! response.data.start ) {\n\t\t\t// Sync finished\n\t\t\tsyncStatus = 'finished'\n\t\t\tupdateSyncDash()\n\t\t} else {\n\t\t\t// We are starting a sync\n\t\t\tsyncStatus = 'sync'\n\t\t\tupdateSyncDash()\n\n\t\t\tsync()\n\t\t}\n\t} ).error( ( response ) => {\n\t\tif ( response && response.status && parseInt( response.status ) >= 400 && parseInt( response.status ) < 600 ) {\n\t\t\tsyncStatus = 'error'\n\t\t\tupdateSyncDash()\n\n\t\t\tcancelSync()\n\t\t}\n\t} )\n}\n\n$startSyncButton.on( 'click', () => {\n\tsyncStatus = 'initialsync'\n\n\tupdateSyncDash()\n\n\t// On initial sync, remove dashboard warnings that dont make sense\n\tjQuery( '[data-ep-notice=\"no-sync\"], [data-ep-notice=\"auto-activate-sync\"], [data-ep-notice=\"upgrade-sync\"]' ).remove()\n\n\tsyncStatus = 'sync'\n\tsync()\n} )\n\n$pauseSyncButton.on( 'click', () => {\n\tsyncStatus = 'pause'\n\n\tupdateSyncDash()\n} )\n\n$resumeSyncButton.on( 'click', () => {\n\tsyncStatus = 'sync'\n\n\tupdateSyncDash()\n\n\tsync()\n} )\n\n$cancelSyncButton.on( 'click', () => {\n\tsyncStatus = 'cancel'\n\n\tupdateSyncDash()\n\n\tcancelSync()\n} )\n"],"sourceRoot":""}
{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///external \"jQuery\"","webpack:///external \"window\"","webpack:///./assets/js/dashboard.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","r","value","n","__esModule","object","property","prototype","hasOwnProperty","p","s","jQuery","window","_jquery","_window","$features","_jquery2","default","document","getElementsByClassName","$errorOverlay","$progressBar","$syncStatusText","$startSyncButton","$resumeSyncButton","$pauseSyncButton","$cancelSyncButton","syncStatus","featureSync","currentSyncItem","syncStack","processed","toProcess","updateSyncDash","text","css","width","parseInt","epDash","sync_initial","show","addClass","hide","sync_syncing","sync_indexable_labels","indexable","plural","toLowerCase","url","sync_paused","sync_wpcli","sync_error","removeClass","find","setTimeout","sync_complete","cancelSync","ajax","method","ajaxurl","data","action","nonce","sync","feature_sync","done","response","found_items","offset","sync_stack","current_sync_item","length","start","error","status","on","this","parents","toggleClass","event","preventDefault","hasClass","feature","target","getAttribute","$feature","settings","each","type","attr","active","reindex","remove","index_meta","wpcli_sync","site_stack","auto_start_index","history","pushState","title","location","pathname","search","replace"],"mappings":"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","file":"dashboard.min.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 4);\n","module.exports = jQuery;","module.exports = window;","import jQuery from 'jquery'\nimport { ajaxurl, epDash } from 'window'\n\nconst $features = jQuery( document.getElementsByClassName( 'ep-features' ) )\nconst $errorOverlay = jQuery( document.getElementsByClassName( 'error-overlay' ) )\nconst $progressBar = jQuery( document.getElementsByClassName( 'progress-bar' ) )\nconst $syncStatusText = jQuery( document.getElementsByClassName( 'sync-status' ) )\nconst $startSyncButton = jQuery( document.getElementsByClassName( 'start-sync' ) )\nconst $resumeSyncButton = jQuery( document.getElementsByClassName( 'resume-sync' ) )\nconst $pauseSyncButton = jQuery( document.getElementsByClassName( 'pause-sync' ) )\nconst $cancelSyncButton = jQuery( document.getElementsByClassName( 'cancel-sync' ) )\n\nlet syncStatus = 'sync',\n\tfeatureSync = false,\n\tcurrentSyncItem,\n\tsyncStack,\n\tprocessed = 0,\n\ttoProcess = 0\n\n$features.on( 'click', '.learn-more, .collapse', function() {\n\tjQuery( this ).parents( '.ep-feature' ).toggleClass( 'show-full' )\n} )\n\n$features.on( 'click', '.settings-button', function() {\n\tjQuery( this ).parents( '.ep-feature' ).toggleClass( 'show-settings' )\n} )\n\n$features.on( 'click', '.save-settings', function( event ) {\n\tevent.preventDefault()\n\n\tif ( jQuery( this ).hasClass( 'disabled' ) ) {\n\t\treturn\n\t}\n\n\tconst feature = event.target.getAttribute( 'data-feature' )\n\tconst $feature = $features.find( '.ep-feature-' + feature )\n\tconst settings = {}\n\tconst $settings = $feature.find( '.setting-field' )\n\n\t$settings.each( function() {\n\t\tconst type = jQuery( this ).attr( 'type' )\n\t\tconst name = jQuery( this ).attr( 'data-field-name' )\n\t\tconst value = jQuery( this ).attr( 'value' )\n\n\t\tif ( type === 'radio' ) {\n\t\t\tif ( jQuery( this ).attr( 'checked' ) ) {\n\t\t\t\tsettings[ name ] = value\n\t\t\t}\n\t\t} else {\n\t\t\tsettings[ name ] = value\n\t\t}\n\t} )\n\n\t$feature.addClass( 'saving' )\n\n\tjQuery.ajax( {\n\t\tmethod: 'post',\n\t\turl: ajaxurl,\n\t\tdata: {\n\t\t\taction: 'ep_save_feature',\n\t\t\tfeature: feature,\n\t\t\tnonce: epDash.nonce,\n\t\t\tsettings: settings\n\t\t}\n\t} ).done( ( response ) => {\n\t\tsetTimeout( () => {\n\t\t\t$feature.removeClass( 'saving' )\n\n\t\t\tif ( settings.active === '1' ) {\n\t\t\t\t$feature.addClass( 'feature-active' )\n\t\t\t} else {\n\t\t\t\t$feature.removeClass( 'feature-active' )\n\t\t\t}\n\n\t\t\tif ( response.data.reindex ) {\n\t\t\t\tsyncStatus = 'initialsync'\n\n\t\t\t\tupdateSyncDash()\n\n\t\t\t\t// On initial sync, remove dashboard warnings that dont make sense\n\t\t\t\tjQuery( '[data-ep-notice=\"no-sync\"], [data-ep-notice=\"auto-activate-sync\"], [data-ep-notice=\"upgrade-sync\"]' ).remove()\n\n\t\t\t\tsyncStatus = 'sync'\n\n\t\t\t\t$feature.addClass( 'feature-syncing' )\n\n\t\t\t\tfeatureSync = feature\n\n\t\t\t\tsync()\n\t\t\t}\n\t\t}, 700 )\n\t} ).error( () => {\n\t\tsetTimeout( () => {\n\t\t\t$feature.removeClass( 'saving' )\n\t\t\t$feature.removeClass( 'feature-active' )\n\t\t\t$feature.removeClass( 'feature-syncing' )\n\t\t}, 700 )\n\t} )\n} )\n\nif ( epDash.index_meta ) {\n\tif ( epDash.index_meta.wpcli_sync ) {\n\t\tsyncStatus = 'wpcli'\n\t\tupdateSyncDash()\n\t} else {\n\t\tprocessed = epDash.index_meta.offset\n\t\ttoProcess = epDash.index_meta['found_items']\n\n\t\tif ( epDash.index_meta.feature_sync ) {\n\t\t\tfeatureSync = epDash.index_meta.feature_sync\n\t\t}\n\n\t\tif ( epDash.index_meta.current_sync_item ) {\n\t\t\tcurrentSyncItem = epDash.index_meta.current_sync_item\n\t\t}\n\n\t\tif ( epDash.index_meta.site_stack ) {\n\t\t\tsyncStack = epDash.index_meta.sync_stack\n\t\t}\n\n\t\tif ( syncStack && syncStack.length ) {\n\t\t\t// We are mid sync\n\t\t\tif ( epDash.auto_start_index ) {\n\t\t\t\tsyncStatus = 'sync'\n\n\t\t\t\thistory.pushState( {}, document.title, document.location.pathname + document.location.search.replace( /&do_sync/, '' ) )\n\n\t\t\t\tupdateSyncDash()\n\t\t\t\tsync()\n\t\t\t} else {\n\t\t\t\tsyncStatus = 'pause'\n\t\t\t\tupdateSyncDash()\n\t\t\t}\n\t\t} else {\n\t\t\tif ( toProcess === 0 && ! epDash.index_meta.start ) {\n\t\t\t\t// Sync finished\n\t\t\t\tsyncStatus = 'finished'\n\t\t\t\tupdateSyncDash()\n\t\t\t} else {\n\t\t\t\t// We are mid sync\n\t\t\t\tif ( epDash.auto_start_index ) {\n\t\t\t\t\tsyncStatus = 'sync'\n\n\t\t\t\t\thistory.pushState( {}, document.title, document.location.pathname + document.location.search.replace( /&do_sync/, '' ) )\n\n\t\t\t\t\tupdateSyncDash()\n\t\t\t\t\tsync()\n\t\t\t\t} else {\n\t\t\t\t\tsyncStatus = 'pause'\n\t\t\t\t\tupdateSyncDash()\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n} else {\n\t// Start a new sync automatically\n\tif ( epDash.auto_start_index ) {\n\t\tsyncStatus = 'initialsync'\n\n\t\tupdateSyncDash()\n\n\t\tsyncStatus = 'sync'\n\n\t\thistory.pushState( {}, document.title, document.location.pathname + document.location.search.replace( /&do_sync/, '' ) )\n\n\t\tsync()\n\t}\n}\n\nfunction updateSyncDash() {\n\tlet text\n\n\tif ( processed === 0 ) {\n\t\t$progressBar.css( { width: '1%' } )\n\t} else {\n\t\tlet width = parseInt( processed ) / parseInt( toProcess ) * 100\n\t\t$progressBar.css( { width: width + '%' } )\n\t}\n\n\tif ( syncStatus === 'initialsync' ) {\n\t\ttext = epDash.sync_initial\n\n\t\t$syncStatusText.text( text )\n\n\t\t$syncStatusText.show()\n\t\t$progressBar.show()\n\t\t$pauseSyncButton.show()\n\t\t$errorOverlay.addClass( 'syncing' )\n\n\t\t$cancelSyncButton.hide()\n\t\t$resumeSyncButton.hide()\n\t\t$startSyncButton.hide()\n\t} else if ( syncStatus === 'sync' ) {\n\t\ttext = epDash.sync_syncing + ' ' + epDash.sync_indexable_labels[ currentSyncItem.indexable ].plural.toLowerCase() + ' ' + parseInt( processed ) + '/' + parseInt( toProcess )\n\n\t\tif ( currentSyncItem.url ) {\n\t\t\ttext += ' (' + currentSyncItem.url + ')'\n\t\t}\n\n\t\t$syncStatusText.text( text )\n\n\t\t$syncStatusText.show()\n\t\t$progressBar.show()\n\t\t$pauseSyncButton.show()\n\t\t$errorOverlay.addClass( 'syncing' )\n\n\t\t$cancelSyncButton.hide()\n\t\t$resumeSyncButton.hide()\n\t\t$startSyncButton.hide()\n\t} else if ( syncStatus === 'pause' ) {\n\t\ttext = epDash.sync_paused\n\n\t\tif ( toProcess && toProcess !== 0 ) {\n\t\t\ttext += ' ' + parseInt( processed ) + '/' + parseInt( toProcess )\n\t\t}\n\n\t\tif ( currentSyncItem.url ) {\n\t\t\ttext += ' (' + currentSyncItem.url + ')'\n\t\t}\n\n\t\t$syncStatusText.text( text )\n\n\t\t$syncStatusText.show()\n\t\t$progressBar.show()\n\t\t$pauseSyncButton.hide()\n\t\t$errorOverlay.addClass( 'syncing' )\n\n\t\t$cancelSyncButton.show()\n\t\t$resumeSyncButton.show()\n\t\t$startSyncButton.hide()\n\t} else if ( syncStatus === 'wpcli' ) {\n\t\ttext = epDash.sync_wpcli\n\n\t\t$syncStatusText.text( text )\n\n\t\t$syncStatusText.show()\n\t\t$progressBar.hide()\n\t\t$pauseSyncButton.hide()\n\t\t$errorOverlay.addClass( 'syncing' )\n\n\t\t$cancelSyncButton.hide()\n\t\t$resumeSyncButton.hide()\n\t\t$startSyncButton.hide()\n\t} else if ( syncStatus === 'error' ) {\n\t\t$syncStatusText.text( epDash.sync_error )\n\t\t$syncStatusText.show()\n\t\t$startSyncButton.show()\n\t\t$cancelSyncButton.hide()\n\t\t$resumeSyncButton.hide()\n\t\t$pauseSyncButton.hide()\n\t\t$errorOverlay.removeClass( 'syncing' )\n\t\t$progressBar.hide()\n\n\t\tif ( featureSync ) {\n\t\t\t$features.find( '.ep-feature-' + featureSync ).removeClass( 'feature-syncing' )\n\t\t}\n\n\t\tfeatureSync = null\n\n\t\tsetTimeout( () => {\n\t\t\t$syncStatusText.hide()\n\t\t}, 7000 )\n\t} else if ( syncStatus === 'cancel' ) {\n\t\t$syncStatusText.hide()\n\t\t$progressBar.hide()\n\t\t$pauseSyncButton.hide()\n\t\t$errorOverlay.removeClass( 'syncing' )\n\n\t\t$cancelSyncButton.hide()\n\t\t$resumeSyncButton.hide()\n\t\t$startSyncButton.show()\n\n\t\tif ( featureSync ) {\n\t\t\t$features.find( '.ep-feature-' + featureSync ).removeClass( 'feature-syncing' )\n\t\t}\n\n\t\tfeatureSync = null\n\t} else if ( syncStatus === 'finished' ) {\n\t\t$syncStatusText.text( epDash.sync_complete )\n\n\t\t$syncStatusText.show()\n\t\t$progressBar.hide()\n\t\t$pauseSyncButton.hide()\n\t\t$cancelSyncButton.hide()\n\t\t$resumeSyncButton.hide()\n\t\t$startSyncButton.show()\n\t\t$errorOverlay.removeClass( 'syncing' )\n\n\t\tif ( featureSync ) {\n\t\t\t$features.find( '.ep-feature-' + featureSync ).removeClass( 'feature-syncing' )\n\t\t}\n\n\t\tfeatureSync = null\n\n\t\tsetTimeout( () => {\n\t\t\t$syncStatusText.hide()\n\t\t}, 7000 )\n\t}\n}\n\nfunction cancelSync() {\n\tjQuery.ajax( {\n\t\tmethod: 'post',\n\t\turl: ajaxurl,\n\t\tdata: {\n\t\t\taction: 'ep_cancel_index',\n\t\t\tnonce: epDash.nonce\n\t\t}\n\t} )\n}\n\nfunction sync() {\n\tjQuery.ajax( {\n\t\tmethod: 'post',\n\t\turl: ajaxurl,\n\t\tdata: {\n\t\t\taction: 'ep_index',\n\t\t\tfeature_sync: featureSync,\n\t\t\tnonce: epDash.nonce\n\t\t}\n\t} ).done( ( response ) => {\n\t\tif ( syncStatus !== 'sync' ) {\n\t\t\treturn\n\t\t}\n\n\t\ttoProcess = response.data.found_items\n\t\tprocessed = response.data.offset\n\n\t\tif ( response.data.sync_stack ) {\n\t\t\tsyncStack = response.data.sync_stack\n\t\t}\n\n\t\tif ( response.data.current_sync_item ) {\n\t\t\tcurrentSyncItem = response.data.current_sync_item\n\t\t}\n\n\t\tif ( syncStack && syncStack.length ) {\n\t\t\t// We are mid multisite sync\n\t\t\tsyncStatus = 'sync'\n\t\t\tupdateSyncDash()\n\n\t\t\tsync()\n\t\t\treturn\n\t\t}\n\n\t\tif ( response.data.found_items === 0 && ! response.data.start ) {\n\t\t\t// Sync finished\n\t\t\tsyncStatus = 'finished'\n\t\t\tupdateSyncDash()\n\t\t} else {\n\t\t\t// We are starting a sync\n\t\t\tsyncStatus = 'sync'\n\t\t\tupdateSyncDash()\n\n\t\t\tsync()\n\t\t}\n\t} ).error( ( response ) => {\n\t\tif ( response && response.status && parseInt( response.status ) >= 400 && parseInt( response.status ) < 600 ) {\n\t\t\tsyncStatus = 'error'\n\t\t\tupdateSyncDash()\n\n\t\t\tcancelSync()\n\t\t}\n\t} )\n}\n\n$startSyncButton.on( 'click', () => {\n\tsyncStatus = 'initialsync'\n\n\tupdateSyncDash()\n\n\t// On initial sync, remove dashboard warnings that dont make sense\n\tjQuery( '[data-ep-notice=\"no-sync\"], [data-ep-notice=\"auto-activate-sync\"], [data-ep-notice=\"upgrade-sync\"]' ).remove()\n\n\tsyncStatus = 'sync'\n\tsync()\n} )\n\n$pauseSyncButton.on( 'click', () => {\n\tsyncStatus = 'pause'\n\n\tupdateSyncDash()\n} )\n\n$resumeSyncButton.on( 'click', () => {\n\tsyncStatus = 'sync'\n\n\tupdateSyncDash()\n\n\tsync()\n} )\n\n$cancelSyncButton.on( 'click', () => {\n\tsyncStatus = 'cancel'\n\n\tupdateSyncDash()\n\n\tcancelSync()\n} )\n"],"sourceRoot":""}
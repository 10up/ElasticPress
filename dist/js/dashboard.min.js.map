{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./assets/js/dashboard.js","webpack:///external \"jQuery\"","webpack:///external \"window\""],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","_jquery","_window","$features","_jquery2","default","document","getElementsByClassName","$errorOverlay","$progressBar","$syncStatusText","$startSyncButton","$resumeSyncButton","$pauseSyncButton","$cancelSyncButton","$epCredentialsTab","$epCredentialsHostLabel","$epCredentialsHostLegend","$epCredentialsAdditionalFields","epHostField","getElementById","epHost","epHostNewValue","syncStatus","featureSync","currentSyncItem","syncStack","processed","toProcess","updateSyncDash","text","css","width","parseInt","epDash","sync_initial","show","addClass","hide","sync_syncing","indexable","sync_indexable_labels","plural","toLowerCase","url","sync_paused","sync_wpcli","sync_error","removeClass","find","setTimeout","sync_complete","cancelSync","jQuery","ajax","method","ajaxurl","data","action","nonce","sync","feature_sync","done","response","found_items","offset","sync_stack","current_sync_item","length","start","install_sync","location","replace","install_complete_url","error","status","on","this","parents","toggleClass","event","preventDefault","hasClass","feature","target","getAttribute","$feature","settings","each","type","attr","active","reindex","remove","index_meta","wpcli_sync","site_stack","auto_start_index","history","pushState","title","pathname","search","addEventListener","e","epio","currentTarget","$target","initial","disabled","window"],"mappings":"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","file":"dashboard.min.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 176);\n","/* eslint-disable camelcase */\nimport jQuery from 'jquery';\nimport { ajaxurl, epDash } from 'window';\n\nconst $features = jQuery( document.getElementsByClassName( 'ep-features' ) );\nconst $errorOverlay = jQuery( document.getElementsByClassName( 'error-overlay' ) );\nconst $progressBar = jQuery( document.getElementsByClassName( 'progress-bar' ) );\nconst $syncStatusText = jQuery( document.getElementsByClassName( 'sync-status' ) );\nconst $startSyncButton = jQuery( document.getElementsByClassName( 'start-sync' ) );\nconst $resumeSyncButton = jQuery( document.getElementsByClassName( 'resume-sync' ) );\nconst $pauseSyncButton = jQuery( document.getElementsByClassName( 'pause-sync' ) );\nconst $cancelSyncButton = jQuery( document.getElementsByClassName( 'cancel-sync' ) );\nconst $epCredentialsTab = jQuery( document.getElementsByClassName( 'ep-credentials-tab' ) );\nconst $epCredentialsHostLabel = jQuery( '.ep-host-row label' );\nconst $epCredentialsHostLegend = jQuery( document.getElementsByClassName( 'ep-host-legend' ) );\nconst $epCredentialsAdditionalFields = jQuery( document.getElementsByClassName( 'ep-additional-fields' ) );\nconst epHostField = document.getElementById( 'ep_host' );\nconst epHost = epHostField ? epHostField.value : null;\nlet epHostNewValue = '';\n\nlet syncStatus = 'sync',\n\tfeatureSync = false,\n\tcurrentSyncItem,\n\tsyncStack,\n\tprocessed = 0,\n\ttoProcess = 0;\n\n$features.on( 'click', '.learn-more, .collapse', function() {\n\tjQuery( this ).parents( '.ep-feature' ).toggleClass( 'show-full' );\n} );\n\n$features.on( 'click', '.settings-button', function() {\n\tjQuery( this ).parents( '.ep-feature' ).toggleClass( 'show-settings' );\n} );\n\n$features.on( 'click', '.save-settings', function( event ) {\n\tevent.preventDefault();\n\n\tif ( jQuery( this ).hasClass( 'disabled' ) ) {\n\t\treturn;\n\t}\n\n\tconst feature = event.target.getAttribute( 'data-feature' );\n\tconst $feature = $features.find( '.ep-feature-' + feature );\n\tconst settings = {};\n\tconst $settings = $feature.find( '.setting-field' );\n\n\t$settings.each( function() {\n\t\tconst type = jQuery( this ).attr( 'type' );\n\t\tconst name = jQuery( this ).attr( 'data-field-name' );\n\t\tconst value = jQuery( this ).attr( 'value' );\n\n\t\tif ( 'radio' === type ) {\n\t\t\tif ( jQuery( this ).attr( 'checked' ) ) {\n\t\t\t\tsettings[ name ] = value;\n\t\t\t}\n\t\t} else {\n\t\t\tsettings[ name ] = value;\n\t\t}\n\t} );\n\n\t$feature.addClass( 'saving' );\n\n\tjQuery.ajax( {\n\t\tmethod: 'post',\n\t\turl: ajaxurl,\n\t\tdata: {\n\t\t\taction: 'ep_save_feature',\n\t\t\tfeature: feature,\n\t\t\tnonce: epDash.nonce,\n\t\t\tsettings: settings\n\t\t}\n\t} ).done( ( response ) => {\n\t\tsetTimeout( () => {\n\t\t\t$feature.removeClass( 'saving' );\n\n\t\t\tif ( '1' === settings.active ) {\n\t\t\t\t$feature.addClass( 'feature-active' );\n\t\t\t} else {\n\t\t\t\t$feature.removeClass( 'feature-active' );\n\t\t\t}\n\n\t\t\tif ( response.data.reindex ) {\n\t\t\t\tsyncStatus = 'initialsync';\n\n\t\t\t\tupdateSyncDash();\n\n\t\t\t\t// On initial sync, remove dashboard warnings that dont make sense\n\t\t\t\tjQuery( '[data-ep-notice=\"no-sync\"], [data-ep-notice=\"auto-activate-sync\"], [data-ep-notice=\"upgrade-sync\"]' ).remove();\n\n\t\t\t\tsyncStatus = 'sync';\n\n\t\t\t\t$feature.addClass( 'feature-syncing' );\n\n\t\t\t\tfeatureSync = feature;\n\n\t\t\t\tsync();\n\t\t\t}\n\t\t}, 700 );\n\t} ).error( () => {\n\t\tsetTimeout( () => {\n\t\t\t$feature.removeClass( 'saving' );\n\t\t\t$feature.removeClass( 'feature-active' );\n\t\t\t$feature.removeClass( 'feature-syncing' );\n\t\t}, 700 );\n\t} );\n} );\n\nif ( epDash.index_meta ) {\n\tif ( epDash.index_meta.wpcli_sync ) {\n\t\tsyncStatus = 'wpcli';\n\t\tupdateSyncDash();\n\t} else {\n\t\tprocessed = epDash.index_meta.offset;\n\t\ttoProcess = epDash.index_meta['found_items'];\n\n\t\tif ( epDash.index_meta.feature_sync ) {\n\t\t\tfeatureSync = epDash.index_meta.feature_sync;\n\t\t}\n\n\t\tif ( epDash.index_meta.current_sync_item ) {\n\t\t\tcurrentSyncItem = epDash.index_meta.current_sync_item;\n\t\t}\n\n\t\tif ( epDash.index_meta.site_stack ) {\n\t\t\tsyncStack = epDash.index_meta.sync_stack;\n\t\t}\n\n\t\tif ( syncStack && syncStack.length ) {\n\t\t\t// We are mid sync\n\t\t\tif ( epDash.auto_start_index ) {\n\t\t\t\tsyncStatus = 'sync';\n\n\t\t\t\thistory.pushState( {}, document.title, document.location.pathname + document.location.search.replace( /&do_sync/, '' ) );\n\n\t\t\t\tupdateSyncDash();\n\t\t\t\tsync();\n\t\t\t} else {\n\t\t\t\tsyncStatus = 'pause';\n\t\t\t\tupdateSyncDash();\n\t\t\t}\n\t\t} else {\n\t\t\tif ( 0 === toProcess && ! epDash.index_meta.start ) {\n\t\t\t\t// Sync finished\n\t\t\t\tsyncStatus = 'finished';\n\t\t\t\tupdateSyncDash();\n\t\t\t} else {\n\t\t\t\t// We are mid sync\n\t\t\t\tif ( epDash.auto_start_index ) {\n\t\t\t\t\tsyncStatus = 'sync';\n\n\t\t\t\t\thistory.pushState( {}, document.title, document.location.pathname + document.location.search.replace( /&do_sync/, '' ) );\n\n\t\t\t\t\tupdateSyncDash();\n\t\t\t\t\tsync();\n\t\t\t\t} else {\n\t\t\t\t\tsyncStatus = 'pause';\n\t\t\t\t\tupdateSyncDash();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n} else {\n\t// Start a new sync automatically\n\tif ( epDash.auto_start_index ) {\n\t\tsyncStatus = 'initialsync';\n\n\t\tupdateSyncDash();\n\n\t\tsyncStatus = 'sync';\n\n\t\thistory.pushState( {}, document.title, document.location.pathname + document.location.search.replace( /&do_sync/, '' ) );\n\n\t\tsync();\n\t}\n}\n\n/**\n * Update dashboard with syncing information\n */\nfunction updateSyncDash() {\n\tlet text;\n\n\tif ( 0 === processed ) {\n\t\t$progressBar.css( { width: '1%' } );\n\t} else {\n\t\tlet width = parseInt( processed ) / parseInt( toProcess ) * 100;\n\t\t$progressBar.css( { width: width + '%' } );\n\t}\n\n\tif ( 'initialsync' === syncStatus ) {\n\t\ttext = epDash.sync_initial;\n\n\t\t$syncStatusText.text( text );\n\n\t\t$syncStatusText.show();\n\t\t$progressBar.show();\n\t\t$pauseSyncButton.show();\n\t\t$errorOverlay.addClass( 'syncing' );\n\n\t\t$cancelSyncButton.hide();\n\t\t$resumeSyncButton.hide();\n\t\t$startSyncButton.hide();\n\t} else if ( 'sync' === syncStatus ) {\n\t\ttext = epDash.sync_syncing;\n\n\t\tif ( currentSyncItem ) {\n\t\t\tif ( currentSyncItem.indexable ) {\n\t\t\t\ttext += ' ' + epDash.sync_indexable_labels[ currentSyncItem.indexable ].plural.toLowerCase() + ' ' + parseInt( processed ) + '/' + parseInt( toProcess );\n\t\t\t}\n\n\t\t\tif ( currentSyncItem.url ) {\n\t\t\t\ttext += ' (' + currentSyncItem.url + ')';\n\t\t\t}\n\t\t}\n\n\t\t$syncStatusText.text( text );\n\n\t\t$syncStatusText.show();\n\t\t$progressBar.show();\n\t\t$pauseSyncButton.show();\n\t\t$errorOverlay.addClass( 'syncing' );\n\n\t\t$cancelSyncButton.hide();\n\t\t$resumeSyncButton.hide();\n\t\t$startSyncButton.hide();\n\t} else if ( 'pause' === syncStatus ) {\n\t\ttext = epDash.sync_paused;\n\n\t\tif ( toProcess && 0 !== toProcess ) {\n\t\t\ttext += ', ' + parseInt( processed ) + '/' + parseInt( toProcess ) + ' ' + epDash.sync_indexable_labels[ currentSyncItem.indexable ].plural.toLowerCase();\n\t\t}\n\n\t\tif ( currentSyncItem && currentSyncItem.url ) {\n\t\t\ttext += ' (' + currentSyncItem.url + ')';\n\t\t}\n\n\t\t$syncStatusText.text( text );\n\n\t\t$syncStatusText.show();\n\t\t$progressBar.show();\n\t\t$pauseSyncButton.hide();\n\t\t$errorOverlay.addClass( 'syncing' );\n\n\t\t$cancelSyncButton.show();\n\t\t$resumeSyncButton.show();\n\t\t$startSyncButton.hide();\n\t} else if ( 'wpcli' === syncStatus ) {\n\t\ttext = epDash.sync_wpcli;\n\n\t\t$syncStatusText.text( text );\n\n\t\t$syncStatusText.show();\n\t\t$progressBar.hide();\n\t\t$pauseSyncButton.hide();\n\t\t$errorOverlay.addClass( 'syncing' );\n\n\t\t$cancelSyncButton.hide();\n\t\t$resumeSyncButton.hide();\n\t\t$startSyncButton.hide();\n\t} else if ( 'error' === syncStatus ) {\n\t\t$syncStatusText.text( epDash.sync_error );\n\t\t$syncStatusText.show();\n\t\t$startSyncButton.show();\n\t\t$cancelSyncButton.hide();\n\t\t$resumeSyncButton.hide();\n\t\t$pauseSyncButton.hide();\n\t\t$errorOverlay.removeClass( 'syncing' );\n\t\t$progressBar.hide();\n\n\t\tif ( featureSync ) {\n\t\t\t$features.find( '.ep-feature-' + featureSync ).removeClass( 'feature-syncing' );\n\t\t}\n\n\t\tfeatureSync = null;\n\n\t\tsetTimeout( () => {\n\t\t\t$syncStatusText.hide();\n\t\t}, 7000 );\n\t} else if ( 'cancel' === syncStatus ) {\n\t\t$syncStatusText.hide();\n\t\t$progressBar.hide();\n\t\t$pauseSyncButton.hide();\n\t\t$errorOverlay.removeClass( 'syncing' );\n\n\t\t$cancelSyncButton.hide();\n\t\t$resumeSyncButton.hide();\n\t\t$startSyncButton.show();\n\n\t\tif ( featureSync ) {\n\t\t\t$features.find( '.ep-feature-' + featureSync ).removeClass( 'feature-syncing' );\n\t\t}\n\n\t\tfeatureSync = null;\n\t} else if ( 'finished' === syncStatus ) {\n\t\t$syncStatusText.text( epDash.sync_complete );\n\n\t\t$syncStatusText.show();\n\t\t$progressBar.hide();\n\t\t$pauseSyncButton.hide();\n\t\t$cancelSyncButton.hide();\n\t\t$resumeSyncButton.hide();\n\t\t$startSyncButton.show();\n\t\t$errorOverlay.removeClass( 'syncing' );\n\n\t\tif ( featureSync ) {\n\t\t\t$features.find( '.ep-feature-' + featureSync ).removeClass( 'feature-syncing' );\n\t\t}\n\n\t\tfeatureSync = null;\n\n\t\tsetTimeout( () => {\n\t\t\t$syncStatusText.hide();\n\t\t}, 7000 );\n\t}\n}\n\n/**\n * Cancel a sync\n */\nfunction cancelSync() {\n\tjQuery.ajax( {\n\t\tmethod: 'post',\n\t\turl: ajaxurl,\n\t\tdata: {\n\t\t\taction: 'ep_cancel_index',\n\t\t\tnonce: epDash.nonce\n\t\t}\n\t} );\n}\n\n/**\n * Perform an elasticpress sync\n */\nfunction sync() {\n\tjQuery.ajax( {\n\t\tmethod: 'post',\n\t\turl: ajaxurl,\n\t\tdata: {\n\t\t\taction: 'ep_index',\n\t\t\tfeature_sync: featureSync,\n\t\t\tnonce: epDash.nonce\n\t\t}\n\t} ).done( ( response ) => {\n\t\tif ( 'sync' !== syncStatus ) {\n\t\t\treturn;\n\t\t}\n\n\t\ttoProcess = response.data.found_items;\n\t\tprocessed = response.data.offset;\n\n\t\tif ( response.data.sync_stack ) {\n\t\t\tsyncStack = response.data.sync_stack;\n\t\t}\n\n\t\tif ( response.data.current_sync_item ) {\n\t\t\tcurrentSyncItem = response.data.current_sync_item;\n\t\t}\n\n\t\tif ( syncStack && syncStack.length ) {\n\t\t\t// We are mid multisite sync\n\t\t\tsyncStatus = 'sync';\n\t\t\tupdateSyncDash();\n\n\t\t\tsync();\n\t\t\treturn;\n\t\t}\n\n\t\tif ( 0 === response.data.found_items && ! response.data.start ) {\n\t\t\t// Sync finished\n\t\t\tsyncStatus = 'finished';\n\t\t\tupdateSyncDash();\n\n\t\t\tif ( epDash.install_sync ) {\n\t\t\t\tdocument.location.replace( epDash.install_complete_url );\n\t\t\t}\n\n\t\t} else {\n\t\t\t// We are starting a sync\n\t\t\tsyncStatus = 'sync';\n\t\t\tupdateSyncDash();\n\n\t\t\tsync();\n\t\t}\n\t} ).error( ( response ) => {\n\t\tif ( response && response.status && 400 <= parseInt( response.status ) && 600 > parseInt( response.status ) ) {\n\t\t\tsyncStatus = 'error';\n\t\t\tupdateSyncDash();\n\n\t\t\tcancelSync();\n\t\t}\n\t} );\n\n}\n\n$startSyncButton.on( 'click', () => {\n\tsyncStatus = 'initialsync';\n\n\tupdateSyncDash();\n\n\t// On initial sync, remove dashboard warnings that dont make sense\n\tjQuery( '[data-ep-notice=\"no-sync\"], [data-ep-notice=\"auto-activate-sync\"], [data-ep-notice=\"upgrade-sync\"]' ).remove();\n\n\tsyncStatus = 'sync';\n\tsync();\n} );\n\n$pauseSyncButton.on( 'click', () => {\n\tsyncStatus = 'pause';\n\n\tupdateSyncDash();\n} );\n\n$resumeSyncButton.on( 'click', () => {\n\tsyncStatus = 'sync';\n\n\tupdateSyncDash();\n\n\tsync();\n} );\n\n$cancelSyncButton.on( 'click', () => {\n\tsyncStatus = 'cancel';\n\n\tupdateSyncDash();\n\n\tcancelSync();\n} );\n\nif ( epHostField ) {\n\tepHostField.addEventListener( 'input', ( e ) => {\n\t\tepHostNewValue = e.target.value;\n\t} );\n}\n\n$epCredentialsTab.on( 'click', ( e ) => {\n\tconst epio = null !== e.currentTarget.getAttribute( 'data-epio' );\n\tconst $target = jQuery( e.currentTarget );\n\tconst initial = $target.hasClass( 'initial' );\n\n\te.preventDefault();\n\n\tif ( initial && !epHostField.disabled ) {\n\t\tepHostField.value = epHost;\n\t} else {\n\t\tepHostField.value = epHostNewValue;\n\t}\n\n\t$epCredentialsTab.removeClass( 'nav-tab-active' );\n\t$target.addClass( 'nav-tab-active' );\n\n\tif ( epio ) {\n\t\t$epCredentialsHostLabel.text( 'ElasticPress.io Host URL' );\n\t\t$epCredentialsHostLegend.text( 'Plug in your ElasticPress.io server here!' );\n\t\t$epCredentialsAdditionalFields.show();\n\t\t$epCredentialsAdditionalFields.attr( 'aria-hidden', 'false' );\n\t} else {\n\t\t$epCredentialsHostLabel.text( 'Elasticsearch Host URL' );\n\t\t$epCredentialsHostLegend.text( 'Plug in your Elasticsearch server here!' );\n\t\t$epCredentialsAdditionalFields.hide();\n\t\t$epCredentialsAdditionalFields.attr( 'aria-hidden', 'true' );\n\t}\n} );\n","module.exports = jQuery;","module.exports = window;"],"sourceRoot":""}
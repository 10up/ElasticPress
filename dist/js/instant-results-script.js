!function(){var e={4483:function(e,t,n){"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t){return a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},a(e,t)}function o(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,s=i(e);if(t){var a=i(this).constructor;n=Reflect.construct(s,arguments,a)}else n=s.apply(this,arguments);return function(e,t){if(t&&("object"===r(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function i(e){return i=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},i(e)}var c=n(9196),l=n(1850),u=n(5697),p=n(4291).createFocusTrap,d=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&a(e,t)}(u,e);var t,n,r,i=o(u);function u(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(t=i.call(this,e)).tailoredFocusTrapOptions={returnFocusOnDeactivate:!1},t.returnFocusOnDeactivate=!0;var n=e.focusTrapOptions;for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&("returnFocusOnDeactivate"!==r?"onPostDeactivate"!==r?t.tailoredFocusTrapOptions[r]=n[r]:t.onPostDeactivate=n[r]:t.returnFocusOnDeactivate=!!n[r]);return t.focusTrapElements=e.containerElements||[],t.updatePreviousElement(),t}return t=u,(n=[{key:"getDocument",value:function(){return this.props.focusTrapOptions.document||("undefined"!==typeof document?document:void 0)}},{key:"getNodeForOption",value:function(e){var t=this.tailoredFocusTrapOptions[e];if(!t)return null;var n,r=t;if("string"===typeof t&&!(r=null===(n=this.getDocument())||void 0===n?void 0:n.querySelector(t)))throw new Error("`".concat(e,"` refers to no known node"));if("function"===typeof t&&!(r=t()))throw new Error("`".concat(e,"` did not return a node"));return r}},{key:"getReturnFocusNode",value:function(){var e=this.getNodeForOption("setReturnFocus");return e||this.previouslyFocusedElement}},{key:"updatePreviousElement",value:function(){var e=this.getDocument();e&&(this.previouslyFocusedElement=e.activeElement)}},{key:"deactivateTrap",value:function(){var e=this,t=this.tailoredFocusTrapOptions,n=t.checkCanReturnFocus,r=t.preventScroll,s=void 0!==r&&r;this.focusTrap&&this.focusTrap.deactivate({returnFocus:!1});var a=function(){var t=e.getReturnFocusNode();(null===t||void 0===t?void 0:t.focus)&&e.returnFocusOnDeactivate&&t.focus({preventScroll:s}),e.onPostDeactivate&&e.onPostDeactivate.call(null)};n?n(this.getReturnFocusNode()).then(a,a):a()}},{key:"setupFocusTrap",value:function(){if(!this.focusTrap){var e=this.focusTrapElements.map(l.findDOMNode);e.some(Boolean)&&(this.focusTrap=this.props._createFocusTrap(e,this.tailoredFocusTrapOptions),this.props.active&&this.focusTrap.activate(),this.props.paused&&this.focusTrap.pause())}}},{key:"componentDidMount",value:function(){this.props.active&&this.setupFocusTrap()}},{key:"componentDidUpdate",value:function(e){if(this.focusTrap){e.containerElements!==this.props.containerElements&&this.focusTrap.updateContainerElements(this.props.containerElements);var t=!e.active&&this.props.active,n=e.active&&!this.props.active,r=!e.paused&&this.props.paused,s=e.paused&&!this.props.paused;if(t&&(this.updatePreviousElement(),this.focusTrap.activate()),n)return void this.deactivateTrap();r&&this.focusTrap.pause(),s&&this.focusTrap.unpause()}else e.containerElements!==this.props.containerElements&&(this.focusTrapElements=this.props.containerElements),this.props.active&&(this.updatePreviousElement(),this.setupFocusTrap())}},{key:"componentWillUnmount",value:function(){this.deactivateTrap()}},{key:"render",value:function(){var e=this,t=this.props.children?c.Children.only(this.props.children):void 0;if(t){if(t.type&&t.type===c.Fragment)throw new Error("A focus-trap cannot use a Fragment as its child container. Try replacing it with a <div> element.");return c.cloneElement(t,{ref:function(n){var r=e.props.containerElements;t&&("function"===typeof t.ref?t.ref(n):t.ref&&(t.ref.current=n)),e.focusTrapElements=r||[n]}})}return null}}])&&s(t.prototype,n),r&&s(t,r),Object.defineProperty(t,"prototype",{writable:!1}),u}(c.Component),h="undefined"===typeof Element?Function:Element;d.propTypes={active:u.bool,paused:u.bool,focusTrapOptions:u.shape({document:u.object,onActivate:u.func,onPostActivate:u.func,checkCanFocusTrap:u.func,onDeactivate:u.func,onPostDeactivate:u.func,checkCanReturnFocus:u.func,initialFocus:u.oneOfType([u.instanceOf(h),u.string,u.func,u.bool]),fallbackFocus:u.oneOfType([u.instanceOf(h),u.string,u.func]),escapeDeactivates:u.oneOfType([u.bool,u.func]),clickOutsideDeactivates:u.oneOfType([u.bool,u.func]),returnFocusOnDeactivate:u.bool,setReturnFocus:u.oneOfType([u.instanceOf(h),u.string,u.func]),allowOutsideClick:u.oneOfType([u.bool,u.func]),preventScroll:u.bool}),containerElements:u.arrayOf(u.instanceOf(h)),children:u.oneOfType([u.element,u.instanceOf(h)])},d.defaultProps={active:!0,paused:!1,focusTrapOptions:{},_createFocusTrap:p},e.exports=d},4291:function(e,t,n){"use strict";n.r(t),n.d(t,{createFocusTrap:function(){return O}});var r=["input","select","textarea","a[href]","button","[tabindex]","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable="false"])',"details>summary:first-of-type","details"],s=r.join(","),a="undefined"===typeof Element?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,o=function(e,t,n){var r=Array.prototype.slice.apply(e.querySelectorAll(s));return t&&a.call(e,s)&&r.unshift(e),r=r.filter(n)},i=function(e){var t=parseInt(e.getAttribute("tabindex"),10);return isNaN(t)?function(e){return"true"===e.contentEditable}(e)?0:"AUDIO"!==e.nodeName&&"VIDEO"!==e.nodeName&&"DETAILS"!==e.nodeName||null!==e.getAttribute("tabindex")?e.tabIndex:0:t},c=function(e,t){return e.tabIndex===t.tabIndex?e.documentOrder-t.documentOrder:e.tabIndex-t.tabIndex},l=function(e){return"INPUT"===e.tagName},u=function(e){return function(e){return l(e)&&"radio"===e.type}(e)&&!function(e){if(!e.name)return!0;var t,n=e.form||e.ownerDocument,r=function(e){return n.querySelectorAll('input[type="radio"][name="'+e+'"]')};if("undefined"!==typeof window&&"undefined"!==typeof window.CSS&&"function"===typeof window.CSS.escape)t=r(window.CSS.escape(e.name));else try{t=r(e.name)}catch(e){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",e.message),!1}var s=function(e,t){for(var n=0;n<e.length;n++)if(e[n].checked&&e[n].form===t)return e[n]}(t,e.form);return!s||s===e}(e)},p=function(e,t){return!(t.disabled||function(e){return l(e)&&"hidden"===e.type}(t)||function(e,t){if("hidden"===getComputedStyle(e).visibility)return!0;var n=a.call(e,"details>summary:first-of-type")?e.parentElement:e;if(a.call(n,"details:not([open]) *"))return!0;if(t&&"full"!==t){if("non-zero-area"===t){var r=e.getBoundingClientRect(),s=r.width,o=r.height;return 0===s&&0===o}}else for(;e;){if("none"===getComputedStyle(e).display)return!0;e=e.parentElement}return!1}(t,e.displayCheck)||function(e){return"DETAILS"===e.tagName&&Array.prototype.slice.apply(e.children).some((function(e){return"SUMMARY"===e.tagName}))}(t)||function(e){if(l(e)||"SELECT"===e.tagName||"TEXTAREA"===e.tagName||"BUTTON"===e.tagName)for(var t=e.parentElement;t;){if("FIELDSET"===t.tagName&&t.disabled){for(var n=0;n<t.children.length;n++){var r=t.children.item(n);if("LEGEND"===r.tagName)return!r.contains(e)}return!0}t=t.parentElement}return!1}(t))},d=function(e,t){return!(!p(e,t)||u(t)||i(t)<0)},h=function(e,t){if(t=t||{},!e)throw new Error("No node provided");return!1!==a.call(e,s)&&d(t,e)},f=r.concat("iframe").join(","),m=function(e,t){if(t=t||{},!e)throw new Error("No node provided");return!1!==a.call(e,f)&&p(t,e)};function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function g(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var b=function(){var e=[];return{activateTrap:function(t){if(e.length>0){var n=e[e.length-1];n!==t&&n.pause()}var r=e.indexOf(t);-1===r||e.splice(r,1),e.push(t)},deactivateTrap:function(t){var n=e.indexOf(t);-1!==n&&e.splice(n,1),e.length>0&&e[e.length-1].unpause()}}}(),y=function(e){return setTimeout(e,0)},x=function(e,t){var n=-1;return e.every((function(e,r){return!t(e)||(n=r,!1)})),n},_=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return"function"===typeof e?e.apply(void 0,n):e},w=function(e){return e.target.shadowRoot&&"function"===typeof e.composedPath?e.composedPath()[0]:e.target},O=function(e,t){var n,r=(null===t||void 0===t?void 0:t.document)||document,s=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(Object(n),!0).forEach((function(t){g(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({returnFocusOnDeactivate:!0,escapeDeactivates:!0,delayInitialFocus:!0},t),a={containers:[],tabbableGroups:[],nodeFocusedBeforeActivation:null,mostRecentlyFocusedNode:null,active:!1,paused:!1,delayInitialFocusTimer:void 0},l=function(e,t,n){return e&&void 0!==e[t]?e[t]:s[n||t]},u=function(e){return!(!e||!a.containers.some((function(t){return t.contains(e)})))},f=function(e){var t=s[e];if("function"===typeof t){for(var n=arguments.length,a=new Array(n>1?n-1:0),o=1;o<n;o++)a[o-1]=arguments[o];t=t.apply(void 0,a)}if(!t){if(void 0===t||!1===t)return t;throw new Error("`".concat(e,"` was specified but was not a node, or did not return a node"))}var i=t;if("string"===typeof t&&!(i=r.querySelector(t)))throw new Error("`".concat(e,"` as selector refers to no known node"));return i},O=function(){var e=f("initialFocus");if(!1===e)return!1;if(void 0===e)if(u(r.activeElement))e=r.activeElement;else{var t=a.tabbableGroups[0];e=t&&t.firstTabbableNode||f("fallbackFocus")}if(!e)throw new Error("Your focus-trap needs to have at least one focusable element");return e},E=function(){if(a.tabbableGroups=a.containers.map((function(e){var t,n=function(e,t){var n=[],r=[];return o(e,(t=t||{}).includeContainer,d.bind(null,t)).forEach((function(e,t){var s=i(e);0===s?n.push(e):r.push({documentOrder:t,tabIndex:s,node:e})})),r.sort(c).map((function(e){return e.node})).concat(n)}(e),r=o(e,(t=t||{}).includeContainer,p.bind(null,t));if(n.length>0)return{container:e,firstTabbableNode:n[0],lastTabbableNode:n[n.length-1],nextTabbableNode:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=r.findIndex((function(t){return t===e}));return t?r.slice(n+1).find((function(e){return h(e)})):r.slice(0,n).reverse().find((function(e){return h(e)}))}}})).filter((function(e){return!!e})),a.tabbableGroups.length<=0&&!f("fallbackFocus"))throw new Error("Your focus-trap must have at least one container with at least one tabbable node in it at all times")},T=function e(t){!1!==t&&t!==r.activeElement&&(t&&t.focus?(t.focus({preventScroll:!!s.preventScroll}),a.mostRecentlyFocusedNode=t,function(e){return e.tagName&&"input"===e.tagName.toLowerCase()&&"function"===typeof e.select}(t)&&t.select()):e(O()))},S=function(e){var t=f("setReturnFocus",e);return t||!1!==t&&e},k=function(e){var t=w(e);u(t)||(_(s.clickOutsideDeactivates,e)?n.deactivate({returnFocus:s.returnFocusOnDeactivate&&!m(t)}):_(s.allowOutsideClick,e)||e.preventDefault())},j=function(e){var t=w(e),n=u(t);n||t instanceof Document?n&&(a.mostRecentlyFocusedNode=t):(e.stopImmediatePropagation(),T(a.mostRecentlyFocusedNode||O()))},C=function(e){if(function(e){return"Escape"===e.key||"Esc"===e.key||27===e.keyCode}(e)&&!1!==_(s.escapeDeactivates,e))return e.preventDefault(),void n.deactivate();(function(e){return"Tab"===e.key||9===e.keyCode})(e)&&function(e){var t=w(e);E();var n=null;if(a.tabbableGroups.length>0){var r=x(a.tabbableGroups,(function(e){return e.container.contains(t)})),s=r>=0?a.tabbableGroups[r]:void 0;if(r<0)n=e.shiftKey?a.tabbableGroups[a.tabbableGroups.length-1].lastTabbableNode:a.tabbableGroups[0].firstTabbableNode;else if(e.shiftKey){var o=x(a.tabbableGroups,(function(e){var n=e.firstTabbableNode;return t===n}));if(o<0&&(s.container===t||m(t)&&!h(t)&&!s.nextTabbableNode(t,!1))&&(o=r),o>=0){var i=0===o?a.tabbableGroups.length-1:o-1;n=a.tabbableGroups[i].lastTabbableNode}}else{var c=x(a.tabbableGroups,(function(e){var n=e.lastTabbableNode;return t===n}));if(c<0&&(s.container===t||m(t)&&!h(t)&&!s.nextTabbableNode(t))&&(c=r),c>=0){var l=c===a.tabbableGroups.length-1?0:c+1;n=a.tabbableGroups[l].firstTabbableNode}}}else n=f("fallbackFocus");n&&(e.preventDefault(),T(n))}(e)},P=function(e){if(!_(s.clickOutsideDeactivates,e)){var t=w(e);u(t)||_(s.allowOutsideClick,e)||(e.preventDefault(),e.stopImmediatePropagation())}},N=function(){if(a.active)return b.activateTrap(n),a.delayInitialFocusTimer=s.delayInitialFocus?y((function(){T(O())})):T(O()),r.addEventListener("focusin",j,!0),r.addEventListener("mousedown",k,{capture:!0,passive:!1}),r.addEventListener("touchstart",k,{capture:!0,passive:!1}),r.addEventListener("click",P,{capture:!0,passive:!1}),r.addEventListener("keydown",C,{capture:!0,passive:!1}),n},R=function(){if(a.active)return r.removeEventListener("focusin",j,!0),r.removeEventListener("mousedown",k,!0),r.removeEventListener("touchstart",k,!0),r.removeEventListener("click",P,!0),r.removeEventListener("keydown",C,!0),n};return(n={activate:function(e){if(a.active)return this;var t=l(e,"onActivate"),n=l(e,"onPostActivate"),s=l(e,"checkCanFocusTrap");s||E(),a.active=!0,a.paused=!1,a.nodeFocusedBeforeActivation=r.activeElement,t&&t();var o=function(){s&&E(),N(),n&&n()};return s?(s(a.containers.concat()).then(o,o),this):(o(),this)},deactivate:function(e){if(!a.active)return this;clearTimeout(a.delayInitialFocusTimer),a.delayInitialFocusTimer=void 0,R(),a.active=!1,a.paused=!1,b.deactivateTrap(n);var t=l(e,"onDeactivate"),r=l(e,"onPostDeactivate"),s=l(e,"checkCanReturnFocus");t&&t();var o=l(e,"returnFocus","returnFocusOnDeactivate"),i=function(){y((function(){o&&T(S(a.nodeFocusedBeforeActivation)),r&&r()}))};return o&&s?(s(S(a.nodeFocusedBeforeActivation)).then(i,i),this):(i(),this)},pause:function(){return a.paused||!a.active||(a.paused=!0,R()),this},unpause:function(){return a.paused&&a.active?(a.paused=!1,E(),N(),this):this},updateContainerElements:function(e){var t=[].concat(e).filter(Boolean);return a.containers=t.map((function(e){return"string"===typeof e?r.querySelector(e):e})),a.active&&E(),this}}).updateContainerElements(e),n}},2703:function(e,t,n){"use strict";var r=n(414);function s(){}function a(){}a.resetWarningCache=s,e.exports=function(){function e(e,t,n,s,a,o){if(o!==r){var i=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw i.name="Invariant Violation",i}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:a,resetWarningCache:s};return n.PropTypes=n,n}},5697:function(e,t,n){e.exports=n(2703)()},414:function(e){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},5251:function(e,t,n){"use strict";var r=n(9196),s=60103;if(t.Fragment=60107,"function"===typeof Symbol&&Symbol.for){var a=Symbol.for;s=a("react.element"),t.Fragment=a("react.fragment")}var o=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,i=Object.prototype.hasOwnProperty,c={key:!0,ref:!0,__self:!0,__source:!0};function l(e,t,n){var r,a={},l=null,u=null;for(r in void 0!==n&&(l=""+n),void 0!==t.key&&(l=""+t.key),void 0!==t.ref&&(u=t.ref),t)i.call(t,r)&&!c.hasOwnProperty(r)&&(a[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===a[r]&&(a[r]=t[r]);return{$$typeof:s,type:e,key:l,ref:u,props:a,_owner:o.current}}t.jsx=l,t.jsxs=l},5893:function(e,t,n){"use strict";e.exports=n(5251)},9196:function(e){"use strict";e.exports=window.React},1850:function(e){"use strict";e.exports=window.ReactDOM}},t={};function n(r){var s=t[r];if(void 0!==s)return s.exports;var a=t[r]={exports:{}};return e[r](a,a.exports,n),a.exports}n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},function(){"use strict";var e=window.wp.element,t=window.wp.i18n,r=window.wp.hooks;var s={randomUUID:"undefined"!==typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};let a;const o=new Uint8Array(16);function i(){if(!a&&(a="undefined"!==typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!a))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return a(o)}const c=[];for(let e=0;e<256;++e)c.push((e+256).toString(16).slice(1));function l(e,t=0){return c[e[t+0]]+c[e[t+1]]+c[e[t+2]]+c[e[t+3]]+"-"+c[e[t+4]]+c[e[t+5]]+"-"+c[e[t+6]]+c[e[t+7]]+"-"+c[e[t+8]]+c[e[t+9]]+"-"+c[e[t+10]]+c[e[t+11]]+c[e[t+12]]+c[e[t+13]]+c[e[t+14]]+c[e[t+15]]}var u=function(e,t,n){if(s.randomUUID&&!t&&!e)return s.randomUUID();const r=(e=e||{}).random||(e.rng||i)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,t){n=n||0;for(let e=0;e<16;++e)t[n+e]=r[e];return t}return l(r)};const p=(n,s,a,o,i="")=>{const c=(0,e.useRef)(new AbortController),l=(0,e.useRef)(null),p=(0,e.useRef)(o);return(0,e.useCallback)((async e=>{const o=`${n}${s}?${e.toString()}`;c.current.abort(),c.current=new AbortController;const d={Accept:"application/json",Authorization:a},h=(e=>{const t=u().replaceAll("-","");return(0,r.applyFilters)("ep.requestId",e+t)})(i);return h&&(d["X-ElasticPress-Request-ID"]=h),l.current=fetch(o,{signal:c.current.signal,headers:d}).then((e=>{if(!e.ok){if(401===e.status&&p.current)return p.current(),"";throw new Error((0,t.sprintf)((0,t.__)("HTTP %d.","elasticpress"),e.status))}return e.json()})).catch((e=>{if("AbortError"!==e?.name)throw e})).finally((()=>{l.current=null})),l.current}),[n,s,a,i])},d=(e,t,n="")=>{const r=new URLSearchParams;return Object.entries(t).forEach((([t,s])=>{const a=n+t,o="undefined"!==typeof e[t]?((e,t,n=!0)=>{let r=null;switch(e&&t.type){case"number":case"string":r=e;break;case"numbers":case"strings":r=e.join(",")}return t.allowedValues&&(r=t.allowedValues.includes(r)?r:null),n&&null===r&&"undefined"!==typeof t.default&&(r=t.default),r})(e[t],s):null;null!==o&&r.set(a,o)})),r},h=(e,t="")=>{const n=new URLSearchParams(window.location.search);return Object.entries(e).reduce(((e,[r,s])=>{const a=n.get(t+r),o="undefined"!==typeof a?((e,t,n=!0)=>{let r=null;switch(e&&t.type){case"number":r=parseFloat(e,10)||null;break;case"numbers":r=decodeURIComponent(e).split(",").map((e=>parseFloat(e,10))).filter(Boolean);break;case"string":r=e.toString();break;case"strings":r=decodeURIComponent(e).split(",").map((e=>e.toString().trim()))}return t.allowedValues&&(r=t.allowedValues.includes(r)?r:null),n&&null===r&&"undefined"!==typeof t.default&&(r=t.default),r})(a,s,!1):null;return null!==o&&(e[r]=o),e}),{})},f=(e,t)=>{const n=new URL(window.location.href),r=Array.from(n.searchParams.keys());for(const t of r)t.startsWith(e)&&n.searchParams.delete(t);return t&&t.forEach(((e,t)=>{n.searchParams.set(t,e)})),n.toString()},m=(e,t)=>{const n={...e};return Object.entries(t).forEach((([e,t])=>{Object.hasOwnProperty.call(t,"default")||delete n[e]})),n};var v=(e,t)=>{const n={...e,isPoppingState:!1};switch(t.type){case"CLEAR_CONSTRAINTS":{const e=m(n.args,n.argsSchema);n.args=e,n.args.offset=0;break}case"CLEAR_RESULTS":n.aggregations={},n.searchResults=[],n.totalResults=0;break;case"SEARCH":n.args={...n.args,...t.args,offset:0},n.isOn=!0;break;case"SEARCH_FOR":{const e=m(n.args,n.argsSchema);n.args=e,n.args.search=t.searchTerm,n.args.offset=0,n.isOn=!0;break}case"SET_IS_LOADING":n.isLoading=t.isLoading;break;case"TURN_OFF":n.args={...n.args},n.isOn=!1;break;case"SET_RESULTS":{const{hits:{hits:e,total:r},aggregations:s,suggest:a}=t.response;n.isFirstSearch=!1;const o="number"===typeof r?r:r.value;n.aggregations=s,n.searchResults=e,n.searchTerm=n.args.search,n.totalResults=o,n.suggestedTerms=a?.ep_suggestion?.[0]?.options||[];break}case"NEXT_PAGE":n.args.offset+=n.args.per_page;break;case"PREVIOUS_PAGE":n.args.offset=Math.max(n.args.offset-n.args.per_page,0);break;case"POP_STATE":{const{isOn:e,args:r}=t.args;n.args=r,n.isOn=e,n.isPoppingState=!0;break}}return n},g=n(5893);const b=(0,e.createContext)(),y=({apiEndpoint:n,apiHost:r,authorization:s,requestIdBase:a,argsSchema:o,children:i,paramPrefix:c,onAuthError:l})=>{const u=(0,e.useMemo)((()=>c?h(o,c):{}),[o,c]),m=(0,e.useMemo)((()=>{const e=(e=>Object.entries(e).reduce(((e,[t,n])=>(Object.hasOwnProperty.call(n,"default")&&(e[t]=n.default),e)),{}))(o);return{...e,...u}}),[o,u]),y=(0,e.useMemo)((()=>Object.keys(u).length>0),[u]),x=p(r,n,s,l,a),[_,w]=(0,e.useReducer)(v,{aggregations:{},args:m,argsSchema:o,isLoading:!1,isOn:y,isPoppingState:!1,searchResults:[],totalResults:0,suggestedTerms:[],isFirstSearch:!0,searchTerm:""}),O=(0,e.useRef)(_);O.current=_;const E=(0,e.useCallback)((()=>{w({type:"CLEAR_CONSTRAINTS"})}),[]),T=(0,e.useCallback)((()=>{w({type:"CLEAR_RESULTS"})}),[]),S=(0,e.useCallback)((e=>{w({type:"SEARCH",args:e})}),[]),k=e=>{w({type:"SET_IS_LOADING",isLoading:e})},j=e=>{w({type:"SET_RESULTS",response:e})},C=(0,e.useCallback)((()=>{if("undefined"===typeof c)return;const{args:e,isOn:t}=O.current,n={args:e,isOn:t};if(window.history.state)if(t){const t=d(e,o,c),r=f(c,t);window.history.pushState(n,document.title,r)}else{const e=f(c);window.history.pushState(n,document.title,e)}else window.history.replaceState(n,document.title,window.location.href)}),[o,c]),P=(0,e.useCallback)((e=>{if("undefined"===typeof c)return;e.state&&Object.keys(e.state).length>0&&(e=>{w({type:"POP_STATE",args:e})})(e.state)}),[c]),N=(0,e.useCallback)((()=>(window.addEventListener("popstate",P),()=>{window.removeEventListener("popstate",P)})),[P]),R=(0,e.useCallback)((()=>{(async()=>{const{args:e,isOn:n,isPoppingState:r}=O.current;if(r||C(),!n)return;const s=d(e,o);k(!0);try{const e=await x(s);if(!e)return;j(e)}catch(e){const n=(0,t.sprintf)((0,t.__)("ElasticPress: Unable to fetch results. %s","elasticpress"),e.message);console.error(n)}k(!1)})()}),[o,x,C]);(0,e.useEffect)(N,[N]),(0,e.useEffect)(R,[R,_.args,_.args.orderby,_.args.order,_.args.offset,_.args.search]);const{aggregations:F,args:D,isLoading:M,isOn:L,searchResults:I,searchTerm:A,totalResults:U,suggestedTerms:B,isFirstSearch:z}=O.current,K={aggregations:F,args:D,clearConstraints:E,clearResults:T,getUrlParamsFromArgs:d,getUrlWithParams:f,isLoading:M,isOn:L,searchResults:I,searchTerm:A,search:S,searchFor:e=>{w({type:"SEARCH_FOR",searchTerm:e})},setResults:j,nextPage:()=>{w({type:"NEXT_PAGE"})},previousPage:()=>{w({type:"PREVIOUS_PAGE"})},totalResults:U,turnOff:()=>{w({type:"TURN_OFF"})},suggestedTerms:B,isFirstSearch:z};return(0,g.jsx)(b.Provider,{value:K,children:i})},x=()=>(0,e.useContext)(b),{apiEndpoint:_,apiHost:w,argsSchema:O,currencyCode:E,facets:T,isWooCommerce:S,locale:k,matchType:j,paramPrefix:C,postTypeLabels:P,taxonomyLabels:N,termCount:R,requestIdBase:F,showSuggestions:D,suggestionsBehavior:M}=window.epInstantResults,L={relevance_desc:{name:(0,t.__)("Most relevant","elasticpress"),orderby:"relevance",order:"desc",currencyCode:E},date_desc:{name:(0,t.__)("Date, newest to oldest","elasticpress"),orderby:"date",order:"desc"},date_asc:{name:(0,t.__)("Date, oldest to newest","elasticpress"),orderby:"date",order:"asc"}};S&&(L.price_desc={name:(0,t.__)("Price, highest to lowest","elasticpress"),orderby:"price",order:"desc"},L.price_asc={name:(0,t.__)("Price, lowest to highest","elasticpress"),orderby:"price",order:"asc"});const I=(e,t)=>new Intl.NumberFormat(navigator.language,{style:"currency",currencyDisplay:"narrowSymbol",...t}).format(e);var A=n(4483),U=n.n(A);var B=(0,e.forwardRef)((function({icon:t,size:n=24,...r},s){return(0,e.cloneElement)(t,{width:n,height:n,...r,ref:s})})),z=n(9196),K=window.wp.primitives;var V=(0,z.createElement)(K.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,z.createElement)(K.Path,{d:"M12 13.06l3.712 3.713 1.061-1.06L13.061 12l3.712-3.712-1.06-1.06L12 10.938 8.288 7.227l-1.061 1.06L10.939 12l-3.712 3.712 1.06 1.061L12 13.061z"})),G=({children:n,isOpen:r,onClose:s,...a})=>{const o=(0,e.useRef)(null),i=(0,e.useCallback)((e=>{"Escape"!==e.key&&"Esc"!==e.key||s()}),[s]);return(0,e.useEffect)((()=>(document.body.addEventListener("keydown",i),()=>{document.body.removeEventListener("keydown",i)})),[i]),(0,e.useEffect)((()=>{r?(document.body.classList.add("has-ep-search-modal"),o.current.focus()):document.body.classList.remove("has-ep-search-modal")}),[r]),(0,g.jsx)("div",{"aria-hidden":!r,"aria-modal":"true",className:"ep-search-modal",role:"dialog",...a,children:r&&(0,g.jsx)(U(),{focusTrapOptions:{allowOutsideClick:!0},children:(0,g.jsxs)("div",{className:"ep-search-modal__content",children:[(0,g.jsxs)("button",{className:"ep-search-modal__close ep-search-reset-button ep-search-icon-button",type:"button",onClick:s,ref:o,children:[(0,g.jsx)(B,{icon:V}),(0,t.__)("Close","elasticpress")]}),n]})})})},$=({count:e,disabled:t,id:n,label:r,onChange:s,...a})=>(0,g.jsxs)("div",{className:"ep-search-checkbox",children:[(0,g.jsx)("input",{"aria-disabled":t,className:"ep-search-checkbox__input",id:n,onChange:e=>{t||s(e)},type:"checkbox",...a})," ",(0,g.jsxs)("label",{className:"ep-search-checkbox__label",htmlFor:n,children:[r," ",e&&(0,g.jsx)("span",{className:"ep-search-checkbox__count",children:e})]})]}),H=({children:e,className:t,...n})=>(0,g.jsx)("button",{className:`ep-search-small-button ${t}`,type:"button",...n,children:e}),q=({disabled:n,label:r,locale:s,options:a,onChange:o,selected:i,sortBy:c})=>{const l=(0,e.useRef)(null),[u,p]=(0,e.useState)(!1),d=a.reduce(((e,{parent:t,...n})=>(0!=t&&(e[t]=e[t]||[],e[t].push(n)),e)),{}),h=a.reduce(((e,{parent:t,...n})=>(0!=t&&"0"!==t||e.push(n),e)),[]),f=a.length>8?5:8;let m=0;const v=e=>{const{checked:t,value:n}=e.target;let r=t?[...i,n]:i.filter((e=>e!==n));r=r.filter((e=>a.some((t=>t.value===e)))),o(r)},b=({count:t,id:r,label:s,value:a})=>{const o=d[a],c="1"===R?t:"";if(!u&&m>=f)return(0,g.jsx)(e.Fragment,{},a);const l=(0,g.jsxs)("li",{className:"ep-search-options-list__item",children:[(0,g.jsx)($,{checked:i.includes(a),count:c,disabled:n,id:r,label:s,onChange:v,value:a}),o&&(u||m<f)&&(0,g.jsx)("ul",{className:"ep-search-options-list ep-search-options-list__sub-menu",children:x(o)})]},a);return m++,l},y=(e,t)=>{let n=0;return"count"===c&&(n=t.count-e.count),"name"!==c&&0!==n||(n=e.label.localeCompare(t.label,s)),n},x=e=>e.splice(0).sort(y).map(b);return(0,g.jsxs)(g.Fragment,{children:[a.length>0&&(0,g.jsxs)("ul",{"aria-label":r,className:"ep-search-options-list",ref:l,tabIndex:"-1",children:[x(h),Object.values(d).map(x)]}),a.length>f&&(0,g.jsx)(H,{"aria-expanded":u,disabled:n,onClick:()=>{p(!u),l.current.focus()},children:u?(0,t.__)("Show fewer options","elasticpress"):(0,t.sprintf)((0,t._n)("Show %d more option","Show %d more options",a.length-f,"elasticpress"),a.length-f)})]})};var W=(0,z.createElement)(K.SVG,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},(0,z.createElement)(K.Path,{d:"M6.5 12.4L12 8l5.5 4.4-.9 1.2L12 10l-4.5 3.6-1-1.2z"}));var X=(0,z.createElement)(K.SVG,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},(0,z.createElement)(K.Path,{d:"M17.5 11.6L12 16l-5.5-4.4.9-1.2L12 14l4.5-3.6 1 1.2z"})),Y=({children:t,defaultIsOpen:n,label:r})=>{const[s,a]=(0,e.useState)(n);return(0,g.jsxs)("div",{className:"ep-search-panel",children:[(0,g.jsx)("h3",{className:"ep-search-panel__heading",children:(0,g.jsxs)("button",{"aria-expanded":s,className:"ep-search-panel__button ep-search-reset-button ep-search-icon-button",onClick:()=>{a(!s)},type:"button",children:[r,(0,g.jsx)(B,{icon:s?W:X})]})}),(0,g.jsx)("div",{"aria-hidden":!s,className:"ep-search-panel__content",children:t(s)})]})};const J=(0,e.createRef)(),Q=({label:n,onClick:r})=>J.current?(0,e.createPortal)((0,g.jsxs)(H,{"aria-label":(0,t.sprintf)((0,t.__)("Remove filter: %s","elasticpress"),n),className:"ep-search-icon-button",onClick:r,children:[(0,g.jsx)(B,{icon:V}),n]}),J.current):null;var Z=()=>(0,g.jsx)("div",{className:"ep-search-tokens",ref:J}),ee=({defaultIsOpen:n,label:r})=>{const{aggregations:{post_type:{post_type:{buckets:s=[]}={}}={}},args:{post_type:a=[]},isLoading:o,search:i}=x(),c=(0,e.useCallback)(((e,{doc_count:t,key:n},r)=>Object.prototype.hasOwnProperty.call(P,n)?(e.push({checked:a.includes(n),count:t,id:`ep-search-post-type-${n}`,label:P[n].singular,order:r,value:n}),e):e),[a]),l=(0,e.useMemo)((()=>s.reduce(c,[])),[s,c]),u=e=>{i({post_type:e})};return l.length>0&&(0,g.jsx)(Y,{defaultIsOpen:n,label:r,children:()=>(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(q,{disabled:o,label:(0,t.__)("Select content type","elasticpress"),options:l,onChange:u,selected:a}),a.map((e=>(0,g.jsx)(Q,{label:P[e].singular,onClick:()=>(e=>{const t=[...a],n=t.indexOf(e);t.splice(n,1),i({post_type:t})})(e)},e)))]})})};function te(e,t){return te=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},te(e,t)}function ne(e){return e&&e.stopPropagation&&e.stopPropagation(),e&&e.preventDefault&&e.preventDefault(),!1}function re(e){return null==e?[]:Array.isArray(e)?e.slice():[e]}function se(e){return null!==e&&1===e.length?e[0]:e.slice()}function ae(e){Object.keys(e).forEach((t=>{"undefined"!=typeof document&&document.addEventListener(t,e[t],!1)}))}function oe(e,t){return ie(function(e,t){let n=e;return n<=t.min&&(n=t.min),n>=t.max&&(n=t.max),n}(e,t),t)}function ie(e,t){const n=(e-t.min)%t.step;let r=e-n;return 2*Math.abs(n)>=t.step&&(r+=n>0?t.step:-t.step),parseFloat(r.toFixed(5))}let ce=function(e){function t(t){var n;(n=e.call(this,t)||this).onKeyUp=()=>{n.onEnd()},n.onMouseUp=()=>{n.onEnd(n.getMouseEventMap())},n.onTouchEnd=e=>{e.preventDefault(),n.onEnd(n.getTouchEventMap())},n.onBlur=()=>{n.setState({index:-1},n.onEnd(n.getKeyDownEventMap()))},n.onMouseMove=e=>{n.setState({pending:!0});const t=n.getMousePosition(e),r=n.getDiffPosition(t[0]),s=n.getValueFromPosition(r);n.move(s)},n.onTouchMove=e=>{if(e.touches.length>1)return;n.setState({pending:!0});const t=n.getTouchPosition(e);if(void 0===n.isScrolling){const e=t[0]-n.startPosition[0],r=t[1]-n.startPosition[1];n.isScrolling=Math.abs(r)>Math.abs(e)}if(n.isScrolling)return void n.setState({index:-1});const r=n.getDiffPosition(t[0]),s=n.getValueFromPosition(r);n.move(s)},n.onKeyDown=e=>{if(!(e.ctrlKey||e.shiftKey||e.altKey||e.metaKey))switch(n.setState({pending:!0}),e.key){case"ArrowLeft":case"ArrowDown":case"Left":case"Down":e.preventDefault(),n.moveDownByStep();break;case"ArrowRight":case"ArrowUp":case"Right":case"Up":e.preventDefault(),n.moveUpByStep();break;case"Home":e.preventDefault(),n.move(n.props.min);break;case"End":e.preventDefault(),n.move(n.props.max);break;case"PageDown":e.preventDefault(),n.moveDownByStep(n.props.pageFn(n.props.step));break;case"PageUp":e.preventDefault(),n.moveUpByStep(n.props.pageFn(n.props.step))}},n.onSliderMouseDown=e=>{if(!n.props.disabled&&2!==e.button){if(n.setState({pending:!0}),!n.props.snapDragDisabled){const t=n.getMousePosition(e);n.forceValueFromPosition(t[0],(e=>{n.start(e,t[0]),ae(n.getMouseEventMap())}))}ne(e)}},n.onSliderClick=e=>{if(!n.props.disabled&&n.props.onSliderClick&&!n.hasMoved){const t=n.getMousePosition(e),r=oe(n.calcValue(n.calcOffsetFromPosition(t[0])),n.props);n.props.onSliderClick(r)}},n.createOnKeyDown=e=>t=>{n.props.disabled||(n.start(e),ae(n.getKeyDownEventMap()),ne(t))},n.createOnMouseDown=e=>t=>{if(n.props.disabled||2===t.button)return;n.setState({pending:!0});const r=n.getMousePosition(t);n.start(e,r[0]),ae(n.getMouseEventMap()),ne(t)},n.createOnTouchStart=e=>t=>{if(n.props.disabled||t.touches.length>1)return;n.setState({pending:!0});const r=n.getTouchPosition(t);n.startPosition=r,n.isScrolling=void 0,n.start(e,r[0]),ae(n.getTouchEventMap()),function(e){e.stopPropagation&&e.stopPropagation()}(t)},n.handleResize=()=>{const e=window.setTimeout((()=>{n.pendingResizeTimeouts.shift(),n.resize()}),0);n.pendingResizeTimeouts.push(e)},n.renderThumb=(e,t)=>{const r=n.props.thumbClassName+" "+n.props.thumbClassName+"-"+t+" "+(n.state.index===t?n.props.thumbActiveClassName:""),s={ref:e=>{n["thumb"+t]=e},key:n.props.thumbClassName+"-"+t,className:r,style:e,onMouseDown:n.createOnMouseDown(t),onTouchStart:n.createOnTouchStart(t),onFocus:n.createOnKeyDown(t),tabIndex:0,role:"slider","aria-orientation":n.props.orientation,"aria-valuenow":n.state.value[t],"aria-valuemin":n.props.min,"aria-valuemax":n.props.max,"aria-label":Array.isArray(n.props.ariaLabel)?n.props.ariaLabel[t]:n.props.ariaLabel,"aria-labelledby":Array.isArray(n.props.ariaLabelledby)?n.props.ariaLabelledby[t]:n.props.ariaLabelledby,"aria-disabled":n.props.disabled},a={index:t,value:se(n.state.value),valueNow:n.state.value[t]};return n.props.ariaValuetext&&(s["aria-valuetext"]="string"==typeof n.props.ariaValuetext?n.props.ariaValuetext:n.props.ariaValuetext(a)),n.props.renderThumb(s,a)},n.renderTrack=(e,t,r)=>{const s={key:n.props.trackClassName+"-"+e,className:n.props.trackClassName+" "+n.props.trackClassName+"-"+e,style:n.buildTrackStyle(t,n.state.upperBound-r)},a={index:e,value:se(n.state.value)};return n.props.renderTrack(s,a)};let r=re(t.value);r.length||(r=re(t.defaultValue)),n.pendingResizeTimeouts=[];const s=[];for(let e=0;e<r.length;e+=1)r[e]=oe(r[e],t),s.push(e);return n.resizeObserver=null,n.resizeElementRef=z.createRef(),n.state={index:-1,upperBound:0,sliderLength:0,value:r,zIndices:s},n}var n,r;r=e,(n=t).prototype=Object.create(r.prototype),n.prototype.constructor=n,te(n,r);var s=t.prototype;return s.componentDidMount=function(){"undefined"!=typeof window&&(this.resizeObserver=new ResizeObserver(this.handleResize),this.resizeObserver.observe(this.resizeElementRef.current),this.resize())},t.getDerivedStateFromProps=function(e,t){const n=re(e.value);return n.length?t.pending?null:{value:n.map((t=>oe(t,e)))}:null},s.componentDidUpdate=function(){0===this.state.upperBound&&this.resize()},s.componentWillUnmount=function(){this.clearPendingResizeTimeouts(),this.resizeObserver&&this.resizeObserver.disconnect()},s.onEnd=function(e){e&&function(e){Object.keys(e).forEach((t=>{"undefined"!=typeof document&&document.removeEventListener(t,e[t],!1)}))}(e),this.hasMoved&&this.fireChangeEvent("onAfterChange"),this.setState({pending:!1}),this.hasMoved=!1},s.getValue=function(){return se(this.state.value)},s.getClosestIndex=function(e){let t=Number.MAX_VALUE,n=-1;const{value:r}=this.state,s=r.length;for(let a=0;a<s;a+=1){const s=this.calcOffset(r[a]),o=Math.abs(e-s);o<t&&(t=o,n=a)}return n},s.getMousePosition=function(e){return[e["page"+this.axisKey()],e["page"+this.orthogonalAxisKey()]]},s.getTouchPosition=function(e){const t=e.touches[0];return[t["page"+this.axisKey()],t["page"+this.orthogonalAxisKey()]]},s.getKeyDownEventMap=function(){return{keydown:this.onKeyDown,keyup:this.onKeyUp,focusout:this.onBlur}},s.getMouseEventMap=function(){return{mousemove:this.onMouseMove,mouseup:this.onMouseUp}},s.getTouchEventMap=function(){return{touchmove:this.onTouchMove,touchend:this.onTouchEnd}},s.getValueFromPosition=function(e){const t=e/(this.state.sliderLength-this.state.thumbSize)*(this.props.max-this.props.min);return oe(this.state.startValue+t,this.props)},s.getDiffPosition=function(e){let t=e-this.state.startPosition;return this.props.invert&&(t*=-1),t},s.resize=function(){const{slider:e,thumb0:t}=this;if(!e||!t)return;const n=this.sizeKey(),r=e.getBoundingClientRect(),s=e[n],a=r[this.posMaxKey()],o=r[this.posMinKey()],i=t.getBoundingClientRect()[n.replace("client","").toLowerCase()],c=s-i,l=Math.abs(a-o);this.state.upperBound===c&&this.state.sliderLength===l&&this.state.thumbSize===i||this.setState({upperBound:c,sliderLength:l,thumbSize:i})},s.calcOffset=function(e){const t=this.props.max-this.props.min;return 0===t?0:(e-this.props.min)/t*this.state.upperBound},s.calcValue=function(e){return e/this.state.upperBound*(this.props.max-this.props.min)+this.props.min},s.calcOffsetFromPosition=function(e){const{slider:t}=this,n=t.getBoundingClientRect(),r=n[this.posMaxKey()],s=n[this.posMinKey()];let a=e-(window["page"+this.axisKey()+"Offset"]+(this.props.invert?r:s));return this.props.invert&&(a=this.state.sliderLength-a),a-=this.state.thumbSize/2,a},s.forceValueFromPosition=function(e,t){const n=this.calcOffsetFromPosition(e),r=this.getClosestIndex(n),s=oe(this.calcValue(n),this.props),a=this.state.value.slice();a[r]=s;for(let e=0;e<a.length-1;e+=1)if(a[e+1]-a[e]<this.props.minDistance)return;this.fireChangeEvent("onBeforeChange"),this.hasMoved=!0,this.setState({value:a},(()=>{t(r),this.fireChangeEvent("onChange")}))},s.clearPendingResizeTimeouts=function(){do{const e=this.pendingResizeTimeouts.shift();clearTimeout(e)}while(this.pendingResizeTimeouts.length)},s.start=function(e,t){const n=this["thumb"+e];n&&n.focus();const{zIndices:r}=this.state;r.splice(r.indexOf(e),1),r.push(e),this.setState((n=>({startValue:n.value[e],startPosition:void 0!==t?t:n.startPosition,index:e,zIndices:r})))},s.moveUpByStep=function(e){void 0===e&&(e=this.props.step);const t=this.state.value[this.state.index],n=oe(this.props.invert&&"horizontal"===this.props.orientation?t-e:t+e,this.props);this.move(Math.min(n,this.props.max))},s.moveDownByStep=function(e){void 0===e&&(e=this.props.step);const t=this.state.value[this.state.index],n=oe(this.props.invert&&"horizontal"===this.props.orientation?t+e:t-e,this.props);this.move(Math.max(n,this.props.min))},s.move=function(e){const t=this.state.value.slice(),{index:n}=this.state,{length:r}=t,s=t[n];if(e===s)return;this.hasMoved||this.fireChangeEvent("onBeforeChange"),this.hasMoved=!0;const{pearling:a,max:o,min:i,minDistance:c}=this.props;if(!a){if(n>0){const r=t[n-1];e<r+c&&(e=r+c)}if(n<r-1){const r=t[n+1];e>r-c&&(e=r-c)}}t[n]=e,a&&r>1&&(e>s?(this.pushSucceeding(t,c,n),function(e,t,n,r){for(let s=0;s<e;s+=1){const a=r-s*n;t[e-1-s]>a&&(t[e-1-s]=a)}}(r,t,c,o)):e<s&&(this.pushPreceding(t,c,n),function(e,t,n,r){for(let s=0;s<e;s+=1){const e=r+s*n;t[s]<e&&(t[s]=e)}}(r,t,c,i))),this.setState({value:t},this.fireChangeEvent.bind(this,"onChange"))},s.pushSucceeding=function(e,t,n){let r,s;for(r=n,s=e[r]+t;null!==e[r+1]&&s>e[r+1];r+=1,s=e[r]+t)e[r+1]=ie(s,this.props)},s.pushPreceding=function(e,t,n){for(let r=n,s=e[r]-t;null!==e[r-1]&&s<e[r-1];r-=1,s=e[r]-t)e[r-1]=ie(s,this.props)},s.axisKey=function(){return"vertical"===this.props.orientation?"Y":"X"},s.orthogonalAxisKey=function(){return"vertical"===this.props.orientation?"X":"Y"},s.posMinKey=function(){return"vertical"===this.props.orientation?this.props.invert?"bottom":"top":this.props.invert?"right":"left"},s.posMaxKey=function(){return"vertical"===this.props.orientation?this.props.invert?"top":"bottom":this.props.invert?"left":"right"},s.sizeKey=function(){return"vertical"===this.props.orientation?"clientHeight":"clientWidth"},s.fireChangeEvent=function(e){this.props[e]&&this.props[e](se(this.state.value),this.state.index)},s.buildThumbStyle=function(e,t){const n={position:"absolute",touchAction:"none",willChange:this.state.index>=0?this.posMinKey():void 0,zIndex:this.state.zIndices.indexOf(t)+1};return n[this.posMinKey()]=e+"px",n},s.buildTrackStyle=function(e,t){const n={position:"absolute",willChange:this.state.index>=0?this.posMinKey()+","+this.posMaxKey():void 0};return n[this.posMinKey()]=e,n[this.posMaxKey()]=t,n},s.buildMarkStyle=function(e){var t;return(t={position:"absolute"})[this.posMinKey()]=e,t},s.renderThumbs=function(e){const{length:t}=e,n=[];for(let r=0;r<t;r+=1)n[r]=this.buildThumbStyle(e[r],r);const r=[];for(let e=0;e<t;e+=1)r[e]=this.renderThumb(n[e],e);return r},s.renderTracks=function(e){const t=[],n=e.length-1;t.push(this.renderTrack(0,0,e[0]));for(let r=0;r<n;r+=1)t.push(this.renderTrack(r+1,e[r],e[r+1]));return t.push(this.renderTrack(n+1,e[n],this.state.upperBound)),t},s.renderMarks=function(){let{marks:e}=this.props;const t=this.props.max-this.props.min+1;return"boolean"==typeof e?e=Array.from({length:t}).map(((e,t)=>t)):"number"==typeof e&&(e=Array.from({length:t}).map(((e,t)=>t)).filter((t=>t%e==0))),e.map(parseFloat).sort(((e,t)=>e-t)).map((e=>{const t=this.calcOffset(e),n={key:e,className:this.props.markClassName,style:this.buildMarkStyle(t)};return this.props.renderMark(n)}))},s.render=function(){const e=[],{value:t}=this.state,n=t.length;for(let r=0;r<n;r+=1)e[r]=this.calcOffset(t[r],r);const r=this.props.withTracks?this.renderTracks(e):null,s=this.renderThumbs(e),a=this.props.marks?this.renderMarks():null;return z.createElement("div",{ref:e=>{this.slider=e,this.resizeElementRef.current=e},style:{position:"relative"},className:this.props.className+(this.props.disabled?" disabled":""),onMouseDown:this.onSliderMouseDown,onClick:this.onSliderClick},r,s,a)},t}(z.Component);ce.displayName="ReactSlider",ce.defaultProps={min:0,max:100,step:1,pageFn:e=>10*e,minDistance:0,defaultValue:0,orientation:"horizontal",className:"slider",thumbClassName:"thumb",thumbActiveClassName:"active",trackClassName:"track",markClassName:"mark",withTracks:!0,pearling:!1,disabled:!1,snapDragDisabled:!1,invert:!1,marks:[],renderThumb:e=>z.createElement("div",e),renderTrack:e=>z.createElement("div",e),renderMark:e=>z.createElement("span",e)};var le=ce,ue=({...e})=>(0,g.jsx)(le,{className:"ep-search-range-slider",minDistance:1,thumbActiveClassName:"ep-search-range-slider__thumb--active",thumbClassName:"ep-search-range-slider__thumb",trackClassName:"ep-search-range-slider__track",...e}),pe=({defaultIsOpen:n,label:r})=>{const{aggregations:{price_range:{max_price:{value:s=null}={},min_price:{value:a=null}={}}={}},args:{max_price:o=null,min_price:i=null},isLoading:c,search:l}=x(),u=Math.ceil(s),p=Math.floor(a),[d,h]=(0,e.useState)(0),[f,m]=(0,e.useState)(0),v=I(d,{maximumFractionDigits:0,currency:E}),b=I(f,{maximumFractionDigits:0,currency:E}),y=o||u,_=i||p,w=I(y,{maximumFractionDigits:0,currency:E}),O=I(_,{maximumFractionDigits:0,currency:E}),T=e=>{const[t,n]=e;l({min_price:t,max_price:n})},S=([e,t])=>{m(e),h(t)},k=()=>{l({max_price:null,min_price:null})};return(0,e.useLayoutEffect)((()=>{const e=Math.min(u,y),t=Math.max(p,_);h(e),m(t)}),[p,u,_,y]),null!==s&&null!==a&&(0,g.jsx)(Y,{defaultIsOpen:n,label:r,children:e=>(0,g.jsxs)(g.Fragment,{children:[(0,g.jsxs)("div",{className:"ep-search-price-facet",children:[(0,g.jsx)("div",{className:"ep-search-price-facet__slider",children:e&&(0,g.jsx)(ue,{disabled:c,max:u,min:p,onAfterChange:T,onChange:S,value:[f,d]})}),(0,g.jsxs)("div",{className:"ep-search-price-facet__values",children:[b," — ",v]})]}),null!==o&&null!==i&&(0,g.jsx)(Q,{label:(0,t.sprintf)((0,t._x)("%1$s — %2$s","Price range","elasticpress"),O,w),onClick:k})]})})},de=window.wp.htmlEntities,he=({defaultIsOpen:n,label:r,postTypes:s,name:a})=>{const{aggregations:{[a]:{[a]:{buckets:o=[]}={}}={}}={},args:{[a]:i=[]},isLoading:c,search:l}=x(),u=(0,e.useMemo)((()=>{const e=T.some((e=>e.label===r&&e.name!==a)),n=s.map((e=>P[e].plural)),o=(0,t.__)(", ","elasticpress");return e?(0,t.sprintf)((0,t.__)("%1$s (%2$s)","elasticpress"),r,n.join(o)):r}),[r,s,a]),p=(0,e.useCallback)(((e,{doc_count:t,key:n})=>{const{name:r,parent:s,term_id:o,term_order:c}=JSON.parse(n);return e.push({checked:i.includes(o),count:t,id:`ep-search-${a}-${o}`,label:(0,de.decodeEntities)(r),parent:s.toString(),order:c,value:o.toString()}),e}),[i,a]),d=(0,e.useMemo)((()=>o.reduce(p,[])),[o,p]),h=(0,e.useCallback)(((e,{label:t,value:n})=>(e[n]=t,e)),[]),f=d.reduce(h,{}),m=e=>{l({[a]:e})};return d.length>0&&(0,g.jsx)(Y,{defaultIsOpen:n,label:u,children:e=>(0,g.jsxs)(g.Fragment,{children:[e&&(0,g.jsx)(q,{disabled:c,label:(0,t.sprintf)((0,t.__)("Select %s","elasticpress"),r),options:d,onChange:m,selected:i}),i.map((e=>f?.[e]&&(0,g.jsx)(Q,{label:f[e],onClick:()=>(e=>{const t=[...i];t.splice(t.indexOf(e),1),l({[a]:t})})(e)},e)))]})})},fe=({index:e,label:t,name:n,postTypes:r,type:s})=>{const a=e<2;switch(s){case"post_type":return(0,g.jsx)(ee,{defaultIsOpen:a,label:t});case"price_range":return(0,g.jsx)(pe,{defaultIsOpen:a,label:t});case"taxonomy":return(0,g.jsx)(he,{defaultIsOpen:a,label:t,name:n,postTypes:r});default:return null}};var me=()=>{const{args:n,searchFor:r,searchTerm:s}=x(),[a,o]=(0,e.useState)(n.search),i=((t,n)=>{const r=(0,e.useRef)(null);return(0,e.useCallback)(((...e)=>{window.clearTimeout(r.current),r.current=window.setTimeout((()=>{t(...e)}),n)}),[t,n])})((e=>{r(e)}),300);return(0,e.useEffect)((()=>{o(n.search)}),[n.search]),(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)("input",{className:"ep-search-input",placeholder:(0,t.__)("Search…","elasticpress"),type:"search",value:a,onChange:e=>{o(e.target.value),i(e.target.value)}}),s&&(0,g.jsx)(Q,{label:(0,t.sprintf)((0,t.__)("“%s”","elasticpress"),s),onClick:()=>{r("")}})]})},ve=({offset:e,onNext:n,onPrevious:r,perPage:s,total:a})=>{const o=(e+s)/s,i=a>e+s,c=e>0,l=Math.ceil(a/s);return(0,g.jsxs)("nav",{className:"ep-search-pagination",children:[(0,g.jsx)("div",{className:"ep-search-pagination__previous",children:(0,g.jsx)("button",{className:"ep-search-pagination-button ep-search-pagination-button--previous",disabled:!c,onClick:r,type:"button",children:(0,t.__)("Previous","elasticpress")})}),(0,g.jsx)("div",{className:"ep-search-pagination__count",role:"status",children:a>0&&(0,t.sprintf)((0,t.__)("Page %1$d of %2$d","elasticpress"),o,l)}),(0,g.jsx)("div",{className:"ep-search-pagination__next",children:(0,g.jsx)("button",{className:"ep-search-pagination-button ep-search-pagination-button--next",disabled:!i,onClick:n,type:"button",children:(0,t.__)("Next","elasticpress")})})]})},ge=({rating:e})=>{const n=(0,t.sprintf)((0,t.__)("Rated %1$f out of %2$d","elasticpress"),e,5);return(0,g.jsx)("div",{className:"woocommerce",children:(0,g.jsx)("div",{"aria-label":n,className:"star-rating",role:"img",children:(0,g.jsx)("span",{style:{width:e/5*100+"%"},children:n})})})},be=({alt:e,height:t,ID:n,src:r,width:s,...a})=>(0,g.jsx)("img",{alt:e,src:r,width:s,height:t,...a});var ye=(0,r.applyFilters)("ep.InstantResults.Result",(({averageRating:e=0,date:t,excerpt:n,priceHtml:r,thumbnail:s,title:a,type:o,url:i})=>(0,g.jsxs)("article",{className:`ep-search-result ${s?"ep-search-result--has-thumbnail":null}`,children:[s&&(0,g.jsx)("a",{className:"ep-search-result__thumbnail",href:i,children:(0,g.jsx)(be,{...s})}),(0,g.jsxs)("header",{className:"ep-search-result__header",children:[o?(0,g.jsx)("span",{className:"ep-search-result__type",children:o}):null,(0,g.jsx)("h2",{className:"ep-search-result__title",children:(0,g.jsx)("a",{href:i,dangerouslySetInnerHTML:{__html:a}})}),r?(0,g.jsx)("p",{className:"price",dangerouslySetInnerHTML:{__html:r}}):null]}),n.length>0?(0,g.jsx)("p",{className:"ep-search-result__description",dangerouslySetInnerHTML:{__html:n}}):null,(0,g.jsxs)("footer",{className:"ep-search-result__footer",children:[e>0?(0,g.jsx)(ge,{rating:e}):null,t]})]}))),xe=({hit:e,searchTerm:t,highlightTag:n})=>{const{highlight:{post_content_plain:r=[]},_source:{meta:{_wc_average_rating:[{value:s}={}]=[]},permalink:a,post_date:o,post_id:i,post_type:c,price_html:l,thumbnail:u}}=e,p=new RegExp(`\\b(${t})`,"gi");let d;d=""===n||void 0===n?e._source.post_title:e._source.post_title.replace(p,(e=>`<${n}>${e}</${n}>`));const h="post"===c?((e,t)=>new Date(e).toLocaleString(t,{dateStyle:"long"}))(o):null,f=r.join("…"),m=P[c]?.singular;return(0,g.jsx)(ye,{averageRating:s,date:h,hit:e,excerpt:f,id:i,priceHtml:l,thumbnail:u,title:d,type:m,url:a})},_e=()=>{const{args:{orderby:n,order:r},search:s}=x(),a=(0,e.useMemo)((()=>Object.keys(L).find((e=>L[e].orderby===n&&L[e].order===r))),[n,r]);return(0,g.jsxs)("label",{className:"ep-search-sort",htmlFor:"ep-sort",children:[(0,g.jsx)("span",{className:"ep-search-sort__label",children:(0,t.__)("Sort by","elasticpress")})," ",(0,g.jsx)("select",{className:"ep-search-sort__options",id:"ep-sort",onChange:e=>{const{orderby:t,order:n}=L[e.target.value];s({orderby:t,order:n})},value:a,children:Object.entries(L).map((([e,{name:t}])=>(0,g.jsx)("option",{value:e,children:t},e)))})]})},we=n=>{const{suggestedTerms:r,searchFor:s,totalResults:a}=n,o=e=>{s(e)},i=r.slice(1);return(0,g.jsxs)(g.Fragment,{children:[D&&r&&r?.[0]?.text&&(0,g.jsx)("div",{className:"ep-search-suggestion",children:(0,g.jsx)("p",{children:(0,e.createInterpolateElement)((0,t.sprintf)((0,t.__)("Did you mean: <a>%s</a>","elasticpress"),r?.[0]?.text),{a:(0,g.jsx)("a",{href:"#",onClick:()=>o(r?.[0]?.text)})})})}),D&&"list"===M&&0===a&&i.length>0&&(0,g.jsxs)("div",{children:[(0,g.jsx)("p",{children:(0,t.__)("Other suggestions","elasticpress")}),(0,g.jsx)("ul",{children:i.map((e=>(0,g.jsx)("li",{children:(0,g.jsx)("a",{href:"#",onClick:()=>o(e.text),children:e.text})},e.text)))})]})]})},Oe=()=>{const{args:{offset:n,per_page:r,highlight:s},nextPage:a,previousPage:o,searchResults:i,searchTerm:c,totalResults:l,searchFor:u,suggestedTerms:p,isFirstSearch:d}=x(),h=(0,e.useRef)();(0,e.useEffect)((()=>{h.current.scrollIntoView({behavior:"smooth"})}),[n]);return(0,g.jsxs)("div",{className:"ep-search-results",children:[(0,g.jsxs)("header",{className:"ep-search-results__header",children:[(0,g.jsx)("h1",{className:"ep-search-results__title",ref:h,role:"status",children:d?(0,t.sprintf)((0,t.__)("Loading results","elasticpress")):c?(0,t.sprintf)((0,t._n)("%1$d result for “%2$s“","%1$d results for “%2$s“",l,"elasticpress"),l,c):(0,t.sprintf)((0,t._n)("%d result","%d results",l,"elasticpress"),l)}),(0,g.jsx)(_e,{})]}),(0,g.jsx)(we,{searchFor:u,suggestedTerms:p,totalResults:l}),i.map((e=>(0,g.jsx)(xe,{hit:e,searchTerm:c,highlightTag:s},e._id))),(0,g.jsx)(ve,{offset:n,onNext:()=>{a()},onPrevious:()=>{o()},perPage:r,total:l})]})},Ee=({children:e,isOpen:t})=>(0,g.jsx)("aside",{className:"ep-search-sidebar "+(t?"is-open":""),children:e}),Te=({children:e})=>(0,g.jsx)("div",{className:"ep-search-toolbar",children:e}),Se=()=>{const{args:n,clearConstraints:r}=x();return(0,e.useMemo)((()=>T.some((({name:e,type:t})=>{switch(t){case"post_type":case"taxonomy":return n[e]?.length>0;case"price_range":return n.max_price||n.min_price;default:return n[e]}}))),[n])&&(0,g.jsx)(H,{onClick:()=>{r()},children:(0,t.__)("Clear filters","elasticpress")})},ke=({isOpen:e,onClick:n})=>(0,g.jsxs)("button",{"aria-expanded":e,className:"ep-search-sidebar-toggle ep-search-icon-button",onClick:n,type:"button",children:[e?(0,t.__)("Close filters","elasticpress"):(0,t.__)("All filters","elasticoress"),(0,g.jsx)(B,{icon:e?W:X})]}),je=()=>{const{isLoading:t}=x(),[n,r]=(0,e.useState)(!1);return(0,g.jsxs)("div",{className:"ep-search-page "+(t?"is-loading":""),children:[(0,g.jsxs)("div",{className:"ep-search-page__header",children:[(0,g.jsx)(me,{}),(0,g.jsxs)(Te,{children:[(0,g.jsx)(Z,{}),(0,g.jsx)(Se,{}),(0,g.jsx)(ke,{isOpen:n,onClick:()=>{r(!n)}})]})]}),(0,g.jsxs)("div",{className:"ep-search-page__body",children:[(0,g.jsxs)(Ee,{isOpen:n,children:[(0,g.jsx)(_e,{}),T.map((({label:e,name:t,postTypes:n,type:r},s)=>(0,g.jsx)(fe,{index:s,label:e,name:t,postTypes:n,type:r},t)))]}),(0,g.jsx)(Oe,{})]})]})},Ce=()=>{const{turnOff:n,isOn:r,search:s}=x(),a=(0,e.useRef)(),o=(0,e.useCallback)((()=>{n(),a.current&&a.current.focus()}),[n]),i=(0,e.useCallback)((e=>{e.preventDefault(),a.current=e.target.s;const{value:t}=a.current,n=(e=>{const t=new FormData(e);return t.has("post_type")?t.getAll("post_type").slice(-1):t.has("post_type[]")?t.getAll("post_type[]"):[]})(a.current.form);s({post_type:n,search:t})}),[a,s]);return(0,e.useEffect)((()=>{const e=document.querySelectorAll('form input[name="s"]');return e.forEach((e=>{e.form.addEventListener("submit",i)})),window.epInstantResults.openModal=s,()=>{e.forEach((e=>{e.form.removeEventListener("submit",i)})),delete window.epInstantResults.openModal}}),[i,s]),(0,g.jsx)(G,{"aria-label":(0,t.__)("Search results","elasticpress"),isOpen:r,onClose:o,children:(0,g.jsx)(je,{})})};window.addEventListener("DOMContentLoaded",(()=>{const t=document.getElementById("ep-instant-results");if("function"===typeof e.createRoot){(0,e.createRoot)(t).render((0,g.jsx)(y,{apiEndpoint:_,apiHost:w,argsSchema:O,paramPrefix:C,requestIdBase:F,children:(0,g.jsx)(Ce,{})}))}else(0,e.render)((0,g.jsx)(y,{apiEndpoint:_,apiHost:w,argsSchema:O,paramPrefix:C,requestIdBase:F,children:(0,g.jsx)(Ce,{})}),t)}))}()}();
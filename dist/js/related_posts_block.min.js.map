{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./assets/js/blocks/related-posts/Edit.js","webpack:///./assets/js/blocks/related-posts/block.js"],"names":["wp","i18n","__","setLocaleData","editor","RichText","AlignmentToolbar","BlockControls","InspectorControls","components","TextControl","PanelBody","Placeholder","Spinner","QueryControls","element","Fragment","Component","RawHTML","addQueryArgs","url","Edit","props","number","attributes","state","posts","urlArgs","fetchRequest","apiFetch","path","data","select","getCurrentPostId","then","setState","catch","alignment","setAttributes","className","displayPosts","length","slice","newValue","value","textAlign","map","post","i","titleTrimmed","title","rendered","trim","link","registerBlockType","blocks","icon","supports","align","category","type","default","edit","save"],"mappings":"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","file":"related_posts_block.min.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./assets/js/blocks/related-posts/block.js\");\n","/* global wp */\n\nconst {\n\t__,\n\tsetLocaleData\n} = wp.i18n;\n\nconst {\n\tRichText,\n\tAlignmentToolbar,\n\tBlockControls,\n\tInspectorControls\n} = wp.editor;\n\nconst {\n\tTextControl,\n\tPanelBody,\n\tPlaceholder,\n\tSpinner,\n\tQueryControls\n} = wp.components;\n\nconst {\n\tFragment,\n\tComponent,\n\tRawHTML\n} = wp.element;\n\nconst { addQueryArgs } = wp.url;\n\n/**\n * Edit component\n */\nclass Edit extends Component {\n\t/**\n\t * Setup class\n\t */\n\tconstructor( props ) {\n\t\tsuper( props );\n\n\t\tconst { attributes: { number } } = props;\n\n\t\tthis.state = {\n\t\t\tposts: false,\n\t\t\tnumber: number\n\t\t};\n\t}\n\n\t/**\n\t * Load preview data\n\t */\n\tcomponentDidMount() {\n\t\tconst urlArgs = {\n\t\t\tnumber: 100\n\t\t};\n\n\t\tthis.fetchRequest = wp.apiFetch( {\n\t\t\tpath: addQueryArgs( '/wp/v2/posts/' + wp.data.select( 'core/editor' ).getCurrentPostId() + '/related', urlArgs ),\n\t\t} ).then(\n\t\t\t( posts ) => {\n\t\t\t\tthis.setState( { posts: posts } );\n\t\t\t}\n\t\t).catch(\n\t\t\t() => {\n\t\t\t\tthis.setState( { posts: false } );\n\t\t\t}\n\t\t);\n\t}\n\n\t/**\n\t * Render block\n\t */\n\trender() {\n\t\tconst { attributes: { alignment, number }, setAttributes, className } = this.props;\n\t\tconst { posts } = this.state;\n\n\t\tconst displayPosts = posts.length > number ? posts.slice( 0, number ) : posts;\n\n\t\treturn (\n\t\t\t<Fragment>\n\t\t\t\t<BlockControls>\n\t\t\t\t\t<AlignmentToolbar\n\t\t\t\t\t\tvalue={ alignment }\n\t\t\t\t\t\tonChange={ newValue => setAttributes( { alignment: newValue } ) }\n\t\t\t\t\t/>\n\t\t\t\t</BlockControls>\n\t\t\t\t<InspectorControls>\n\t\t\t\t\t<PanelBody title={ __( 'Related Post Settings' ) }>\n\t\t\t\t\t\t<QueryControls\n\t\t\t\t\t\t\tnumberOfItems={ number }\n\t\t\t\t\t\t\tonNumberOfItemsChange={ ( value ) => setAttributes( { number: value } ) }\n\t\t\t\t\t\t/>\n\t\t\t\t\t</PanelBody>\n\t\t\t\t</InspectorControls>\n\t\t\t\t<div className={ className }>\n\t\t\t\t\t{ false === displayPosts || 0 === displayPosts.length ?\n\t\t\t\t\t\t<Placeholder\n\t\t\t\t\t\t\ticon=\"admin-post\"\n\t\t\t\t\t\t\tlabel={ __( 'Related Posts' ) }\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{ false === posts ?\n\t\t\t\t\t\t\t\t<Spinner />\n\t\t\t\t\t\t\t\t:\n\t\t\t\t\t\t\t\t__( 'No related posts yet.' )\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t</Placeholder>\n\t\t\t\t\t\t:\n\t\t\t\t\t\t<ul style={ { textAlign: alignment } }>\n\t\t\t\t\t\t\t{ displayPosts.map( ( post, i ) => {\n\t\t\t\t\t\t\t\tconst titleTrimmed = post.title.rendered.trim();\n\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t<li key={i}>\n\t\t\t\t\t\t\t\t\t\t<a href={ post.link }>\n\t\t\t\t\t\t\t\t\t\t\t{ titleTrimmed ? (\n\t\t\t\t\t\t\t\t\t\t\t\t<RawHTML>\n\t\t\t\t\t\t\t\t\t\t\t\t\t{ titleTrimmed }\n\t\t\t\t\t\t\t\t\t\t\t\t</RawHTML>\n\t\t\t\t\t\t\t\t\t\t\t) :\n\t\t\t\t\t\t\t\t\t\t\t\t__( '(Untitled)', 'elasticpress' )\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t} ) }\n\t\t\t\t\t\t</ul>\n\t\t\t\t\t}\n\t\t\t\t</div>\n\t\t\t</Fragment>\n\t\t);\n\t}\n}\n\nexport default Edit;\n","/* global wp */\n\nimport Edit from './Edit';\n\nconst { registerBlockType } = wp.blocks;\n\nregisterBlockType( 'elasticpress/related-posts', {\n\ttitle: 'Related Posts (ElasticPress)',\n\ticon: 'universal-access-alt',\n\tsupports: {\n\t\talign: true\n\t},\n\tcategory: 'widgets',\n\tattributes: {\n\t\talignment: {\n\t\t\ttype: 'string',\n\t\t\tdefault: 'none'\n\t\t},\n\t\tnumber: {\n\t\t\ttype: 'number',\n\t\t\tdefault: 5\n\t\t}\n\t},\n\n\t/**\n\t * Handle edit\n\t */\n\tedit( props ) {\n\t\treturn <Edit { ...props } />;\n\t},\n\n\t/**\n\t * Handle save\n\t */\n\tsave( props ) {\n\t\treturn null;\n\t},\n} );\n"],"sourceRoot":""}
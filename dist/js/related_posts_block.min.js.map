{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./assets/js/blocks/related-posts/block.js","webpack:///./assets/js/blocks/related-posts/Edit.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","_Edit","registerBlockType","wp","blocks","title","supports","align","category","attributes","alignment","type","default","number","edit","props","React","createElement","_Edit2","save","i18n","__","setLocaleData","editor","AlignmentToolbar","RichText","BlockControls","InspectorControls","components","PanelBody","TextControl","Placeholder","Spinner","QueryControls","element","Fragment","Component","RawHTML","addQueryArgs","url","Edit","_classCallCheck","this","_this","_possibleConstructorReturn","__proto__","getPrototypeOf","state","posts","_this2","fetchRequest","apiFetch","path","data","select","getCurrentPostId","then","setState","catch","_props","_props$attributes","setAttributes","className","displayPosts","length","slice","onChange","newValue","numberOfItems","onNumberOfItemsChange","icon","label","style","textAlign","map","post","titleTrimmed","rendered","trim","href","link"],"mappings":"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","file":"related_posts_block.min.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 147);\n","/* global wp */\n\nimport Edit from './Edit';\n\nconst { registerBlockType } = wp.blocks;\n\nregisterBlockType( 'elasticpress/related-posts', {\n\ttitle: 'Related Posts (ElasticPress)',\n\tsupports: {\n\t\talign: true\n\t},\n\tcategory: 'widgets',\n\tattributes: {\n\t\talignment: {\n\t\t\ttype: 'string',\n\t\t\tdefault: 'none'\n\t\t},\n\t\tnumber: {\n\t\t\ttype: 'number',\n\t\t\tdefault: 5\n\t\t}\n\t},\n\n\t/**\n\t * Handle edit\n\t */\n\tedit( props ) {\n\t\treturn <Edit { ...props } />;\n\t},\n\n\t/**\n\t * Handle save\n\t */\n\tsave( props ) {\n\t\treturn null;\n\t},\n} );\n","/* global wp */\n\nconst {\n\t__,\n\tsetLocaleData\n} = wp.i18n;\n\nconst {\n\tRichText,\n\tAlignmentToolbar,\n\tBlockControls,\n\tInspectorControls\n} = wp.editor;\n\nconst {\n\tTextControl,\n\tPanelBody,\n\tPlaceholder,\n\tSpinner,\n\tQueryControls\n} = wp.components;\n\nconst {\n\tFragment,\n\tComponent,\n\tRawHTML\n} = wp.element;\n\nconst { addQueryArgs } = wp.url;\n\n/**\n * Edit component\n */\nclass Edit extends Component {\n\t/**\n\t * Setup class\n\t */\n\tconstructor( props ) {\n\t\tsuper( props );\n\n\t\tconst { attributes: { number } } = props;\n\n\t\tthis.state = {\n\t\t\tposts: false,\n\t\t\tnumber: number\n\t\t};\n\t}\n\n\t/**\n\t * Load preview data\n\t */\n\tcomponentDidMount() {\n\t\tconst urlArgs = {\n\t\t\tnumber: 100\n\t\t};\n\n\t\tthis.fetchRequest = wp.apiFetch( {\n\t\t\tpath: addQueryArgs( '/wp/v2/posts/' + wp.data.select( 'core/editor' ).getCurrentPostId() + '/related', urlArgs ),\n\t\t} ).then(\n\t\t\t( posts ) => {\n\t\t\t\tthis.setState( { posts: posts } );\n\t\t\t}\n\t\t).catch(\n\t\t\t() => {\n\t\t\t\tthis.setState( { posts: false } );\n\t\t\t}\n\t\t);\n\t}\n\n\t/**\n\t * Render block\n\t */\n\trender() {\n\t\tconst { attributes: { alignment, number }, setAttributes, className } = this.props;\n\t\tconst { posts } = this.state;\n\n\t\tconst displayPosts = posts.length > number ? posts.slice( 0, number ) : posts;\n\n\t\treturn (\n\t\t\t<Fragment>\n\t\t\t\t<BlockControls>\n\t\t\t\t\t<AlignmentToolbar\n\t\t\t\t\t\tvalue={ alignment }\n\t\t\t\t\t\tonChange={ newValue => setAttributes( { alignment: newValue } ) }\n\t\t\t\t\t/>\n\t\t\t\t</BlockControls>\n\t\t\t\t<InspectorControls>\n\t\t\t\t\t<PanelBody title={ __( 'Related Post Settings' ) }>\n\t\t\t\t\t\t<QueryControls\n\t\t\t\t\t\t\tnumberOfItems={ number }\n\t\t\t\t\t\t\tonNumberOfItemsChange={ ( value ) => setAttributes( { number: value } ) }\n\t\t\t\t\t\t/>\n\t\t\t\t\t</PanelBody>\n\t\t\t\t</InspectorControls>\n\n\t\t\t\t<div className={ className }>\n\t\t\t\t\t{ false === displayPosts || 0 === displayPosts.length ?\n\t\t\t\t\t\t<Placeholder\n\t\t\t\t\t\t\ticon=\"admin-post\"\n\t\t\t\t\t\t\tlabel={ __( 'Related Posts' ) }\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{ false === posts ?\n\t\t\t\t\t\t\t\t<Spinner />\n\t\t\t\t\t\t\t\t:\n\t\t\t\t\t\t\t\t__( 'No related posts yet.' )\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t</Placeholder>\n\t\t\t\t\t\t:\n\t\t\t\t\t\t<ul style={ { textAlign: alignment } }>\n\t\t\t\t\t\t\t{ displayPosts.map( ( post, i ) => {\n\t\t\t\t\t\t\t\tconst titleTrimmed = post.title.rendered.trim();\n\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t<li key={i}>\n\t\t\t\t\t\t\t\t\t\t<a href={ post.link }>\n\t\t\t\t\t\t\t\t\t\t\t{ titleTrimmed ? (\n\t\t\t\t\t\t\t\t\t\t\t\t<RawHTML>\n\t\t\t\t\t\t\t\t\t\t\t\t\t{ titleTrimmed }\n\t\t\t\t\t\t\t\t\t\t\t\t</RawHTML>\n\t\t\t\t\t\t\t\t\t\t\t) :\n\t\t\t\t\t\t\t\t\t\t\t\t__( '(Untitled)', 'elasticpress' )\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t} ) }\n\t\t\t\t\t\t</ul>\n\t\t\t\t\t}\n\t\t\t\t</div>\n\t\t\t</Fragment>\n\t\t);\n\t}\n}\n\nexport default Edit;\n"],"sourceRoot":""}
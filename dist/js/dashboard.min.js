!function(e){var t={};function a(n){if(t[n])return t[n].exports;var s=t[n]={i:n,l:!1,exports:{}};return e[n].call(s.exports,s,s.exports,a),s.l=!0,s.exports}a.m=e,a.c=t,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},a.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="",a(a.s=4)}([function(e,t){e.exports=jQuery},function(e,t){e.exports=window},,,function(e,t,a){"use strict";var n,s=a(0),i=(n=s)&&n.__esModule?n:{default:n},o=a(1);var c,d,r=(0,i.default)(document.getElementsByClassName("ep-features")),u=(0,i.default)(document.getElementsByClassName("error-overlay")),l=(0,i.default)(document.getElementsByClassName("progress-bar")),f=(0,i.default)(document.getElementsByClassName("sync-status")),h=(0,i.default)(document.getElementsByClassName("start-sync")),p=(0,i.default)(document.getElementsByClassName("resume-sync")),m=(0,i.default)(document.getElementsByClassName("pause-sync")),y=(0,i.default)(document.getElementsByClassName("cancel-sync")),_="sync",v=!1,g=0,x=0;function C(){var e=void 0;if(0===g)l.css({width:"1%"});else{var t=parseInt(g)/parseInt(x)*100;l.css({width:t+"%"})}"initialsync"===_?(e=o.epDash.sync_initial,f.text(e),f.show(),l.show(),m.show(),u.addClass("syncing"),y.hide(),p.hide(),h.hide()):"sync"===_?(e=o.epDash.sync_syncing+" "+parseInt(g)+"/"+parseInt(x),c&&(e+=" ("+c.url+")"),f.text(e),f.show(),l.show(),m.show(),u.addClass("syncing"),y.hide(),p.hide(),h.hide()):"pause"===_?(e=o.epDash.sync_paused,x&&0!==x&&(e+=" "+parseInt(g)+"/"+parseInt(x)),c&&(e+=" ("+c.url+")"),f.text(e),f.show(),l.show(),m.hide(),u.addClass("syncing"),y.show(),p.show(),h.hide()):"wpcli"===_?(e=o.epDash.sync_wpcli,f.text(e),f.show(),l.hide(),m.hide(),u.addClass("syncing"),y.hide(),p.hide(),h.hide()):"error"===_?(f.text(o.epDash.sync_error),f.show(),h.show(),y.hide(),p.hide(),m.hide(),u.removeClass("syncing"),l.hide(),v&&r.find(".ep-feature-"+v).removeClass("feature-syncing"),v=null,setTimeout(function(){f.hide()},7e3)):"cancel"===_?(f.hide(),l.hide(),m.hide(),u.removeClass("syncing"),y.hide(),p.hide(),h.show(),v&&r.find(".ep-feature-"+v).removeClass("feature-syncing"),v=null):"finished"===_&&(f.text(o.epDash.sync_complete),f.show(),l.hide(),m.hide(),y.hide(),p.hide(),h.show(),u.removeClass("syncing"),v&&r.find(".ep-feature-"+v).removeClass("feature-syncing"),v=null,setTimeout(function(){f.hide()},7e3))}function w(){i.default.ajax({method:"post",url:o.ajaxurl,data:{action:"ep_cancel_index",nonce:o.epDash.nonce}})}function D(){i.default.ajax({method:"post",url:o.ajaxurl,data:{action:"ep_index",feature_sync:v,nonce:o.epDash.nonce}}).done(function(e){if("sync"===_){if(x=e.data.found_posts,g=e.data.offset,e.data.site_stack&&(d=e.data.site_stack),e.data.current_site&&(c=e.data.current_site),d&&d.length)return _="sync",C(),void D();0!==e.data.found_posts||e.data.start?(_="sync",C(),D()):(_="finished",C())}}).error(function(e){e&&e.status&&parseInt(e.status)>=400&&parseInt(e.status)<600&&(_="error",C(),w())})}r.on("click",".learn-more, .collapse",function(){(0,i.default)(void 0).parents(".ep-feature").toggleClass("show-full")}),r.on("click",".settings-button",function(){(0,i.default)(void 0).parents(".ep-feature").toggleClass("show-settings")}),r.on("click",".save-settings",function(e){if(e.preventDefault(),!(0,i.default)(void 0).hasClass("disabled")){var t=e.target.getAttribute("data-feature"),a=r.find(".ep-feature-"+t),n={};a.find(".setting-field").each(function(){var e=(0,i.default)(void 0).attr("type"),t=(0,i.default)(void 0).attr("data-field-name"),a=(0,i.default)(void 0).attr("value");"radio"===e?(0,i.default)(void 0).attr("checked")&&(n[t]=a):n[t]=a}),a.addClass("saving"),i.default.ajax({method:"post",url:o.ajaxurl,data:{action:"ep_save_feature",feature:t,nonce:o.epDash.nonce,settings:n}}).done(function(e){setTimeout(function(){a.removeClass("saving"),"1"===n.active?a.addClass("feature-active"):a.removeClass("feature-active"),e.data.reindex&&(_="initialsync",C(),(0,i.default)('[data-ep-notice="no-sync"], [data-ep-notice="auto-activate-sync"], [data-ep-notice="upgrade-sync"]').remove(),_="sync",a.addClass("feature-syncing"),v=t,D())},700)}).error(function(){setTimeout(function(){a.removeClass("saving"),a.removeClass("feature-active"),a.removeClass("feature-syncing")},700)})}}),o.epDash.index_meta?o.epDash.index_meta.wpcli_sync?(_="wpcli",C()):(g=o.epDash.index_meta.offset,x=o.epDash.index_meta.found_posts,o.epDash.index_meta.feature_sync&&(v=o.epDash.index_meta.feature_sync),o.epDash.index_meta.current_site&&(c=o.epDash.index_meta.current_site),o.epDash.index_meta.site_stack&&(d=o.epDash.index_meta.site_stack),d&&d.length?o.epDash.auto_start_index?(_="sync",history.pushState({},document.title,document.location.pathname+document.location.search.replace(/&do_sync/,"")),C(),D()):(_="pause",C()):0!==x||o.epDash.index_meta.start?o.epDash.auto_start_index?(_="sync",history.pushState({},document.title,document.location.pathname+document.location.search.replace(/&do_sync/,"")),C(),D()):(_="pause",C()):(_="finished",C())):o.epDash.auto_start_index&&(_="initialsync",C(),_="sync",history.pushState({},document.title,document.location.pathname+document.location.search.replace(/&do_sync/,"")),D()),h.on("click",function(){_="initialsync",C(),(0,i.default)('[data-ep-notice="no-sync"], [data-ep-notice="auto-activate-sync"], [data-ep-notice="upgrade-sync"]').remove(),_="sync",D()}),m.on("click",function(){_="pause",C()}),p.on("click",function(){_="sync",C(),D()}),y.on("click",function(){_="cancel",C(),w()})}]);
//# sourceMappingURL=dashboard.min.js.map
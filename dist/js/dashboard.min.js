!function(e){var t={};function a(n){if(t[n])return t[n].exports;var s=t[n]={i:n,l:!1,exports:{}};return e[n].call(s.exports,s,s.exports,a),s.l=!0,s.exports}a.m=e,a.c=t,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)a.d(n,s,function(t){return e[t]}.bind(null,s));return n},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="",a(a.s=176)}({176:function(e,t,a){"use strict";var n,s=a(3),i=(n=s)&&n.__esModule?n:{default:n},o=a(4);var c=(0,i.default)(document.getElementsByClassName("ep-features")),r=(0,i.default)(document.getElementsByClassName("error-overlay")),l=(0,i.default)(document.getElementsByClassName("progress-bar")),d=(0,i.default)(document.getElementsByClassName("sync-status")),u=(0,i.default)(document.getElementsByClassName("start-sync")),f=(0,i.default)(document.getElementsByClassName("resume-sync")),h=(0,i.default)(document.getElementsByClassName("pause-sync")),p=(0,i.default)(document.getElementsByClassName("cancel-sync")),m=(0,i.default)(document.getElementsByClassName("ep-credentials-tab")),y=(0,i.default)(".ep-host-row label"),_=(0,i.default)(document.getElementsByClassName("ep-host-legend")),v=(0,i.default)(document.getElementsByClassName("ep-additional-fields")),g=document.getElementById("ep_host"),x=g?g.value:null,C="",w="sync",b=!1,D=void 0,E=void 0,j=0,k=0;function B(){var e=void 0;if(0===j)l.css({width:"1%"});else{var t=parseInt(j)/parseInt(k)*100;l.css({width:t+"%"})}"initialsync"===w?(e=o.epDash.sync_initial,d.text(e),d.show(),l.show(),h.show(),r.addClass("syncing"),p.hide(),f.hide(),u.hide()):"sync"===w?(e=o.epDash.sync_syncing,D&&(D.indexable&&(e+=" "+o.epDash.sync_indexable_labels[D.indexable].plural.toLowerCase()+" "+parseInt(j)+"/"+parseInt(k)),D.url&&(e+=" ("+D.url+")")),d.text(e),d.show(),l.show(),h.show(),r.addClass("syncing"),p.hide(),f.hide(),u.hide()):"pause"===w?(e=o.epDash.sync_paused,k&&0!==k&&(e+=", "+parseInt(j)+"/"+parseInt(k)+" "+o.epDash.sync_indexable_labels[D.indexable].plural.toLowerCase()),D&&D.url&&(e+=" ("+D.url+")"),d.text(e),d.show(),l.show(),h.hide(),r.addClass("syncing"),p.show(),f.show(),u.hide()):"wpcli"===w?(e=o.epDash.sync_wpcli,d.text(e),d.show(),l.hide(),h.hide(),r.addClass("syncing"),p.hide(),f.hide(),u.hide()):"error"===w?(d.text(o.epDash.sync_error),d.show(),u.show(),p.hide(),f.hide(),h.hide(),r.removeClass("syncing"),l.hide(),b&&c.find(".ep-feature-"+b).removeClass("feature-syncing"),b=null,setTimeout(function(){d.hide()},7e3)):"cancel"===w?(d.hide(),l.hide(),h.hide(),r.removeClass("syncing"),p.hide(),f.hide(),u.show(),b&&c.find(".ep-feature-"+b).removeClass("feature-syncing"),b=null):"finished"===w&&(d.text(o.epDash.sync_complete),d.show(),l.hide(),h.hide(),p.hide(),f.hide(),u.show(),r.removeClass("syncing"),b&&c.find(".ep-feature-"+b).removeClass("feature-syncing"),b=null,setTimeout(function(){d.hide()},7e3))}function N(){i.default.ajax({method:"post",url:o.ajaxurl,data:{action:"ep_cancel_index",nonce:o.epDash.nonce}})}function I(){i.default.ajax({method:"post",url:o.ajaxurl,data:{action:"ep_index",feature_sync:b,nonce:o.epDash.nonce}}).done(function(e){if("sync"===w){if(k=e.data.found_items,j=e.data.offset,e.data.sync_stack&&(E=e.data.sync_stack),e.data.current_sync_item&&(D=e.data.current_sync_item),E&&E.length)return w="sync",B(),void I();0!==e.data.found_items||e.data.start?(w="sync",B(),I()):(w="finished",B(),o.epDash.install_sync&&document.location.replace(o.epDash.install_complete_url))}}).error(function(e){e&&e.status&&400<=parseInt(e.status)&&600>parseInt(e.status)&&(w="error",B(),N())})}c.on("click",".learn-more, .collapse",function(){(0,i.default)(this).parents(".ep-feature").toggleClass("show-full")}),c.on("click",".settings-button",function(){(0,i.default)(this).parents(".ep-feature").toggleClass("show-settings")}),c.on("click",".save-settings",function(e){if(e.preventDefault(),!(0,i.default)(this).hasClass("disabled")){var t=e.target.getAttribute("data-feature"),a=c.find(".ep-feature-"+t),n={};a.find(".setting-field").each(function(){var e=(0,i.default)(this).attr("type"),t=(0,i.default)(this).attr("data-field-name"),a=(0,i.default)(this).attr("value");"radio"===e?(0,i.default)(this).attr("checked")&&(n[t]=a):n[t]=a}),a.addClass("saving"),i.default.ajax({method:"post",url:o.ajaxurl,data:{action:"ep_save_feature",feature:t,nonce:o.epDash.nonce,settings:n}}).done(function(e){setTimeout(function(){a.removeClass("saving"),"1"===n.active?a.addClass("feature-active"):a.removeClass("feature-active"),e.data.reindex&&(w="initialsync",B(),(0,i.default)('[data-ep-notice="no-sync"], [data-ep-notice="auto-activate-sync"], [data-ep-notice="upgrade-sync"]').remove(),w="sync",a.addClass("feature-syncing"),b=t,I())},700)}).error(function(){setTimeout(function(){a.removeClass("saving"),a.removeClass("feature-active"),a.removeClass("feature-syncing")},700)})}}),o.epDash.index_meta?o.epDash.index_meta.wpcli_sync?(w="wpcli",B()):(j=o.epDash.index_meta.offset,k=o.epDash.index_meta.found_items,o.epDash.index_meta.feature_sync&&(b=o.epDash.index_meta.feature_sync),o.epDash.index_meta.current_sync_item&&(D=o.epDash.index_meta.current_sync_item),o.epDash.index_meta.site_stack&&(E=o.epDash.index_meta.sync_stack),E&&E.length?o.epDash.auto_start_index?(w="sync",history.pushState({},document.title,document.location.pathname+document.location.search.replace(/&do_sync/,"")),B(),I()):(w="pause",B()):0!==k||o.epDash.index_meta.start?o.epDash.auto_start_index?(w="sync",history.pushState({},document.title,document.location.pathname+document.location.search.replace(/&do_sync/,"")),B(),I()):(w="pause",B()):(w="finished",B())):o.epDash.auto_start_index&&(w="initialsync",B(),w="sync",history.pushState({},document.title,document.location.pathname+document.location.search.replace(/&do_sync/,"")),I()),u.on("click",function(){w="initialsync",B(),(0,i.default)('[data-ep-notice="no-sync"], [data-ep-notice="auto-activate-sync"], [data-ep-notice="upgrade-sync"]').remove(),w="sync",I()}),h.on("click",function(){w="pause",B()}),f.on("click",function(){w="sync",B(),I()}),p.on("click",function(){w="cancel",B(),N()}),g&&g.addEventListener("input",function(e){C=e.target.value}),m.on("click",function(e){var t=null!==e.currentTarget.getAttribute("data-epio"),a=(0,i.default)(e.currentTarget),n=a.hasClass("initial");e.preventDefault(),n&&!g.disabled?g.value=x:g.value=C,m.removeClass("nav-tab-active"),a.addClass("nav-tab-active"),t?(y.text("ElasticPress.io Host URL"),_.text("Plug in your ElasticPress.io server here!"),v.show(),v.attr("aria-hidden","false")):(y.text("Elasticsearch Host URL"),_.text("Plug in your Elasticsearch server here!"),v.hide(),v.attr("aria-hidden","true"))})},3:function(e,t){e.exports=jQuery},4:function(e,t){e.exports=window}});
//# sourceMappingURL=dashboard.min.js.map
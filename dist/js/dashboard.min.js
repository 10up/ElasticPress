!function(e){var t={};function a(n){if(t[n])return t[n].exports;var s=t[n]={i:n,l:!1,exports:{}};return e[n].call(s.exports,s,s.exports,a),s.l=!0,s.exports}a.m=e,a.c=t,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},a.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="",a(a.s=4)}([function(e,t){e.exports=jQuery},function(e,t){e.exports=window},,,function(e,t,a){"use strict";var n,s=a(0),i=(n=s)&&n.__esModule?n:{default:n},c=a(1);var o=(0,i.default)(document.getElementsByClassName("ep-features")),d=(0,i.default)(document.getElementsByClassName("error-overlay")),r=(0,i.default)(document.getElementsByClassName("progress-bar")),u=(0,i.default)(document.getElementsByClassName("sync-status")),l=(0,i.default)(document.getElementsByClassName("start-sync")),h=(0,i.default)(document.getElementsByClassName("resume-sync")),f=(0,i.default)(document.getElementsByClassName("pause-sync")),p=(0,i.default)(document.getElementsByClassName("cancel-sync")),m="sync",y=!1,_=void 0,g=void 0,v=0,x=0;function C(){var e=void 0;if(0===v)r.css({width:"1%"});else{var t=parseInt(v)/parseInt(x)*100;r.css({width:t+"%"})}"initialsync"===m?(e=c.epDash.sync_initial,u.text(e),u.show(),r.show(),f.show(),d.addClass("syncing"),p.hide(),h.hide(),l.hide()):"sync"===m?(e=c.epDash.sync_syncing+" "+c.epDash.sync_indexable_labels[_.indexable].plural.toLowerCase()+" "+parseInt(v)+"/"+parseInt(x),_.url&&(e+=" ("+_.url+")"),u.text(e),u.show(),r.show(),f.show(),d.addClass("syncing"),p.hide(),h.hide(),l.hide()):"pause"===m?(e=c.epDash.sync_paused,x&&0!==x&&(e+=" "+parseInt(v)+"/"+parseInt(x)),_.url&&(e+=" ("+_.url+")"),u.text(e),u.show(),r.show(),f.hide(),d.addClass("syncing"),p.show(),h.show(),l.hide()):"wpcli"===m?(e=c.epDash.sync_wpcli,u.text(e),u.show(),r.hide(),f.hide(),d.addClass("syncing"),p.hide(),h.hide(),l.hide()):"error"===m?(u.text(c.epDash.sync_error),u.show(),l.show(),p.hide(),h.hide(),f.hide(),d.removeClass("syncing"),r.hide(),y&&o.find(".ep-feature-"+y).removeClass("feature-syncing"),y=null,setTimeout(function(){u.hide()},7e3)):"cancel"===m?(u.hide(),r.hide(),f.hide(),d.removeClass("syncing"),p.hide(),h.hide(),l.show(),y&&o.find(".ep-feature-"+y).removeClass("feature-syncing"),y=null):"finished"===m&&(u.text(c.epDash.sync_complete),u.show(),r.hide(),f.hide(),p.hide(),h.hide(),l.show(),d.removeClass("syncing"),y&&o.find(".ep-feature-"+y).removeClass("feature-syncing"),y=null,setTimeout(function(){u.hide()},7e3))}function w(){i.default.ajax({method:"post",url:c.ajaxurl,data:{action:"ep_cancel_index",nonce:c.epDash.nonce}})}function D(){i.default.ajax({method:"post",url:c.ajaxurl,data:{action:"ep_index",feature_sync:y,nonce:c.epDash.nonce}}).done(function(e){if("sync"===m){if(x=e.data.found_items,v=e.data.offset,e.data.sync_stack&&(g=e.data.sync_stack),e.data.current_sync_item&&(_=e.data.current_sync_item),g&&g.length)return m="sync",C(),void D();0!==e.data.found_items||e.data.start?(m="sync",C(),D()):(m="finished",C())}}).error(function(e){e&&e.status&&parseInt(e.status)>=400&&parseInt(e.status)<600&&(m="error",C(),w())})}o.on("click",".learn-more, .collapse",function(){(0,i.default)(this).parents(".ep-feature").toggleClass("show-full")}),o.on("click",".settings-button",function(){(0,i.default)(this).parents(".ep-feature").toggleClass("show-settings")}),o.on("click",".save-settings",function(e){if(e.preventDefault(),!(0,i.default)(this).hasClass("disabled")){var t=e.target.getAttribute("data-feature"),a=o.find(".ep-feature-"+t),n={};a.find(".setting-field").each(function(){var e=(0,i.default)(this).attr("type"),t=(0,i.default)(this).attr("data-field-name"),a=(0,i.default)(this).attr("value");"radio"===e?(0,i.default)(this).attr("checked")&&(n[t]=a):n[t]=a}),a.addClass("saving"),i.default.ajax({method:"post",url:c.ajaxurl,data:{action:"ep_save_feature",feature:t,nonce:c.epDash.nonce,settings:n}}).done(function(e){setTimeout(function(){a.removeClass("saving"),"1"===n.active?a.addClass("feature-active"):a.removeClass("feature-active"),e.data.reindex&&(m="initialsync",C(),(0,i.default)('[data-ep-notice="no-sync"], [data-ep-notice="auto-activate-sync"], [data-ep-notice="upgrade-sync"]').remove(),m="sync",a.addClass("feature-syncing"),y=t,D())},700)}).error(function(){setTimeout(function(){a.removeClass("saving"),a.removeClass("feature-active"),a.removeClass("feature-syncing")},700)})}}),c.epDash.index_meta?c.epDash.index_meta.wpcli_sync?(m="wpcli",C()):(v=c.epDash.index_meta.offset,x=c.epDash.index_meta.found_items,c.epDash.index_meta.feature_sync&&(y=c.epDash.index_meta.feature_sync),c.epDash.index_meta.current_sync_item&&(_=c.epDash.index_meta.current_sync_item),c.epDash.index_meta.site_stack&&(g=c.epDash.index_meta.sync_stack),g&&g.length?c.epDash.auto_start_index?(m="sync",history.pushState({},document.title,document.location.pathname+document.location.search.replace(/&do_sync/,"")),C(),D()):(m="pause",C()):0!==x||c.epDash.index_meta.start?c.epDash.auto_start_index?(m="sync",history.pushState({},document.title,document.location.pathname+document.location.search.replace(/&do_sync/,"")),C(),D()):(m="pause",C()):(m="finished",C())):c.epDash.auto_start_index&&(m="initialsync",C(),m="sync",history.pushState({},document.title,document.location.pathname+document.location.search.replace(/&do_sync/,"")),D()),l.on("click",function(){m="initialsync",C(),(0,i.default)('[data-ep-notice="no-sync"], [data-ep-notice="auto-activate-sync"], [data-ep-notice="upgrade-sync"]').remove(),m="sync",D()}),f.on("click",function(){m="pause",C()}),h.on("click",function(){m="sync",C(),D()}),p.on("click",function(){m="cancel",C(),w()})}]);
//# sourceMappingURL=dashboard.min.js.map
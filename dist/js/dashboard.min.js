!function(e){var t={};function a(n){if(t[n])return t[n].exports;var s=t[n]={i:n,l:!1,exports:{}};return e[n].call(s.exports,s,s.exports,a),s.l=!0,s.exports}a.m=e,a.c=t,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)a.d(n,s,function(t){return e[t]}.bind(null,s));return n},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="",a(a.s=4)}([function(e,t){e.exports=jQuery},function(e,t){e.exports=window},,,function(e,t,a){"use strict";var n,s=a(0),i=(n=s)&&n.__esModule?n:{default:n},o=a(1);var c=(0,i.default)(document.getElementsByClassName("ep-features")),r=(0,i.default)(document.getElementsByClassName("error-overlay")),d=(0,i.default)(document.getElementsByClassName("progress-bar")),u=(0,i.default)(document.getElementsByClassName("sync-status")),l=(0,i.default)(document.getElementsByClassName("start-sync")),f=(0,i.default)(document.getElementsByClassName("resume-sync")),h=(0,i.default)(document.getElementsByClassName("pause-sync")),p=(0,i.default)(document.getElementsByClassName("cancel-sync")),y="sync",m=!1,_=void 0,g=void 0,v=0,x=0;function C(){var e=void 0;if(0===v)d.css({width:"1%"});else{var t=parseInt(v)/parseInt(x)*100;d.css({width:t+"%"})}"initialsync"===y?(e=o.epDash.sync_initial,u.text(e),u.show(),d.show(),h.show(),r.addClass("syncing"),p.hide(),f.hide(),l.hide()):"sync"===y?(e=o.epDash.sync_syncing,_&&(_.indexable&&(e+=" "+o.epDash.sync_indexable_labels[_.indexable].plural.toLowerCase()+" "+parseInt(v)+"/"+parseInt(x)),_.url&&(e+=" ("+_.url+")")),u.text(e),u.show(),d.show(),h.show(),r.addClass("syncing"),p.hide(),f.hide(),l.hide()):"pause"===y?(e=o.epDash.sync_paused,x&&0!==x&&(e+=", "+parseInt(v)+"/"+parseInt(x)+" "+o.epDash.sync_indexable_labels[_.indexable].plural.toLowerCase()),_&&_.url&&(e+=" ("+_.url+")"),u.text(e),u.show(),d.show(),h.hide(),r.addClass("syncing"),p.show(),f.show(),l.hide()):"wpcli"===y?(e=o.epDash.sync_wpcli,u.text(e),u.show(),d.hide(),h.hide(),r.addClass("syncing"),p.hide(),f.hide(),l.hide()):"error"===y?(u.text(o.epDash.sync_error),u.show(),l.show(),p.hide(),f.hide(),h.hide(),r.removeClass("syncing"),d.hide(),m&&c.find(".ep-feature-"+m).removeClass("feature-syncing"),m=null,setTimeout(function(){u.hide()},7e3)):"cancel"===y?(u.hide(),d.hide(),h.hide(),r.removeClass("syncing"),p.hide(),f.hide(),l.show(),m&&c.find(".ep-feature-"+m).removeClass("feature-syncing"),m=null):"finished"===y&&(u.text(o.epDash.sync_complete),u.show(),d.hide(),h.hide(),p.hide(),f.hide(),l.show(),r.removeClass("syncing"),m&&c.find(".ep-feature-"+m).removeClass("feature-syncing"),m=null,setTimeout(function(){u.hide()},7e3))}function w(){i.default.ajax({method:"post",url:o.ajaxurl,data:{action:"ep_cancel_index",nonce:o.epDash.nonce}})}function D(){i.default.ajax({method:"post",url:o.ajaxurl,data:{action:"ep_index",feature_sync:m,nonce:o.epDash.nonce}}).done(function(e){if("sync"===y){if(x=e.data.found_items,v=e.data.offset,e.data.sync_stack&&(g=e.data.sync_stack),e.data.current_sync_item&&(_=e.data.current_sync_item),g&&g.length)return y="sync",C(),void D();0!==e.data.found_items||e.data.start?(y="sync",C(),D()):(y="finished",C(),o.epDash.intro_shown||document.location.replace(o.epDash.ep_intro_url))}}).error(function(e){e&&e.status&&400<=parseInt(e.status)&&600>parseInt(e.status)&&(y="error",C(),w())})}c.on("click",".learn-more, .collapse",function(){(0,i.default)(this).parents(".ep-feature").toggleClass("show-full")}),c.on("click",".settings-button",function(){(0,i.default)(this).parents(".ep-feature").toggleClass("show-settings")}),c.on("click",".save-settings",function(e){if(e.preventDefault(),!(0,i.default)(this).hasClass("disabled")){var t=e.target.getAttribute("data-feature"),a=c.find(".ep-feature-"+t),n={};a.find(".setting-field").each(function(){var e=(0,i.default)(this).attr("type"),t=(0,i.default)(this).attr("data-field-name"),a=(0,i.default)(this).attr("value");"radio"===e?(0,i.default)(this).attr("checked")&&(n[t]=a):n[t]=a}),a.addClass("saving"),i.default.ajax({method:"post",url:o.ajaxurl,data:{action:"ep_save_feature",feature:t,nonce:o.epDash.nonce,settings:n}}).done(function(e){setTimeout(function(){a.removeClass("saving"),"1"===n.active?a.addClass("feature-active"):a.removeClass("feature-active"),e.data.reindex&&(y="initialsync",C(),(0,i.default)('[data-ep-notice="no-sync"], [data-ep-notice="auto-activate-sync"], [data-ep-notice="upgrade-sync"]').remove(),y="sync",a.addClass("feature-syncing"),m=t,D())},700)}).error(function(){setTimeout(function(){a.removeClass("saving"),a.removeClass("feature-active"),a.removeClass("feature-syncing")},700)})}}),o.epDash.index_meta?o.epDash.index_meta.wpcli_sync?(y="wpcli",C()):(v=o.epDash.index_meta.offset,x=o.epDash.index_meta.found_items,o.epDash.index_meta.feature_sync&&(m=o.epDash.index_meta.feature_sync),o.epDash.index_meta.current_sync_item&&(_=o.epDash.index_meta.current_sync_item),o.epDash.index_meta.site_stack&&(g=o.epDash.index_meta.sync_stack),g&&g.length?o.epDash.auto_start_index?(y="sync",history.pushState({},document.title,document.location.pathname+document.location.search.replace(/&do_sync/,"")),C(),D()):(y="pause",C()):0!==x||o.epDash.index_meta.start?o.epDash.auto_start_index?(y="sync",history.pushState({},document.title,document.location.pathname+document.location.search.replace(/&do_sync/,"")),C(),D()):(y="pause",C()):(y="finished",C())):o.epDash.auto_start_index&&(y="initialsync",C(),y="sync",history.pushState({},document.title,document.location.pathname+document.location.search.replace(/&do_sync/,"")),D()),l.on("click",function(){y="initialsync",C(),(0,i.default)('[data-ep-notice="no-sync"], [data-ep-notice="auto-activate-sync"], [data-ep-notice="upgrade-sync"]').remove(),y="sync",D()}),h.on("click",function(){y="pause",C()}),f.on("click",function(){y="sync",C(),D()}),p.on("click",function(){y="cancel",C(),w()})}]);
//# sourceMappingURL=dashboard.min.js.map
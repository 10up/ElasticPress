!function(){"use strict";var e={5251:function(e,t,s){var r=s(9196),a=60103;if(60107,"function"===typeof Symbol&&Symbol.for){var n=Symbol.for;a=n("react.element"),n("react.fragment")}var o=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,i=Object.prototype.hasOwnProperty,c={key:!0,ref:!0,__self:!0,__source:!0};function l(e,t,s){var r,n={},l=null,u=null;for(r in void 0!==s&&(l=""+s),void 0!==t.key&&(l=""+t.key),void 0!==t.ref&&(u=t.ref),t)i.call(t,r)&&!c.hasOwnProperty(r)&&(n[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===n[r]&&(n[r]=t[r]);return{$$typeof:a,type:e,key:l,ref:u,props:n,_owner:o.current}}t.jsx=l,t.jsxs=l},5893:function(e,t,s){e.exports=s(5251)},9196:function(e){e.exports=window.React}},t={};function s(r){var a=t[r];if(void 0!==a)return a.exports;var n=t[r]={exports:{}};return e[r](n,n.exports,s),n.exports}!function(){var e=window.wp.element,t=window.wp.hooks;var r={randomUUID:"undefined"!==typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};let a;const n=new Uint8Array(16);function o(){if(!a&&(a="undefined"!==typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!a))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return a(n)}const i=[];for(let e=0;e<256;++e)i.push((e+256).toString(16).slice(1));function c(e,t=0){return(i[e[t+0]]+i[e[t+1]]+i[e[t+2]]+i[e[t+3]]+"-"+i[e[t+4]]+i[e[t+5]]+"-"+i[e[t+6]]+i[e[t+7]]+"-"+i[e[t+8]]+i[e[t+9]]+"-"+i[e[t+10]]+i[e[t+11]]+i[e[t+12]]+i[e[t+13]]+i[e[t+14]]+i[e[t+15]]).toLowerCase()}var l=function(e,t,s){if(r.randomUUID&&!t&&!e)return r.randomUUID();const a=(e=e||{}).random||(e.rng||o)();if(a[6]=15&a[6]|64,a[8]=63&a[8]|128,t){s=s||0;for(let e=0;e<16;++e)t[s+e]=a[e];return t}return c(a)};const u=(s,r,a,n,o="")=>{const i=(0,e.useRef)(new AbortController),c=(0,e.useRef)(null),u=(0,e.useRef)(n);return(0,e.useCallback)((async e=>{const n=`${s}${r}?${e.toString()}`;i.current.abort(),i.current=new AbortController;const d={Accept:"application/json",Authorization:a},p=(e=>{const s=l().replaceAll("-","");return(0,t.applyFilters)("ep.requestId",e+s)})(o);return p&&(d["X-ElasticPress-Request-ID"]=p),c.current=fetch(n,{signal:i.current.signal,headers:d}).then((e=>(u.current&&!e.ok&&u.current(),e.json()))).catch((e=>{if("AbortError"!==e?.name&&!c.current)throw e})).finally((()=>{c.current=null})),c.current}),[s,r,a,o])},d=(e,t,s="")=>{const r=new URLSearchParams;return Object.entries(t).forEach((([t,a])=>{const n=s+t,o="undefined"!==typeof e[t]?((e,t,s=!0)=>{let r=null;switch(e&&t.type){case"number":case"string":r=e;break;case"numbers":case"strings":r=e.join(",")}return t.allowedValues&&(r=t.allowedValues.includes(r)?r:null),s&&null===r&&"undefined"!==typeof t.default&&(r=t.default),r})(e[t],a):null;null!==o&&r.set(n,o)})),r},p=(e,t="")=>{const s=new URLSearchParams(window.location.search);return Object.entries(e).reduce(((e,[r,a])=>{const n=s.get(t+r),o="undefined"!==typeof n?((e,t,s=!0)=>{let r=null;switch(e&&t.type){case"number":r=parseFloat(e,10)||null;break;case"numbers":r=decodeURIComponent(e).split(",").map((e=>parseFloat(e,10))).filter(Boolean);break;case"string":r=e.toString();break;case"strings":r=decodeURIComponent(e).split(",").map((e=>e.toString().trim()))}return t.allowedValues&&(r=t.allowedValues.includes(r)?r:null),s&&null===r&&"undefined"!==typeof t.default&&(r=t.default),r})(n,a,!1):null;return null!==o&&(e[r]=o),e}),{})},g=(e,t)=>{const s=new URL(window.location.href),r=Array.from(s.searchParams.keys());for(const t of r)t.startsWith(e)&&s.searchParams.delete(t);return t&&t.forEach(((e,t)=>{s.searchParams.set(t,e)})),s.toString()},f=(e,t)=>{const s={...e};return Object.entries(t).forEach((([e,t])=>{Object.hasOwnProperty.call(t,"default")||delete s[e]})),s};var m=(e,t)=>{const s={...e,isPoppingState:!1};switch(t.type){case"CLEAR_CONSTRAINTS":{const e=f(s.args,s.argsSchema);s.args=e,s.args.offset=0;break}case"CLEAR_RESULTS":s.aggregations={},s.searchResults=[],s.totalResults=0;break;case"SEARCH":s.args={...s.args,...t.args,offset:0},s.isOn=!0;break;case"SEARCH_FOR":{const e=f(s.args,s.argsSchema);s.args=e,s.args.search=t.searchTerm,s.args.offset=0,s.isOn=!0;break}case"SET_IS_LOADING":s.isLoading=t.isLoading;break;case"TURN_OFF":s.args={...s.args},s.isOn=!1;break;case"SET_RESULTS":{const{hits:{hits:e,total:r},aggregations:a,suggest:n}=t.response;s.isFirstSearch=!1;const o="number"===typeof r?r:r.value;s.aggregations=a,s.searchResults=e,s.searchTerm=s.args.search,s.totalResults=o,s.suggestedTerms=n?.ep_suggestion?.[0]?.options||[];break}case"NEXT_PAGE":s.args.offset+=s.args.per_page;break;case"PREVIOUS_PAGE":s.args.offset=Math.max(s.args.offset-s.args.per_page,0);break;case"POP_STATE":{const{isOn:e,args:r}=t.args;s.args=r,s.isOn=e,s.isPoppingState=!0;break}}return s},h=s(5893);const b=(0,e.createContext)(),w=({apiEndpoint:t,apiHost:s,authorization:r,requestIdBase:a,argsSchema:n,children:o,paramPrefix:i,onAuthError:c})=>{const l=(0,e.useMemo)((()=>i?p(n,i):{}),[n,i]),f=(0,e.useMemo)((()=>{const e=(e=>Object.entries(e).reduce(((e,[t,s])=>(Object.hasOwnProperty.call(s,"default")&&(e[t]=s.default),e)),{}))(n);return{...e,...l}}),[n,l]),w=(0,e.useMemo)((()=>Object.keys(l).length>0),[l]),_=u(s,t,r,c,a),[y,S]=(0,e.useReducer)(m,{aggregations:{},args:f,argsSchema:n,isLoading:!1,isOn:w,isPoppingState:!1,searchResults:[],totalResults:0,suggestedTerms:[],isFirstSearch:!0,searchTerm:""}),R=(0,e.useRef)(y);R.current=y;const E=(0,e.useCallback)((()=>{S({type:"CLEAR_CONSTRAINTS"})}),[]),v=(0,e.useCallback)((()=>{S({type:"CLEAR_RESULTS"})}),[]),k=(0,e.useCallback)((e=>{S({type:"SEARCH",args:e})}),[]),x=e=>{S({type:"SET_IS_LOADING",isLoading:e})},O=e=>{S({type:"SET_RESULTS",response:e})},C=(0,e.useCallback)((()=>{if("undefined"===typeof i)return;const{args:e,isOn:t}=R.current,s={args:e,isOn:t};if(window.history.state)if(t){const t=d(e,n,i),r=g(i,t);window.history.pushState(s,document.title,r)}else{const e=g(i);window.history.pushState(s,document.title,e)}else window.history.replaceState(s,document.title,window.location.href)}),[n,i]),T=(0,e.useCallback)((e=>{if("undefined"===typeof i)return;e.state&&Object.keys(e.state).length>0&&(e=>{S({type:"POP_STATE",args:e})})(e.state)}),[i]),j=(0,e.useCallback)((()=>(window.addEventListener("popstate",T),()=>{window.removeEventListener("popstate",T)})),[T]),P=(0,e.useCallback)((()=>{(async()=>{const{args:e,isOn:t,isPoppingState:s}=R.current;if(s||C(),!t)return;const r=d(e,n);x(!0);const a=await _(r);a&&(O(a),x(!1))})()}),[n,_,C]);(0,e.useEffect)(j,[j]),(0,e.useEffect)(P,[P,y.args,y.args.orderby,y.args.order,y.args.offset,y.args.search]);const{aggregations:A,args:U,isLoading:L,isOn:F,searchResults:I,searchTerm:N,totalResults:$,suggestedTerms:D,isFirstSearch:B}=R.current,V={aggregations:A,args:U,clearConstraints:E,clearResults:v,getUrlParamsFromArgs:d,getUrlWithParams:g,isLoading:L,isOn:F,searchResults:I,searchTerm:N,search:k,searchFor:e=>{S({type:"SEARCH_FOR",searchTerm:e})},setResults:O,nextPage:()=>{S({type:"NEXT_PAGE"})},previousPage:()=>{S({type:"PREVIOUS_PAGE"})},totalResults:$,turnOff:()=>{S({type:"TURN_OFF"})},suggestedTerms:D,isFirstSearch:B};return(0,h.jsx)(b.Provider,{value:V,children:o})};var _=window.wp.i18n,y=({children:t,id:s,isBusy:r,onSelect:a,...n})=>{const[o,i]=(0,e.useState)(!1),[c,l]=(0,e.useState)(!1),u=(0,e.useMemo)((()=>t[c]?t[c].props.id:null),[t,c]),d=(0,e.useMemo)((()=>t.length&&!r?(0,_.sprintf)((0,_._n)("%d suggestion available, use the up and down keys to browse and the enter key to open","%d suggestions available, use the up and down keys to browse and the enter key to open",t.length,"elasticpress"),t.length):""),[t,r]),p=(0,e.useMemo)((()=>!(!1===c||!t[c])&&t[c].props.value),[t,c]),g=(0,e.useCallback)((()=>!!t.length&&0),[t]),f=(0,e.useCallback)((()=>!!t.length&&t.length-1),[t]),m=(0,e.useCallback)((()=>{const e=g(t);if(!1===c)return e;const s=c+1;return t?.[s]?s:e}),[t,g,c]),b=(0,e.useCallback)((()=>{const e=f(t);if(!1===c)return e;const s=c-1;return t?.[s]?s:e}),[t,f,c]),w=(0,e.useCallback)((()=>{i(!!t.length)}),[t]),y=(0,e.useCallback)((e=>{e.currentTarget.contains(e.relatedTarget)||(l(!1),i(!1))}),[]),S=(0,e.useCallback)((e=>{const s=m(c,t),r=b(c,t);switch(e.key){case"ArrowDown":e.preventDefault(),l(s);break;case"ArrowUp":e.preventDefault(),l(r);break;case"Enter":!1!==p&&(e.preventDefault(),a(p,e));break;case"Escape":o&&(e.preventDefault(),l(!1),i(!1))}}),[t,m,b,o,a,c,p]);return(0,e.useEffect)((()=>{l(!1),i(!!t.length)}),[t]),(0,e.useEffect)((()=>{!1!==c&&i(!0)}),[c]),(0,h.jsxs)("div",{className:"ep-combobox",onBlur:y,children:[(0,h.jsx)("input",{"aria-activedescendant":u,"aria-autocomplete":"list","aria-controls":s,"aria-describedby":`${s}-description`,"aria-expanded":!r&&o,autoComplete:"off",className:"ep-combobox__input",onFocus:w,onKeyDown:S,role:"combobox",...n}),(0,h.jsx)("div",{id:`${s}-description`,className:"screen-reader-text",children:d}),(0,h.jsx)("ul",{id:s,role:"listbox",className:"ep-combobox__list",children:t.map(((e,t)=>{const{id:s,value:r}=e.props;return(0,h.jsx)("li",{"aria-selected":c===t,className:"ep-combobox__option",onClick:e=>{a(r,e)},role:"option",tabIndex:"-1",children:e},s)}))})]})},S=window.wp.date,R=({dateFormat:e,hit:t,statusLabels:s,timeFormat:r})=>{const{meta:{_billing_email:[{value:a}={}]=[],_billing_first_name:[{value:n}={}]=[],_billing_last_name:[{value:o}={}]=[],_items:[{value:i}={}]=[]},post_date_gmt:c,post_id:l,post_status:u}=t._source,d=`${c.split(" ").join("T")}+00:00`,p=(0,S.dateI18n)(e,d),g=(0,S.dateI18n)(r,d),f=i?i.split("|").length:0,m=`status-${u.substring(3)}`,b=s[u];return(0,h.jsxs)("div",{className:"ep-suggestion",children:[(0,h.jsxs)("div",{className:"ep-suggestion__header",children:[(0,h.jsxs)("div",{className:"ep-suggestion__title",children:[`#${l}`," ",n," ",o]}),a]}),(0,h.jsxs)("div",{className:"ep-suggestion__footer",children:[(0,h.jsxs)("div",{className:"ep-suggestion__details",children:[(0,_.sprintf)((0,_._n)("%1$d item @ %2$s","%1$d items @ %2$s",f,"elasticpress"),f,g),(0,h.jsx)("br",{}),p]}),b&&(0,h.jsx)("div",{className:`order-status ${m} tips`,children:(0,h.jsx)("span",{children:b})})]})]})},E=({adminUrl:t,dateFormat:s,statusLabels:r,timeFormat:a,value:n,...o})=>{const{clearResults:i,isLoading:c,searchFor:l,searchResults:u}=(0,e.useContext)(b),d=((t,s)=>{const r=(0,e.useRef)(null);return(0,e.useCallback)(((...e)=>{window.clearTimeout(r.current),r.current=window.setTimeout((()=>{t(...e)}),s)}),[t,s])})((e=>{l(e)}),300),p=(0,e.useCallback)((e=>{const{value:t}=e.target;t?d(e.target.value):i()}),[i,d]),g=(0,e.useCallback)(((e,s)=>{window.open(`${t}?post=${e}&action=edit`,s.metaKey?"_blank":"_self")}),[t]);return(0,h.jsx)(y,{defaultValue:n,id:"ep-orders-suggestions",isBusy:c,onInput:p,onSelect:g,...o,children:u.map((e=>{const{_id:t,_source:{post_id:n}}=e;return(0,h.jsx)(R,{dateFormat:s,id:`ep-order-suggestion-${t}`,hit:e,statusLabels:r,timeFormat:a,value:n},t)}))})};const{adminUrl:v,apiEndpoint:k,apiHost:x,credentialsApiUrl:O,credentialsNonce:C,argsSchema:T,dateFormat:j,statusLabels:P,timeFormat:A,requestIdBase:U}=window.epWooCommerceOrderSearch,L=({children:t})=>{const[s,r]=(0,e.useState)(null),a=(0,e.useRef)(!1);return(0,e.useEffect)((()=>{fetch(O,{headers:{"X-WP-Nonce":C}}).then((e=>e.text())).then(r)}),[]),s?(0,h.jsx)(w,{apiEndpoint:k,apiHost:x,argsSchema:T,authorization:`Basic ${s}`,requestIdBase:U,onAuthError:()=>{a.current?r(null):(fetch(O,{headers:{"X-WP-Nonce":C},method:"POST"}).then((e=>e.text())).then(r),a.current=!0)},children:t}):null};(async()=>{const t=document.getElementById("posts-filter").s;if(!t)return;const s=Object.values(t.attributes).reduce(((e,t)=>({...e,[t.name]:t.value})),{}),r=document.createElement("div");if(r.setAttribute("id","ep-woocommerce-order-search"),t.replaceWith(r),"function"===typeof e.createRoot){(0,e.createRoot)(r).render((0,h.jsx)(L,{children:(0,h.jsx)(E,{adminUrl:v,dateFormat:j,statusLabels:P,timeFormat:A,...s})}))}else(0,e.render)((0,h.jsx)(L,{children:(0,h.jsx)(E,{adminUrl:v,dateFormat:j,statusLabels:P,timeFormat:A,...s})}),r)})()}()}();
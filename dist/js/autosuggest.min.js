!function(e){var t={};function s(o){if(t[o])return t[o].exports;var r=t[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,s),r.l=!0,r.exports}s.m=e,s.c=t,s.d=function(e,t,o){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},s.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(s.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)s.d(o,r,function(t){return e[t]}.bind(null,r));return o},s.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="",s(s.s=175)}({175:function(e,t,s){"use strict";var o,r=s(3),a=(o=r)&&o.__esModule?o:{default:o},n=s(4);function u(e,t){if("navigate"===n.epas.action)return s=t.dataset.url,window.location.href=s;var s;!function(e,t){e.val(t)}(e,t.innerText),function(e){e.closest("form").submit()}(e)}function i(e,t,s,o,r){"all"!==t&&void 0!==t&&""!==t||(t="all"),""===s&&(s="publish");var a={from:0,size:10,sort:[{_score:{order:"desc"}}],query:{},post_filter:{}},u=[];return"string"==typeof t&&"all"!==t&&(t=t.split(",")),t.map(function(t){var s;s=r[t];for(var o=[],a=[],n=Object.keys(s),i=0;i<n.length;i++){var l=n[i],c=s[l];if(!0===c.enabled){var d=void 0;"post_title"===l&&(l="post_title.suggest"),d=0!==c.weight?l+"^"+c.weight:l,o.push(d),void 0!==c.fuzziness&&!1===c.fuzziness||a.push(d)}}u.push({bool:{must:[{bool:{should:[{multi_match:{query:e,type:"phrase",fields:o,boost:4}},{multi_match:{query:e,fields:o,boost:2,fuzziness:0,operator:"and"}},{multi_match:{query:e,fields:a,fuzziness:1}}]}}],filter:[{match:{"post_type.raw":t}}]}})}),void 0!==n.epas.dateDecay&&!0===n.epas.dateDecay.enabled?a.query={function_score:{query:{bool:{should:u}},functions:[{exp:{post_date_gmt:{scale:"14d",decay:.25,offset:"7d"}}}],score_mode:"avg",boost_mode:"sum"}}:a.query={bool:{should:u}},"string"==typeof s&&(s=s.split(",")),a.post_filter={bool:{must:[{terms:{post_status:s}}]}},Object.values(n.epas.mimeTypes).length&&a.post_filter.bool.must.push({terms:{post_mime_type:Object.values(n.epas.mimeTypes)}}),"all"!==t&&a.post_filter.bool.must.push({terms:{"post_type.raw":t}}),a}function l(e,t){return a.default.support.cors=!0,a.default.ajax({url:n.epas.endpointUrl,type:"post",dataType:"json",crossDomain:!0,contentType:"application/json; charset=utf-8",headers:{"EP-Search-Term":t},data:JSON.stringify(e)})}function c(e){return e.replace(/\\([\s\S])|(")/g,"&quot;")}function d(e,t){var s=void 0,o="",r=t.closest(".ep-autosuggest-container").find(".ep-autosuggest"),n=r.find(".autosuggest-list");for(n.empty(),(0,a.default)(".autosuggest-item").off(),0<e.length?r.show():r.hide(),s=0;s<e.length;++s){var i=e[s].text,l=e[s].url;o+='<li><span class="autosuggest-item" data-search="'+c(i)+'" data-url="'+l+'">'+c(i)+"</span></li>"}(0,a.default)(o).appendTo(n),(0,a.default)(".autosuggest-item").on("click",function(e){u(t,e.target)}),t.off("keydown"),t.on("keydown",function(e){if(38===e.keyCode||40===e.keyCode||13===e.keyCode){var s=t.closest(".ep-autosuggest-container").find(".autosuggest-list li"),o=s.filter(".selected"),r=void 0;switch(e.keyCode){case 38:r=o.prev();break;case 40:s.hasClass("selected")?r=o.next():(s.first().addClass("selected"),r=s.first());break;case 13:return s.hasClass("selected")?(u(t,o.children("span").get(0)),!1):void 0}return r.is("li")?(o.removeClass("selected"),r.addClass("selected")):s.removeClass("selected"),38!==e.keyCode&&void 0}})}function f(){(0,a.default)(".autosuggest-list").empty(),(0,a.default)(".ep-autosuggest").hide()}if(n.epas.endpointUrl&&""!==n.epas.endpointUrl){var p=(0,a.default)('.ep-autosuggest, input[type="search"], .search-field, '+n.epas.selector),g=(0,a.default)('<div class="ep-autosuggest"><ul class="autosuggest-list"></ul></div>');p.each(function(e,t){var s=(0,a.default)('<div class="ep-autosuggest-container"></div>'),o=(0,a.default)(t);o.attr("autocomplete","off"),s.insertAfter(o);var r=o.siblings("label");o.closest("form").find(".ep-autosuggest-container").append(r).append(o),g.clone().insertAfter(o),o.trigger("elasticpress.input.moved")}),g.css({top:p.outerHeight()-1,"background-color":p.css("background-color")}),(0,a.default)(p).each(function(e,t){(0,a.default)(t).on("keyup keydown keypress",function(e){38!==e.keyCode&&40!==e.keyCode||e.preventDefault(),27===e.keyCode&&f()})}),p.each(function(e,t){var s=(0,a.default)(t);s.on("keyup",function(e,t){var s=this,o=arguments,r=null;return function(){var a=s,n=o;window.clearTimeout(r),r=window.setTimeout(function(){e.apply(a,n)},t)}}(function(e){if(38!==e.keyCode&&40!==e.keyCode&&13!==e.keyCode&&27!==e.keyCode){var t=s.val(),o=n.epas.postTypes,r=n.epas.postStatus,u=(n.epas.searchFields,Object.assign({},n.epas.weightingDefaults,n.epas.weighting));2<=t.length?l(i(t,o,r,0,u),t).done(function(e){if(0<e._shards.successful){var o={},r=[],n=function(e,t){t=t.toLowerCase();var s={};e=e.filter(function(e){var o=!0;return void 0!==e._source.terms&&void 0!==e._source.terms.ep_custom_result&&e._source.terms.ep_custom_result.map(function(r){r.name.toLowerCase()===t&&(s[r.term_order]=e,o=!1)}),o});var o={};return Object.keys(s).sort().map(function(e){o[e]=s[e]}),0<Object.keys(o).length&&Object.keys(o).map(function(t){var s=o[t];e.splice(t-1,0,s)}),e}(e.hits.hits,t);a.default.each(n,function(e,t){var s=t._source.post_title,a=t._source.permalink,n=t._source.post_id;o[n]||(o[n]=!0,r.push({text:s,url:a}))}),0===r.length?f():d(r,s)}else f()}):0===t.length&&f()}},200))}),window.epasAPI={hideAutosuggestBox:f,updateAutosuggestBox:d,esSearch:l,buildSearchQuery:i}}},3:function(e,t){e.exports=jQuery},4:function(e,t){e.exports=window}});
//# sourceMappingURL=autosuggest.min.js.map
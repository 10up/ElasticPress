!function(e){var t={};function o(s){if(t[s])return t[s].exports;var r=t[s]={i:s,l:!1,exports:{}};return e[s].call(r.exports,r,r.exports,o),r.l=!0,r.exports}o.m=e,o.c=t,o.d=function(e,t,s){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(o.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)o.d(s,r,function(t){return e[t]}.bind(null,r));return s},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o(o.s=47)}({0:function(e,t){e.exports=jQuery},47:function(e,t,o){"use strict";var s,r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n=o(0),u=(s=n)&&s.__esModule?s:{default:s},a=o(6);function i(e,t){if("navigate"===a.epas.action)return o=t.dataset.url,window.location.href=o;var o;!function(e,t){e.val(t)}(e,t.innerText),function(e){e.closest("form").submit()}(e)}function l(e,t,o,s){"all"!==t&&void 0!==t&&""!==t||(t="all"),""===o&&(o="publish");var n={from:0,size:10,sort:[{_score:{order:"desc"}}],query:{},post_filter:{}},u=[];return"string"==typeof t&&"all"!==t&&(t=t.split(",")),t.map(function(t){var o,r={};s.forEach(function(e){r[e]=!0});var n=Object.assign({},r);for(var i in o=a.epas.weighting[t]||{}){var l=o[i].weight;0===parseInt(l)&&(delete r[i],delete n[i]),1<parseInt(l)&&("post_title"===i&&(i="post_title.suggest"),1<(l=parseInt(l)-1)?(r[i+"^"+l]=!0,void 0!==o[i].fuzziness&&!1===o[i].fuzziness||(n[i+"^"+l]=!0)):(r[i]=!0,void 0!==o[i].fuzziness&&!1===o[i].fuzziness||(n[i]=!0)))}u.push({bool:{must:[{bool:{should:[{multi_match:{query:e,type:"phrase",fields:Object.keys(r),boost:4}},{multi_match:{query:e,fields:Object.keys(r),boost:2,fuzziness:0,operator:"and"}},{multi_match:{query:e,fields:Object.keys(n),fuzziness:1}}]}}],filter:[{match:{"post_type.raw":t}}]}})}),void 0!==r(a.epas.dateDecay)&&!0===a.epas.dateDecay.enabled?n.query={function_score:{query:{bool:{should:u}},functions:[{exp:{post_date_gmt:{scale:"14d",decay:.25,offset:"7d"}}}],score_mode:"avg",boost_mode:"sum"}}:n.query={bool:{should:u}},"string"==typeof o&&(o=o.split(",")),n.post_filter={bool:{must:[{terms:{post_status:o}}]}},Object.values(a.epas.mimeTypes).length&&n.post_filter.bool.must.push({terms:{post_mime_type:Object.values(a.epas.mimeTypes)}}),"all"!==t&&n.post_filter.bool.must.push({terms:{"post_type.raw":t}}),n}function c(e,t){return u.default.support.cors=!0,u.default.ajax({url:a.epas.endpointUrl,type:"post",dataType:"json",crossDomain:!0,contentType:"application/json; charset=utf-8",headers:{"EP-Search-Term":t},data:JSON.stringify(e)})}function f(e){return e.replace(/\\([\s\S])|(")/g,"&quot;")}function d(e,t){var o=void 0,s="",r=t.closest(".ep-autosuggest-container").find(".ep-autosuggest"),n=r.find(".autosuggest-list");for(n.empty(),(0,u.default)(".autosuggest-item").off(),0<e.length?r.show():r.hide(),o=0;o<e.length;++o){var a=e[o].text,l=e[o].url;s+='<li><span class="autosuggest-item" data-search="'+f(a)+'" data-url="'+l+'">'+f(a)+"</span></li>"}(0,u.default)(s).appendTo(n),(0,u.default)(".autosuggest-item").on("click",function(e){i(t,e.target)}),t.off("keydown"),t.on("keydown",function(e){if(38===e.keyCode||40===e.keyCode||13===e.keyCode){var o=t.closest(".ep-autosuggest-container").find(".autosuggest-list li"),s=o.filter(".selected"),r=void 0;switch(e.keyCode){case 38:r=s.prev();break;case 40:o.hasClass("selected")?r=s.next():(o.first().addClass("selected"),r=o.first());break;case 13:return o.hasClass("selected")?(i(t,s.children("span").get(0)),!1):void 0}return r.is("li")?(s.removeClass("selected"),r.addClass("selected")):o.removeClass("selected"),38!==e.keyCode&&void 0}})}function p(){(0,u.default)(".autosuggest-list").empty(),(0,u.default)(".ep-autosuggest").hide()}if(a.epas.endpointUrl&&""!==a.epas.endpointUrl){var y=(0,u.default)('.ep-autosuggest, input[type="search"], .search-field, '+a.epas.selector),g=(0,u.default)('<div class="ep-autosuggest"><ul class="autosuggest-list"></ul></div>');y.each(function(e,t){var o=(0,u.default)('<div class="ep-autosuggest-container"></div>'),s=(0,u.default)(t);s.attr("autocomplete","off"),o.insertAfter(s);var r=s.siblings("label");s.closest("form").find(".ep-autosuggest-container").append(r).append(s),g.clone().insertAfter(s),s.trigger("elasticpress.input.moved")}),g.css({top:y.outerHeight()-1,"background-color":y.css("background-color")}),(0,u.default)(y).each(function(e,t){(0,u.default)(t).on("keyup keydown keypress",function(e){38!==e.keyCode&&40!==e.keyCode||e.preventDefault(),27===e.keyCode&&p()})}),y.each(function(e,t){var o=(0,u.default)(t);o.on("keyup",function(e,t){var o=this,s=arguments,r=null;return function(){var n=o,u=s;window.clearTimeout(r),r=window.setTimeout(function(){e.apply(n,u)},t)}}(function(e){if(38!==e.keyCode&&40!==e.keyCode&&13!==e.keyCode&&27!==e.keyCode){var t=o.val(),s=a.epas.postTypes,r=a.epas.postStatus,n=a.epas.searchFields;2<=t.length?c(l(t,s,r,n),t).done(function(e){if(0<e._shards.successful){var s={},r=[],n=function(e,t){t=t.toLowerCase();var o={};e=e.filter(function(e){var s=!0;return void 0!==e._source.terms&&void 0!==e._source.terms.ep_custom_result&&e._source.terms.ep_custom_result.map(function(r){r.name.toLowerCase()===t&&(o[r.term_order]=e,s=!1)}),s});var s={};return Object.keys(o).sort().map(function(e){s[e]=o[e]}),0<Object.keys(s).length&&Object.keys(s).map(function(t){var o=s[t];e.splice(t-1,0,o)}),e}(e.hits.hits,t);u.default.each(n,function(e,t){var o=t._source.post_title,n=t._source.permalink,u=t._source.post_id;s[u]||(s[u]=!0,r.push({text:o,url:n}))}),0===r.length?p():d(r,o)}else p()}):0===t.length&&p()}},200))}),window.epasAPI={hideAutosuggestBox:p,updateAutosuggestBox:d,esSearch:c,buildSearchQuery:l}}},6:function(e,t){e.exports=window}});
//# sourceMappingURL=autosuggest.min.js.map
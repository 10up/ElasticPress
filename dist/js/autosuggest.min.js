!function(e){var t={};function s(o){if(t[o])return t[o].exports;var a=t[o]={i:o,l:!1,exports:{}};return e[o].call(a.exports,a,a.exports,s),a.l=!0,a.exports}s.m=e,s.c=t,s.d=function(e,t,o){s.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:o})},s.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},s.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="",s(s.s=5)}([function(e,t){e.exports=jQuery},function(e,t){e.exports=window},,,,function(e,t,s){"use strict";var o,a=s(0),n=(o=a)&&o.__esModule?o:{default:o},u=s(1);function r(e,t){if("navigate"===u.epas.action)return s=t.dataset.url,window.location.href=s;var s;!function(e,t){e.val(t)}(e,t.innerText),function(e){e.closest("form").submit()}(e)}function i(e,t,s,o){"all"!==t&&void 0!==t&&""!==t||(t="all"),""===s&&(t="publish");var a={sort:[{_score:{order:"desc"}}],query:{multi_match:{query:e,fields:o}}};return"string"==typeof t&&"all"!==t&&(t=t.split(",")),"string"==typeof s&&(s=s.split(",")),a.post_filter={bool:{must:[{terms:{post_status:s}}]}},"all"!==t&&a.post_filter.bool.must.push({terms:{"post_type.raw":t}}),a}function l(e){return n.default.support.cors=!0,n.default.ajax({url:u.epas.endpointUrl,type:"post",dataType:"json",crossDomain:!0,contentType:"application/json; charset=utf-8",data:JSON.stringify(e)})}function c(e,t){var s,o,a=t.closest(".ep-autosuggest-container").find(".ep-autosuggest"),u=a.find(".autosuggest-list");for(u.empty(),(0,n.default)(".autosuggest-item").off(),e.length>0?a.show():a.hide(),s=0;s<e.length;++s){var i=e[s].text;o='<li><span class="autosuggest-item" data-search="'+i+'" data-url="'+e[s].url+'">'+i+"</span></li>",(0,n.default)(o).appendTo(u)}(0,n.default)(".autosuggest-item").on("click",function(e){r(t,e.target)}),t.off("keydown"),t.on("keydown",function(e){if(38===e.keyCode||40===e.keyCode||13===e.keyCode){var s,o=t.closest(".ep-autosuggest-container").find(".autosuggest-list li"),a=o.filter(".selected");switch(e.keyCode){case 38:s=a.prev();break;case 40:o.hasClass("selected")?s=a.next():(o.first().addClass("selected"),s=o.first());break;case 13:return o.hasClass("selected")?(r(t,a.children("span").get(0)),!1):void 0}return s.is("li")?(a.removeClass("selected"),s.addClass("selected")):o.removeClass("selected"),38!==e.keyCode&&void 0}})}function d(){(0,n.default)(".autosuggest-list").empty(),(0,n.default)(".ep-autosuggest").hide()}if(u.epas.endpointUrl&&""!==u.epas.endpointUrl){var f=(0,n.default)('.ep-autosuggest, input[type="search"], .search-field'),p=(0,n.default)('<div class="ep-autosuggest"><ul class="autosuggest-list"></ul></div>');f.each(function(e,t){var s=(0,n.default)('<div class="ep-autosuggest-container"></div>'),o=(0,n.default)(t);o.attr("autocomplete","off"),s.insertAfter(o);var a=o.siblings("label");o.closest("form").find(".ep-autosuggest-container").append(a).append(o),p.clone().insertAfter(o),o.trigger("elasticpress.input.moved")}),p.css({top:f.outerHeight()-1,"background-color":f.css("background-color")}),(0,n.default)(f).each(function(e,t){(0,n.default)(t).on("keyup keydown keypress",function(e){38!==e.keyCode&&40!==e.keyCode||e.preventDefault(),27===e.keyCode&&d()})}),f.each(function(e,t){var s=(0,n.default)(t);s.on("keyup",function(e,t){var s=this,o=arguments,a=null;return function(){var n=s,u=o;window.clearTimeout(a),a=window.setTimeout(function(){e.apply(n,u)},t)}}(function(e){if(38!==e.keyCode&&40!==e.keyCode&&13!==e.keyCode&&27!==e.keyCode){var t=s.val(),o=u.epas.postType,a=u.epas.postStatus,r=u.epas.searchFields;t.length>=2?l(i(t,o,a,r)).done(function(e){if(e._shards.successful>0){var t={},o=[];n.default.each(e.hits.hits,function(e,s){var a=s._source.post_title,n=s._source.permalink,u=s._source.post_id;t[u]||(t[u]=!0,o.push({text:a,url:n}))}),0===o.length?d():c(o,s)}else d()}):0===t.length&&d()}},200))}),window.epasAPI={hideAutosuggestBox:d,updateAutosuggestBox:c,esSearch:l,buildSearchQuery:i}}}]);
//# sourceMappingURL=autosuggest.min.js.map
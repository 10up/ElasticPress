!function(e){var t={};function s(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,s),o.l=!0,o.exports}s.m=e,s.c=t,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},s.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)s.d(n,o,function(t){return e[t]}.bind(null,o));return n},s.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="",s(s.s=3)}([function(e,t){e.exports=jQuery},function(e,t){e.exports=window},,function(e,t,s){"use strict";var n,o=s(0),a=(n=o)&&n.__esModule?n:{default:n},r=s(1);function u(e,t){if("navigate"===r.epas.action)return s=t.dataset.url,window.location.href=s;var s;!function(e,t){e.val(t)}(e,t.innerText),function(e){e.closest("form").submit()}(e)}function i(e){var t=r.epas.searchQuery;return t=JSON.stringify(t).replace(/{{searchText}}/g,e),t=JSON.parse(t)}function l(e){return a.default.support.cors=!0,a.default.ajax({url:r.epas.endpointUrl,type:"post",dataType:"json",crossDomain:!0,contentType:"application/json; charset=utf-8",data:JSON.stringify(e)})}function c(e,t){var s,n,o=t.closest(".ep-autosuggest-container").find(".ep-autosuggest"),r=o.find(".autosuggest-list");for(r.empty(),(0,a.default)(".autosuggest-item").off(),0<e.length?o.show():o.hide(),s=0;s<e.length;++s){var i=e[s].text;n='<li><span class="autosuggest-item" data-search="'+i+'" data-url="'+e[s].url+'">'+i+"</span></li>",(0,a.default)(n).appendTo(r)}(0,a.default)(".autosuggest-item").on("click",function(e){u(t,e.target)}),t.off("keydown"),t.on("keydown",function(e){if(38===e.keyCode||40===e.keyCode||13===e.keyCode){var s,n=t.closest(".ep-autosuggest-container").find(".autosuggest-list li"),o=n.filter(".selected");switch(e.keyCode){case 38:s=o.prev();break;case 40:n.hasClass("selected")?s=o.next():(n.first().addClass("selected"),s=n.first());break;case 13:return n.hasClass("selected")?(u(t,o.children("span").get(0)),!1):void 0}return s.is("li")?(o.removeClass("selected"),s.addClass("selected")):n.removeClass("selected"),38!==e.keyCode&&void 0}})}function d(){(0,a.default)(".autosuggest-list").empty(),(0,a.default)(".ep-autosuggest").hide()}if(r.epas.endpointUrl&&""!==r.epas.endpointUrl){var f=(0,a.default)('.ep-autosuggest, input[type="search"], .search-field, '+r.epas.selector),p=(0,a.default)('<div class="ep-autosuggest"><ul class="autosuggest-list"></ul></div>');f.each(function(e,t){var s=(0,a.default)('<div class="ep-autosuggest-container"></div>'),n=(0,a.default)(t);n.attr("autocomplete","off"),s.insertAfter(n);var o=n.siblings("label");n.closest("form").find(".ep-autosuggest-container").append(o).append(n),p.clone().insertAfter(n),n.trigger("elasticpress.input.moved")}),p.css({top:f.outerHeight()-1,"background-color":f.css("background-color")}),(0,a.default)(f).each(function(e,t){(0,a.default)(t).on("keyup keydown keypress",function(e){38!==e.keyCode&&40!==e.keyCode||e.preventDefault(),27===e.keyCode&&d()})}),f.each(function(e,t){var s=(0,a.default)(t);s.on("keyup",function(e,t){var s=this,n=arguments,o=null;return function(){var a=s,r=n;window.clearTimeout(o),o=window.setTimeout(function(){e.apply(a,r)},t)}}(function(e){if(38!==e.keyCode&&40!==e.keyCode&&13!==e.keyCode&&27!==e.keyCode){var t=s.val();r.epas.postType,r.epas.postStatus,r.epas.searchFields;2<=t.length?l(i(t)).done(function(e){if(0<e._shards.successful){var t={},n=[];a.default.each(e.hits.hits,function(e,s){var o=s._source.post_title,a=s._source.permalink,r=s._source.post_id;t[r]||(t[r]=!0,n.push({text:o,url:a}))}),0===n.length?d():c(n,s)}else d()}):0===t.length&&d()}},200))}),window.epasAPI={hideAutosuggestBox:d,updateAutosuggestBox:c,esSearch:l,buildSearchQuery:i}}}]);
//# sourceMappingURL=autosuggest.min.js.map
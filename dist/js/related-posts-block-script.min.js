!function(){"use strict";var e={5251:function(e,t,s){var r=s(9196),n=60103;if(60107,"function"===typeof Symbol&&Symbol.for){var o=Symbol.for;n=o("react.element"),o("react.fragment")}var i=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l=Object.prototype.hasOwnProperty,a={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,s){var r,o={},c=null,p=null;for(r in void 0!==s&&(c=""+s),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(p=t.ref),t)l.call(t,r)&&!a.hasOwnProperty(r)&&(o[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===o[r]&&(o[r]=t[r]);return{$$typeof:n,type:e,key:c,ref:p,props:o,_owner:i.current}}t.jsx=c,t.jsxs=c},5893:function(e,t,s){e.exports=s(5251)},9196:function(e){e.exports=window.React}},t={};function s(r){var n=t[r];if(void 0!==n)return n.exports;var o=t[r]={exports:{}};return e[r](o,o.exports,s),o.exports}!function(){var e=window.wp.blocks,t=window.wp.blockEditor,r=window.wp.components,n=window.wp.element,o=window.wp.i18n,i=window.wp.url,l=s(5893);class a extends n.Component{constructor(e){super(e),this.state={posts:!1}}componentDidMount(){const{context:{postId:e=0}={}}=this.props;wp.apiFetch({path:(0,i.addQueryArgs)(`/wp/v2/posts/${e}/related`,{number:100})}).then((e=>{this.setState({posts:e})})).catch((()=>{this.setState({posts:!1})}))}render(){const{attributes:{alignment:e,number:s},setAttributes:i,className:a}=this.props,{posts:c}=this.state,p=c.length>s?c.slice(0,s):c;return(0,l.jsxs)(n.Fragment,{children:[(0,l.jsx)(t.BlockControls,{children:(0,l.jsx)(t.AlignmentToolbar,{value:e,onChange:e=>i({alignment:e})})}),(0,l.jsx)(t.InspectorControls,{children:(0,l.jsx)(r.PanelBody,{title:(0,o.__)("Related Post Settings","elasticpress"),children:(0,l.jsx)(r.QueryControls,{numberOfItems:s,onNumberOfItemsChange:e=>i({number:e})})})}),(0,l.jsx)("div",{className:a,children:!1===p||0===p.length?(0,l.jsx)(r.Placeholder,{icon:"admin-post",label:(0,o.__)("Related Posts","elasticpress"),children:!1===c?(0,l.jsx)(r.Spinner,{}):(0,o.__)("No related posts yet.","elasticpress")}):(0,l.jsx)("ul",{style:{textAlign:e},children:p.map((e=>{const t=e.title.rendered.trim();return(0,l.jsx)("li",{children:(0,l.jsx)("a",{href:e.link,children:t?(0,l.jsx)(n.RawHTML,{children:t}):(0,o.__)("(Untitled)","elasticpress")})},e.id)}))})})]})}}var c=a,p=JSON.parse('{"$schema":"https://schemas.wp.org/trunk/block.json","apiVersion":1,"title":"Related Posts (ElasticPress)","textdomain":"elasticpress","name":"elasticpress/related-posts","category":"widgets","attributes":{"alignment":{"type":"string","default":"none"},"number":{"type":"number","default":5}},"supports":{"align":true},"usesContext":["postId"],"editorScript":"file:/../../../../dist/js/related-posts-block-script.min.js","style":"file:/../../../../dist/css/related-posts-block-styles.min.css"}'),d={from:[{type:"block",blocks:["core/legacy-widget"],isMatch:({idBase:e})=>"ep-related-posts"===e,transform:({instance:t})=>{const{title:s=null,num_posts:r}=t.raw;return s?[(0,e.createBlock)("core/heading",{content:s}),(0,e.createBlock)("elasticpress/related-posts",{number:r})]:(0,e.createBlock)("elasticpress/related-posts",{number:r})}}]};(0,e.registerBlockType)(p,{edit:e=>(0,l.jsx)(c,{...e}),save:()=>{},transforms:d})}()}();
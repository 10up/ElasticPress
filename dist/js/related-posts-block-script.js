!function(){"use strict";var e={5251:function(e,t,r){var s=r(9196),n=60103;if(60107,"function"===typeof Symbol&&Symbol.for){var o=Symbol.for;n=o("react.element"),o("react.fragment")}var l=s.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,i=Object.prototype.hasOwnProperty,a={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,r){var s,o={},c=null,p=null;for(s in void 0!==r&&(c=""+r),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(p=t.ref),t)i.call(t,s)&&!a.hasOwnProperty(s)&&(o[s]=t[s]);if(e&&e.defaultProps)for(s in t=e.defaultProps)void 0===o[s]&&(o[s]=t[s]);return{$$typeof:n,type:e,key:c,ref:p,props:o,_owner:l.current}}t.jsx=c,t.jsxs=c},5893:function(e,t,r){e.exports=r(5251)},9196:function(e){e.exports=window.React}},t={};function r(s){var n=t[s];if(void 0!==n)return n.exports;var o=t[s]={exports:{}};return e[s](o,o.exports,r),o.exports}r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,{a:t}),t},r.d=function(e,t){for(var s in t)r.o(t,s)&&!r.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){var e=window.wp.blocks,t=window.wp.apiFetch,s=r.n(t),n=window.wp.blockEditor,o=window.wp.components,l=window.wp.element,i=window.wp.i18n,a=window.wp.url,c=r(5893);var p=({attributes:e,className:t,context:r,setAttributes:p})=>{const{alignment:d,number:u}=e,[f,m]=(0,l.useState)(!1),w=f.length>u?f.slice(0,u):f;return(0,l.useEffect)((()=>{const{postId:e=0}=r;s()({path:(0,a.addQueryArgs)(`/wp/v2/posts/${e}/related`,{number:100})}).then((e=>{m(e)})).catch((()=>{m(!1)}))}),[r]),(0,c.jsxs)(l.Fragment,{children:[(0,c.jsx)(n.BlockControls,{children:(0,c.jsx)(n.AlignmentToolbar,{value:d,onChange:e=>p({alignment:e})})}),(0,c.jsx)(n.InspectorControls,{children:(0,c.jsx)(o.PanelBody,{title:(0,i.__)("Related Post Settings","elasticpress"),children:(0,c.jsx)(o.QueryControls,{numberOfItems:u,onNumberOfItemsChange:e=>p({number:e})})})}),(0,c.jsx)("div",{className:t,children:!1===w||0===w.length?(0,c.jsx)(o.Placeholder,{icon:"admin-post",label:(0,i.__)("Related Posts","elasticpress"),children:!1===f?(0,c.jsx)(o.Spinner,{}):(0,i.__)("No related posts yet.","elasticpress")}):(0,c.jsx)("ul",{style:{textAlign:d},children:w.map((e=>{const t=e.title.rendered.trim();return(0,c.jsx)("li",{children:(0,c.jsx)("a",{href:e.link,onClick:e=>e.preventDefault(),children:t?(0,c.jsx)(l.RawHTML,{children:t}):(0,i.__)("(Untitled)","elasticpress")})},e.id)}))})})]})},d=JSON.parse('{"$schema":"https://schemas.wp.org/trunk/block.json","apiVersion":1,"title":"Related Posts (ElasticPress)","textdomain":"elasticpress","name":"elasticpress/related-posts","category":"widgets","attributes":{"alignment":{"type":"string","default":"none"},"number":{"type":"number","default":5}},"supports":{"align":true},"usesContext":["postId"],"editorScript":"ep-related-posts-block-script","style":"file:/../../../../dist/css/related-posts-block-styles.css"}'),u={from:[{type:"block",blocks:["core/legacy-widget"],isMatch:({idBase:e})=>"ep-related-posts"===e,transform:({instance:t})=>{const{title:r=null,num_posts:s}=t.raw;return r?[(0,e.createBlock)("core/heading",{content:r}),(0,e.createBlock)("elasticpress/related-posts",{number:s})]:(0,e.createBlock)("elasticpress/related-posts",{number:s})}}]};(0,e.registerBlockType)(d,{edit:e=>(0,c.jsx)(p,{...e}),save:()=>{},transforms:u})}()}();
name: Build with vendor (test)

on:
  pull_request:
    branches:
      - develop
      - '[0-9].[0-9x]*' # Version branches: 4.x.x, 4.1.x, 5.x

jobs:
  build:
    uses: ./.github/workflows/build-release.yml

  wordpress:
    name: Build Zip
    runs-on: ubuntu-latest
    steps:
    - name: Zip
      run: npm run build:zip

    - name: Make artifacts available
      uses: actions/upload-artifact@v3
      with:
        name: cypress-artifact
        retention-days: 2
        path: |
          ${{ github.workspace }}/elasticpress.zip

